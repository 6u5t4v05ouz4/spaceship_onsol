# Story 2.4: PÃ¡gina de MissÃµes

## Status

Draft

---

## Story

**As a** Gamer em Space Crypto Miner,
**I want** visualizar uma lista de missÃµes disponÃ­veis com prÃªmios,
**so that** eu possa saber quais tarefas completar para ganhar recompensas.

---

## Acceptance Criteria

1. âœ… UsuÃ¡rio clica em "MissÃµes" no menu â†’ acessa pÃ¡gina de missÃµes
2. âœ… PÃ¡gina exibe lista de missÃµes disponÃ­veis com: tÃ­tulo, descriÃ§Ã£o, status, prÃªmio
3. âœ… Cada missÃ£o mostra: âœ… Completa / â³ Em Progresso / â¬œ NÃ£o iniciada
4. âœ… UsuÃ¡rio consegue clicar em uma missÃ£o para ver detalhes
5. âœ… PÃ¡gina de detalhes mostra: objetivo, recompensa (coins/exp), status, botÃ£o "Jogar"
6. âœ… BotÃ£o "Jogar" leva ao jogo para completar a missÃ£o
7. âœ… Lista Ã© paginada (10 missÃµes por pÃ¡gina) ou com scroll infinito
8. âœ… HÃ¡ filtro: Todas, Completas, Em Progresso, NÃ£o Iniciadas
9. âœ… Layout segue UI_UX_DESIGN_SYSTEM.md
10. âœ… Interface Ã© responsiva
11. âœ… UsuÃ¡rio consegue voltar ao dashboard

---

## User Flow

```
Dashboard
    â”‚
    â–¼
User clica "MissÃµes" no menu
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MISSIONS PAGE                  â”‚
â”‚                                     â”‚
â”‚ Filtros: [Todas] [Completas] ...    â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… Derrotar 10 Inimigos          â”‚ â”‚
â”‚ â”‚ PrÃªmio: 500 coins + 100 exp      â”‚ â”‚
â”‚ â”‚ Status: Completa                 â”‚ â”‚
â”‚ â”‚ [Ver Detalhes]                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â³ Coletar 50 Cristais            â”‚ â”‚
â”‚ â”‚ PrÃªmio: 1000 coins               â”‚ â”‚
â”‚ â”‚ Status: Em Progresso (40/50)    â”‚ â”‚
â”‚ â”‚ [Ver Detalhes]                   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â¬œ Encontrar o Tesouro Perdido    â”‚ â”‚
â”‚ â”‚ PrÃªmio: 2000 coins + 500 exp     â”‚ â”‚
â”‚ â”‚ Status: NÃ£o Iniciada             â”‚ â”‚
â”‚ â”‚ [Ver Detalhes] [Jogar]           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚ [â† Voltar ao Dashboard]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
User clica em "Ver Detalhes" de uma missÃ£o
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MISSION DETAILS                 â”‚
â”‚                                     â”‚
â”‚ ğŸ¯ Encontrar o Tesouro Perdido      â”‚
â”‚                                     â”‚
â”‚ DescriÃ§Ã£o:                          â”‚
â”‚ "Explore a caverna escura e        â”‚
â”‚  encontre o tesouro misterioso"     â”‚
â”‚                                     â”‚
â”‚ Objetivo: Encontrar 1 Tesouro      â”‚
â”‚ PrÃªmio: 2000 coins + 500 exp       â”‚
â”‚ Dificuldade: MÃ©dio                 â”‚
â”‚ Status: NÃ£o Iniciada                â”‚
â”‚                                     â”‚
â”‚ [â† Voltar] [Jogar Agora!]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Dev Notes

### Missions Schema

**Tabela em Supabase (missions):**
```sql
missions:
  - id (UUID, PK)
  - title (string)
  - description (text)
  - objective (string)
  - reward_coins (integer)
  - reward_exp (integer)
  - difficulty ('easy', 'medium', 'hard')
  - created_at (timestamp)

user_mission_progress:
  - id (UUID, PK)
  - user_id (FK to auth.users)
  - mission_id (FK to missions)
  - status ('not_started', 'in_progress', 'completed')
  - progress (integer, %)
  - completed_at (timestamp, nullable)
  - created_at (timestamp)
```

### Missions Service

**LocalizaÃ§Ã£o:** `src/shared/services/missionsService.js`

```javascript
export async function getMissions(supabase, filter = 'all')
export async function getMissionDetails(supabase, missionId)
export async function getUserMissionProgress(supabase, userId, missionId)
export async function completeMission(supabase, userId, missionId)
```

### MissionsPage Component

**LocalizaÃ§Ã£o:** `src/web/pages/MissionsPage.js`

**Estados:**
- Lista de missÃµes
- Filtro selecionado
- PÃ¡gina atual (se paginado)
- MissÃ£o selecionada (para detalhes)

---

## Tasks / Subtasks

- [ ] **Task 1: Criar Schema Missions** (AC: 1)
  - [ ] Criar tabelas: missions, user_mission_progress
  - [ ] Seed dados de teste
  - [ ] RLS policies

- [ ] **Task 2: Criar MissionsService** (AC: 2, 3)
  - [ ] Criar `src/shared/services/missionsService.js`
  - [ ] MÃ©todos para buscar missÃµes, filtrar, etc

- [ ] **Task 3: Criar MissionsPage** (AC: 2, 4, 7, 8, 9, 10)
  - [ ] Criar `src/web/pages/MissionsPage.js`
  - [ ] Renderizar lista de missÃµes
  - [ ] Implementar filtros
  - [ ] PaginaÃ§Ã£o ou scroll infinito
  - [ ] Card de missÃ£o com detalhes

- [ ] **Task 4: Criar MissionDetailsPage** (AC: 5, 6)
  - [ ] Criar `src/web/pages/MissionDetailsPage.js`
  - [ ] Exibir detalhes completos
  - [ ] BotÃ£o "Jogar" â†’ leva ao jogo

- [ ] **Task 5: Testar Fluxo** (AC: todos)
  - [ ] Login â†’ Dashboard â†’ MissÃµes
  - [ ] Ver lista com filtros
  - [ ] Clicar em missÃ£o
  - [ ] Ver detalhes
  - [ ] Jogar

- [ ] **Task 6: E2E Tests** (AC: todas)
  - [ ] Criar `tests/e2e/missions.spec.js`

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-18 | 1.0 | Initial user story created by Scrum Master | Bob (SM) |
