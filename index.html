<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Space Crypto Miner ‚Äî In√≠cio</title>
    <link rel="icon" href="/assets/icones/icone.png">
    <!-- Fontes futur√≠sticas do Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Background animado -->
    <div class="animated-bg">
        <div class="stars"></div>
        <div class="floating-particles" id="particles"></div>
    </div>

    <div class="wrap">
        <header>
            <div class="brand">
                <img src="/assets/icones/icone.png" alt="logo">
                <div>
                    <h1>SPACE CRYPTO MINER</h1>
                    <div class="tagline">Conquer space with your Phantom wallet</div>
                </div>
            </div>

            <!-- Navega√ß√£o por abas -->
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="profile">
                    <span>üë§ Profile</span>
                </button>
                <button class="nav-tab" data-tab="roadmap">
                    <span>üó∫Ô∏è Roadmap</span>
                </button>
                <button class="nav-tab" data-tab="config">
                    <span>‚öôÔ∏è Config</span>
                </button>
            </div>

            <div class="top-actions">
                <button id="loginBtn" class="btn play-btn">
                    <span class="status-indicator disconnected" id="loginStatus"></span>
                    LOGIN
                </button>
                <button id="playBtn" class="btn play-btn" style="display:none;">
                    <span class="status-indicator connected"></span>
                    PLAY
                </button>
            </div>
        </header>

        <!-- Conte√∫do da aba Profile -->
        <div class="tab-content active" id="profile-content">
            <div class="layout">
                <aside class="card profile">
                    <div class="avatar" id="nftAvatar">
                        <img id="avatarImg" src="/assets/icones/astronauta.png" alt="avatar">
                    </div>
                    <div class="ship-preview" id="shipPreview">
                        <div class="ship-label">üöÄ Ship</div>
                        <img id="shipImg" src="/assets/images/idle.png" alt="ship" class="ship-image">
                        <div id="shipName" class="ship-name">Nave Padr√£o</div>
                        <div class="ship-stats" id="shipStats">
                            <div class="stats-title" id="statsTitle">Nave Padr√£o</div>
                            <div class="stats-attributes" id="statsAttributes">
                                <!-- Attributes will be populated by JavaScript -->
                            </div>
                            <div class="stats-rarity" id="statsRarity">COMUM</div>
                        </div>
                    </div>
                </aside>

                <main>
                    <div class="card">
                        <h3 style="margin:0 0 20px 0;color:var(--accent);font-family:var(--font-primary);">üéÆ Game Modes</h3>
                        <div class="modes">
                            <div class="mode">
                                <div>
                                    <div class="mode-title">ü§ñ PVE</div>
                                    <div class="mode-desc">Explore and mine against AI</div>
                                </div>
                                <div class="small glow-text" style="color:var(--success);">Available</div>
                            </div>
                            <div class="mode">
                                <div>
                                    <div class="mode-title">‚öîÔ∏è PVP</div>
                                    <div class="mode-desc">Combat against other pilots</div>
                                </div>
                                <div class="small" style="color:var(--secondary);">Coming soon</div>
                            </div>
                            <div class="mode">
                                <div>
                                    <div class="mode-title">üéØ Event</div>
                                    <div class="mode-desc">Special events and tournaments</div>
                                </div>
                                <div class="small" style="color:var(--secondary);">Coming soon</div>
                            </div>
                        </div>

                        <div class="leaderboard card">
                            <h4>üèÜ Leaderboard</h4>
                            <div class="small" style="text-align:center;padding:20px;color:var(--muted);">
                                <div style="font-size:48px;margin-bottom:10px;">üöÄ</div>
                                Be the first to play!
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top:20px">
                        <h4 style="margin:0 0 16px 0;color:var(--accent);font-family:var(--font-primary);">‚ÑπÔ∏è About the Game</h4>
                        <p class="small" style="line-height:1.6;">
                            This is an innovative prototype where players can use <strong>Solana NFTs</strong>
                            to customize their spacecraft. Connect your <strong>Phantom</strong> wallet
                            for a personalized experience.
                        </p>
                        <div style="margin-top:16px;padding:12px;background:rgba(0,212,255,0.05);border-radius:8px;border-left:3px solid var(--accent);">
                            <div class="small" style="color:var(--accent);">
                                üí° <strong>Tip:</strong> Use the <em>Devnet</em> network for testing
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>

        <!-- Profile tab ser√° carregado dinamicamente -->
        <div id="profile-tab-container"></div>

        <!-- Roadmap tab ser√° carregado dinamicamente -->
        <div id="roadmap-tab-container"></div>

        <!-- Config tab ser√° carregado dinamicamente -->
        <div id="config-tab-container"></div>

        <footer>
            <div>üöÄ ALPHA 0.0.1 ‚Ä¢ Developed with ‚ù§Ô∏è for the crypto community</div>
        </footer>
    </div>

    <!-- JavaScript -->
    <script>
        // Fallback para config.js se n√£o carregar
        if (!window.appConfig) {
            window.appConfig = {
                getEnvironment: () => 'production',
                getRedirectUrl: () => window.location.origin,
                getSupabaseConfig: () => ({
                    url: "https://cjrbhqlwfjebnjoyfjnc.supabase.co",
                    anonKey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqcmJocWx3ZmplYm5qb3lmam5jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3MDIwNTMsImV4cCI6MjA3NTI3ODA1M30.X4uaKnfrmHYYSkVXz1qWYF0wmy-bkjHgbvonubYUTA4"
                })
            };
        }
    </script>
    <script src="./js/config.js" onerror="console.log('config.js failed to load, using fallback')"></script>
    <script>
        // Inline main.js content to avoid loading issues
        console.log('Loading inline JavaScript...');
        
        // Basic tab functionality
        function initTabsNow() {
            const tabs = document.querySelectorAll('.nav-tab');
            
            function switchTab(tabName) {
                window.location.hash = tabName;
                
                tabs.forEach(tab => tab.classList.remove('active'));
                
                const allContainers = document.querySelectorAll('[id$="-tab-container"]');
                allContainers.forEach(container => {
                    container.style.display = 'none';
                });

                const allTabContents = document.querySelectorAll('.tab-content');
                allTabContents.forEach(content => {
                    content.classList.remove('active');
                });

                const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
                if (activeTab) {
                    activeTab.classList.add('active');
                }

                const activeContainer = document.getElementById(`${tabName}-tab-container`);
                if (activeContainer) {
                    activeContainer.style.display = 'block';
                    
                    const tabContent = activeContainer.querySelector('.tab-content');
                    if (tabContent) {
                        tabContent.classList.add('active');
                    }
                    
                    console.log(`Switched to ${tabName} tab`);
                }
            }

            tabs.forEach(tab => {
                const tabName = tab.getAttribute('data-tab');
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    switchTab(tabName);
                });
            });

            function handleHashChange() {
                const hash = window.location.hash.substring(1) || 'profile';
                switchTab(hash);
            }

            window.addEventListener('hashchange', handleHashChange);
            handleHashChange();
            window.switchTab = switchTab;
        }

        // Load components
        async function loadProfileTabComponent() {
            try {
                const response = await fetch('./components/profile-tab.html');
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const profileHTML = await response.text();
                
                const profileTabContainer = document.getElementById('profile-tab-container');
                if (profileTabContainer) {
                    profileTabContainer.innerHTML = profileHTML;
                    profileTabContainer.style.display = 'none';
                    console.log('Profile tab loaded successfully');
                }
            } catch (error) {
                console.error('Error loading profile tab component:', error);
            }
        }

        async function loadConfigTabComponent() {
            try {
                const response = await fetch('./components/config-tab.html');
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const configHTML = await response.text();
                
                const configTabContainer = document.getElementById('config-tab-container');
                if (configTabContainer) {
                    configTabContainer.innerHTML = configHTML;
                    configTabContainer.style.display = 'none';
                    console.log('Config tab loaded successfully');
                }
            } catch (error) {
                console.error('Error loading config tab component:', error);
            }
        }

        async function loadRoadmapTabComponent() {
            try {
                const response = await fetch('./components/roadmap-tab.html');
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const roadmapHTML = await response.text();
                
                const roadmapTabContainer = document.getElementById('roadmap-tab-container');
                if (roadmapTabContainer) {
                    roadmapTabContainer.innerHTML = roadmapHTML;
                    roadmapTabContainer.style.display = 'none';
                    console.log('Roadmap tab loaded successfully');
                }
            } catch (error) {
                console.error('Error loading roadmap tab component:', error);
            }
        }

        // Initialize everything
        async function initializeApp() {
            console.log('Initializing app...');
            await loadProfileTabComponent();
            await loadConfigTabComponent();
            await loadRoadmapTabComponent();
            initTabsNow();
            console.log('App initialized successfully');
        }

        // Start the app
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }
    </script>
</body>
</html>
