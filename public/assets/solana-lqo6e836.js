import{g as ii,a as Xr}from"./phaser-Dt4UB6eP.js";var An={},pr={},Ri;function ko(){if(Ri)return pr;Ri=1,pr.byteLength=f,pr.toByteArray=x,pr.fromByteArray=k;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function a(B){var R=B.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=B.indexOf("=");T===-1&&(T=R);var U=T===R?0:4-T%4;return[T,U]}function f(B){var R=a(B),T=R[0],U=R[1];return(T+U)*3/4-U}function p(B,R,T){return(R+T)*3/4-T}function x(B){var R,T=a(B),U=T[0],P=T[1],W=new e(p(B,U,P)),K=0,J=P>0?U-4:U,Y;for(Y=0;Y<J;Y+=4)R=t[B.charCodeAt(Y)]<<18|t[B.charCodeAt(Y+1)]<<12|t[B.charCodeAt(Y+2)]<<6|t[B.charCodeAt(Y+3)],W[K++]=R>>16&255,W[K++]=R>>8&255,W[K++]=R&255;return P===2&&(R=t[B.charCodeAt(Y)]<<2|t[B.charCodeAt(Y+1)]>>4,W[K++]=R&255),P===1&&(R=t[B.charCodeAt(Y)]<<10|t[B.charCodeAt(Y+1)]<<4|t[B.charCodeAt(Y+2)]>>2,W[K++]=R>>8&255,W[K++]=R&255),W}function I(B){return n[B>>18&63]+n[B>>12&63]+n[B>>6&63]+n[B&63]}function M(B,R,T){for(var U,P=[],W=R;W<T;W+=3)U=(B[W]<<16&16711680)+(B[W+1]<<8&65280)+(B[W+2]&255),P.push(I(U));return P.join("")}function k(B){for(var R,T=B.length,U=T%3,P=[],W=16383,K=0,J=T-U;K<J;K+=W)P.push(M(B,K,K+W>J?J:K+W));return U===1?(R=B[T-1],P.push(n[R>>2]+n[R<<4&63]+"==")):U===2&&(R=(B[T-2]<<8)+B[T-1],P.push(n[R>>10]+n[R>>4&63]+n[R<<2&63]+"=")),P.join("")}return pr}var kr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Mi;function Ro(){return Mi||(Mi=1,kr.read=function(n,t,e,r,s){var i,a,f=s*8-r-1,p=(1<<f)-1,x=p>>1,I=-7,M=e?s-1:0,k=e?-1:1,B=n[t+M];for(M+=k,i=B&(1<<-I)-1,B>>=-I,I+=f;I>0;i=i*256+n[t+M],M+=k,I-=8);for(a=i&(1<<-I)-1,i>>=-I,I+=r;I>0;a=a*256+n[t+M],M+=k,I-=8);if(i===0)i=1-x;else{if(i===p)return a?NaN:(B?-1:1)*(1/0);a=a+Math.pow(2,r),i=i-x}return(B?-1:1)*a*Math.pow(2,i-r)},kr.write=function(n,t,e,r,s,i){var a,f,p,x=i*8-s-1,I=(1<<x)-1,M=I>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=r?0:i-1,R=r?1:-1,T=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(f=isNaN(t)?1:0,a=I):(a=Math.floor(Math.log(t)/Math.LN2),t*(p=Math.pow(2,-a))<1&&(a--,p*=2),a+M>=1?t+=k/p:t+=k*Math.pow(2,1-M),t*p>=2&&(a++,p/=2),a+M>=I?(f=0,a=I):a+M>=1?(f=(t*p-1)*Math.pow(2,s),a=a+M):(f=t*Math.pow(2,M-1)*Math.pow(2,s),a=0));s>=8;n[e+B]=f&255,B+=R,f/=256,s-=8);for(a=a<<s|f,x+=s;x>0;n[e+B]=a&255,B+=R,a/=256,x-=8);n[e+B-R]|=T*128}),kr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ti;function si(){return Ti||(Ti=1,(function(n){const t=ko(),e=Ro(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=f,n.SlowBuffer=W,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,f.TYPED_ARRAY_SUPPORT=i(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const y=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(y,h),y.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function a(y){if(y>s)throw new RangeError('The value "'+y+'" is invalid for option "size"');const h=new Uint8Array(y);return Object.setPrototypeOf(h,f.prototype),h}function f(y,h,d){if(typeof y=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return M(y)}return p(y,h,d)}f.poolSize=8192;function p(y,h,d){if(typeof y=="string")return k(y,h);if(ArrayBuffer.isView(y))return R(y);if(y==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y);if(de(y,ArrayBuffer)||y&&de(y.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(y,SharedArrayBuffer)||y&&de(y.buffer,SharedArrayBuffer)))return T(y,h,d);if(typeof y=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=y.valueOf&&y.valueOf();if(E!=null&&E!==y)return f.from(E,h,d);const N=U(y);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof y[Symbol.toPrimitive]=="function")return f.from(y[Symbol.toPrimitive]("string"),h,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof y)}f.from=function(y,h,d){return p(y,h,d)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array);function x(y){if(typeof y!="number")throw new TypeError('"size" argument must be of type number');if(y<0)throw new RangeError('The value "'+y+'" is invalid for option "size"')}function I(y,h,d){return x(y),y<=0?a(y):h!==void 0?typeof d=="string"?a(y).fill(h,d):a(y).fill(h):a(y)}f.alloc=function(y,h,d){return I(y,h,d)};function M(y){return x(y),a(y<0?0:P(y)|0)}f.allocUnsafe=function(y){return M(y)},f.allocUnsafeSlow=function(y){return M(y)};function k(y,h){if((typeof h!="string"||h==="")&&(h="utf8"),!f.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const d=K(y,h)|0;let E=a(d);const N=E.write(y,h);return N!==d&&(E=E.slice(0,N)),E}function B(y){const h=y.length<0?0:P(y.length)|0,d=a(h);for(let E=0;E<h;E+=1)d[E]=y[E]&255;return d}function R(y){if(de(y,Uint8Array)){const h=new Uint8Array(y);return T(h.buffer,h.byteOffset,h.byteLength)}return B(y)}function T(y,h,d){if(h<0||y.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(y.byteLength<h+(d||0))throw new RangeError('"length" is outside of buffer bounds');let E;return h===void 0&&d===void 0?E=new Uint8Array(y):d===void 0?E=new Uint8Array(y,h):E=new Uint8Array(y,h,d),Object.setPrototypeOf(E,f.prototype),E}function U(y){if(f.isBuffer(y)){const h=P(y.length)|0,d=a(h);return d.length===0||y.copy(d,0,0,h),d}if(y.length!==void 0)return typeof y.length!="number"||At(y.length)?a(0):B(y);if(y.type==="Buffer"&&Array.isArray(y.data))return B(y.data)}function P(y){if(y>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return y|0}function W(y){return+y!=y&&(y=0),f.alloc(+y)}f.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==f.prototype},f.compare=function(h,d){if(de(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),de(d,Uint8Array)&&(d=f.from(d,d.offset,d.byteLength)),!f.isBuffer(h)||!f.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===d)return 0;let E=h.length,N=d.length;for(let D=0,j=Math.min(E,N);D<j;++D)if(h[D]!==d[D]){E=h[D],N=d[D];break}return E<N?-1:N<E?1:0},f.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(h,d){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return f.alloc(0);let E;if(d===void 0)for(d=0,E=0;E<h.length;++E)d+=h[E].length;const N=f.allocUnsafe(d);let D=0;for(E=0;E<h.length;++E){let j=h[E];if(de(j,Uint8Array))D+j.length>N.length?(f.isBuffer(j)||(j=f.from(j)),j.copy(N,D)):Uint8Array.prototype.set.call(N,j,D);else if(f.isBuffer(j))j.copy(N,D);else throw new TypeError('"list" argument must be an Array of Buffers');D+=j.length}return N};function K(y,h){if(f.isBuffer(y))return y.length;if(ArrayBuffer.isView(y)||de(y,ArrayBuffer))return y.byteLength;if(typeof y!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof y);const d=y.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&d===0)return 0;let N=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return _t(y).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return It(y).length;default:if(N)return E?-1:_t(y).length;h=(""+h).toLowerCase(),N=!0}}f.byteLength=K;function J(y,h,d){let E=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,h>>>=0,d<=h))return"";for(y||(y="utf8");;)switch(y){case"hex":return A(this,h,d);case"utf8":case"utf-8":return o(this,h,d);case"ascii":return v(this,h,d);case"latin1":case"binary":return S(this,h,d);case"base64":return m(this,h,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,h,d);default:if(E)throw new TypeError("Unknown encoding: "+y);y=(y+"").toLowerCase(),E=!0}}f.prototype._isBuffer=!0;function Y(y,h,d){const E=y[h];y[h]=y[d],y[d]=E}f.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<h;d+=2)Y(this,d,d+1);return this},f.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<h;d+=4)Y(this,d,d+3),Y(this,d+1,d+2);return this},f.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<h;d+=8)Y(this,d,d+7),Y(this,d+1,d+6),Y(this,d+2,d+5),Y(this,d+3,d+4);return this},f.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?o(this,0,h):J.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(h){if(!f.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:f.compare(this,h)===0},f.prototype.inspect=function(){let h="";const d=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(h+=" ... "),"<Buffer "+h+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(h,d,E,N,D){if(de(h,Uint8Array)&&(h=f.from(h,h.offset,h.byteLength)),!f.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(d===void 0&&(d=0),E===void 0&&(E=h?h.length:0),N===void 0&&(N=0),D===void 0&&(D=this.length),d<0||E>h.length||N<0||D>this.length)throw new RangeError("out of range index");if(N>=D&&d>=E)return 0;if(N>=D)return-1;if(d>=E)return 1;if(d>>>=0,E>>>=0,N>>>=0,D>>>=0,this===h)return 0;let j=D-N,dt=E-d;const lt=Math.min(j,dt),ht=this.slice(N,D),Bt=h.slice(d,E);for(let ct=0;ct<lt;++ct)if(ht[ct]!==Bt[ct]){j=ht[ct],dt=Bt[ct];break}return j<dt?-1:dt<j?1:0};function it(y,h,d,E,N){if(y.length===0)return-1;if(typeof d=="string"?(E=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,At(d)&&(d=N?0:y.length-1),d<0&&(d=y.length+d),d>=y.length){if(N)return-1;d=y.length-1}else if(d<0)if(N)d=0;else return-1;if(typeof h=="string"&&(h=f.from(h,E)),f.isBuffer(h))return h.length===0?-1:ft(y,h,d,E,N);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(y,h,d):Uint8Array.prototype.lastIndexOf.call(y,h,d):ft(y,[h],d,E,N);throw new TypeError("val must be string, number or Buffer")}function ft(y,h,d,E,N){let D=1,j=y.length,dt=h.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(y.length<2||h.length<2)return-1;D=2,j/=2,dt/=2,d/=2}function lt(Bt,ct){return D===1?Bt[ct]:Bt.readUInt16BE(ct*D)}let ht;if(N){let Bt=-1;for(ht=d;ht<j;ht++)if(lt(y,ht)===lt(h,Bt===-1?0:ht-Bt)){if(Bt===-1&&(Bt=ht),ht-Bt+1===dt)return Bt*D}else Bt!==-1&&(ht-=ht-Bt),Bt=-1}else for(d+dt>j&&(d=j-dt),ht=d;ht>=0;ht--){let Bt=!0;for(let ct=0;ct<dt;ct++)if(lt(y,ht+ct)!==lt(h,ct)){Bt=!1;break}if(Bt)return ht}return-1}f.prototype.includes=function(h,d,E){return this.indexOf(h,d,E)!==-1},f.prototype.indexOf=function(h,d,E){return it(this,h,d,E,!0)},f.prototype.lastIndexOf=function(h,d,E){return it(this,h,d,E,!1)};function ot(y,h,d,E){d=Number(d)||0;const N=y.length-d;E?(E=Number(E),E>N&&(E=N)):E=N;const D=h.length;E>D/2&&(E=D/2);let j;for(j=0;j<E;++j){const dt=parseInt(h.substr(j*2,2),16);if(At(dt))return j;y[d+j]=dt}return j}function F(y,h,d,E){return St(_t(h,y.length-d),y,d,E)}function O(y,h,d,E){return St(Tt(h),y,d,E)}function $(y,h,d,E){return St(It(h),y,d,E)}function V(y,h,d,E){return St(Ir(h,y.length-d),y,d,E)}f.prototype.write=function(h,d,E,N){if(d===void 0)N="utf8",E=this.length,d=0;else if(E===void 0&&typeof d=="string")N=d,E=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(E)?(E=E>>>0,N===void 0&&(N="utf8")):(N=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const D=this.length-d;if((E===void 0||E>D)&&(E=D),h.length>0&&(E<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let j=!1;for(;;)switch(N){case"hex":return ot(this,h,d,E);case"utf8":case"utf-8":return F(this,h,d,E);case"ascii":case"latin1":case"binary":return O(this,h,d,E);case"base64":return $(this,h,d,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,h,d,E);default:if(j)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),j=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(y,h,d){return h===0&&d===y.length?t.fromByteArray(y):t.fromByteArray(y.slice(h,d))}function o(y,h,d){d=Math.min(y.length,d);const E=[];let N=h;for(;N<d;){const D=y[N];let j=null,dt=D>239?4:D>223?3:D>191?2:1;if(N+dt<=d){let lt,ht,Bt,ct;switch(dt){case 1:D<128&&(j=D);break;case 2:lt=y[N+1],(lt&192)===128&&(ct=(D&31)<<6|lt&63,ct>127&&(j=ct));break;case 3:lt=y[N+1],ht=y[N+2],(lt&192)===128&&(ht&192)===128&&(ct=(D&15)<<12|(lt&63)<<6|ht&63,ct>2047&&(ct<55296||ct>57343)&&(j=ct));break;case 4:lt=y[N+1],ht=y[N+2],Bt=y[N+3],(lt&192)===128&&(ht&192)===128&&(Bt&192)===128&&(ct=(D&15)<<18|(lt&63)<<12|(ht&63)<<6|Bt&63,ct>65535&&ct<1114112&&(j=ct))}}j===null?(j=65533,dt=1):j>65535&&(j-=65536,E.push(j>>>10&1023|55296),j=56320|j&1023),E.push(j),N+=dt}return g(E)}const l=4096;function g(y){const h=y.length;if(h<=l)return String.fromCharCode.apply(String,y);let d="",E=0;for(;E<h;)d+=String.fromCharCode.apply(String,y.slice(E,E+=l));return d}function v(y,h,d){let E="";d=Math.min(y.length,d);for(let N=h;N<d;++N)E+=String.fromCharCode(y[N]&127);return E}function S(y,h,d){let E="";d=Math.min(y.length,d);for(let N=h;N<d;++N)E+=String.fromCharCode(y[N]);return E}function A(y,h,d){const E=y.length;(!h||h<0)&&(h=0),(!d||d<0||d>E)&&(d=E);let N="";for(let D=h;D<d;++D)N+=Ct[y[D]];return N}function L(y,h,d){const E=y.slice(h,d);let N="";for(let D=0;D<E.length-1;D+=2)N+=String.fromCharCode(E[D]+E[D+1]*256);return N}f.prototype.slice=function(h,d){const E=this.length;h=~~h,d=d===void 0?E:~~d,h<0?(h+=E,h<0&&(h=0)):h>E&&(h=E),d<0?(d+=E,d<0&&(d=0)):d>E&&(d=E),d<h&&(d=h);const N=this.subarray(h,d);return Object.setPrototypeOf(N,f.prototype),N};function b(y,h,d){if(y%1!==0||y<0)throw new RangeError("offset is not uint");if(y+h>d)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(h,d,E){h=h>>>0,d=d>>>0,E||b(h,d,this.length);let N=this[h],D=1,j=0;for(;++j<d&&(D*=256);)N+=this[h+j]*D;return N},f.prototype.readUintBE=f.prototype.readUIntBE=function(h,d,E){h=h>>>0,d=d>>>0,E||b(h,d,this.length);let N=this[h+--d],D=1;for(;d>0&&(D*=256);)N+=this[h+--d]*D;return N},f.prototype.readUint8=f.prototype.readUInt8=function(h,d){return h=h>>>0,d||b(h,1,this.length),this[h]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(h,d){return h=h>>>0,d||b(h,2,this.length),this[h]|this[h+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(h,d){return h=h>>>0,d||b(h,2,this.length),this[h]<<8|this[h+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(h,d){return h=h>>>0,d||b(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(h,d){return h=h>>>0,d||b(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},f.prototype.readBigUInt64LE=we(function(h){h=h>>>0,pe(h,"offset");const d=this[h],E=this[h+7];(d===void 0||E===void 0)&&xt(h,this.length-8);const N=d+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,D=this[++h]+this[++h]*2**8+this[++h]*2**16+E*2**24;return BigInt(N)+(BigInt(D)<<BigInt(32))}),f.prototype.readBigUInt64BE=we(function(h){h=h>>>0,pe(h,"offset");const d=this[h],E=this[h+7];(d===void 0||E===void 0)&&xt(h,this.length-8);const N=d*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],D=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+E;return(BigInt(N)<<BigInt(32))+BigInt(D)}),f.prototype.readIntLE=function(h,d,E){h=h>>>0,d=d>>>0,E||b(h,d,this.length);let N=this[h],D=1,j=0;for(;++j<d&&(D*=256);)N+=this[h+j]*D;return D*=128,N>=D&&(N-=Math.pow(2,8*d)),N},f.prototype.readIntBE=function(h,d,E){h=h>>>0,d=d>>>0,E||b(h,d,this.length);let N=d,D=1,j=this[h+--N];for(;N>0&&(D*=256);)j+=this[h+--N]*D;return D*=128,j>=D&&(j-=Math.pow(2,8*d)),j},f.prototype.readInt8=function(h,d){return h=h>>>0,d||b(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},f.prototype.readInt16LE=function(h,d){h=h>>>0,d||b(h,2,this.length);const E=this[h]|this[h+1]<<8;return E&32768?E|4294901760:E},f.prototype.readInt16BE=function(h,d){h=h>>>0,d||b(h,2,this.length);const E=this[h+1]|this[h]<<8;return E&32768?E|4294901760:E},f.prototype.readInt32LE=function(h,d){return h=h>>>0,d||b(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},f.prototype.readInt32BE=function(h,d){return h=h>>>0,d||b(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},f.prototype.readBigInt64LE=we(function(h){h=h>>>0,pe(h,"offset");const d=this[h],E=this[h+7];(d===void 0||E===void 0)&&xt(h,this.length-8);const N=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(E<<24);return(BigInt(N)<<BigInt(32))+BigInt(d+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),f.prototype.readBigInt64BE=we(function(h){h=h>>>0,pe(h,"offset");const d=this[h],E=this[h+7];(d===void 0||E===void 0)&&xt(h,this.length-8);const N=(d<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(N)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+E)}),f.prototype.readFloatLE=function(h,d){return h=h>>>0,d||b(h,4,this.length),e.read(this,h,!0,23,4)},f.prototype.readFloatBE=function(h,d){return h=h>>>0,d||b(h,4,this.length),e.read(this,h,!1,23,4)},f.prototype.readDoubleLE=function(h,d){return h=h>>>0,d||b(h,8,this.length),e.read(this,h,!0,52,8)},f.prototype.readDoubleBE=function(h,d){return h=h>>>0,d||b(h,8,this.length),e.read(this,h,!1,52,8)};function c(y,h,d,E,N,D){if(!f.isBuffer(y))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>N||h<D)throw new RangeError('"value" argument is out of bounds');if(d+E>y.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(h,d,E,N){if(h=+h,d=d>>>0,E=E>>>0,!N){const dt=Math.pow(2,8*E)-1;c(this,h,d,E,dt,0)}let D=1,j=0;for(this[d]=h&255;++j<E&&(D*=256);)this[d+j]=h/D&255;return d+E},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(h,d,E,N){if(h=+h,d=d>>>0,E=E>>>0,!N){const dt=Math.pow(2,8*E)-1;c(this,h,d,E,dt,0)}let D=E-1,j=1;for(this[d+D]=h&255;--D>=0&&(j*=256);)this[d+D]=h/j&255;return d+E},f.prototype.writeUint8=f.prototype.writeUInt8=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,1,255,0),this[d]=h&255,d+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,2,65535,0),this[d]=h&255,this[d+1]=h>>>8,d+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,2,65535,0),this[d]=h>>>8,this[d+1]=h&255,d+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,4,4294967295,0),this[d+3]=h>>>24,this[d+2]=h>>>16,this[d+1]=h>>>8,this[d]=h&255,d+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,4,4294967295,0),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4};function u(y,h,d,E,N){vt(h,E,N,y,d,7);let D=Number(h&BigInt(4294967295));y[d++]=D,D=D>>8,y[d++]=D,D=D>>8,y[d++]=D,D=D>>8,y[d++]=D;let j=Number(h>>BigInt(32)&BigInt(4294967295));return y[d++]=j,j=j>>8,y[d++]=j,j=j>>8,y[d++]=j,j=j>>8,y[d++]=j,d}function w(y,h,d,E,N){vt(h,E,N,y,d,7);let D=Number(h&BigInt(4294967295));y[d+7]=D,D=D>>8,y[d+6]=D,D=D>>8,y[d+5]=D,D=D>>8,y[d+4]=D;let j=Number(h>>BigInt(32)&BigInt(4294967295));return y[d+3]=j,j=j>>8,y[d+2]=j,j=j>>8,y[d+1]=j,j=j>>8,y[d]=j,d+8}f.prototype.writeBigUInt64LE=we(function(h,d=0){return u(this,h,d,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=we(function(h,d=0){return w(this,h,d,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(h,d,E,N){if(h=+h,d=d>>>0,!N){const lt=Math.pow(2,8*E-1);c(this,h,d,E,lt-1,-lt)}let D=0,j=1,dt=0;for(this[d]=h&255;++D<E&&(j*=256);)h<0&&dt===0&&this[d+D-1]!==0&&(dt=1),this[d+D]=(h/j>>0)-dt&255;return d+E},f.prototype.writeIntBE=function(h,d,E,N){if(h=+h,d=d>>>0,!N){const lt=Math.pow(2,8*E-1);c(this,h,d,E,lt-1,-lt)}let D=E-1,j=1,dt=0;for(this[d+D]=h&255;--D>=0&&(j*=256);)h<0&&dt===0&&this[d+D+1]!==0&&(dt=1),this[d+D]=(h/j>>0)-dt&255;return d+E},f.prototype.writeInt8=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,1,127,-128),h<0&&(h=255+h+1),this[d]=h&255,d+1},f.prototype.writeInt16LE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,2,32767,-32768),this[d]=h&255,this[d+1]=h>>>8,d+2},f.prototype.writeInt16BE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,2,32767,-32768),this[d]=h>>>8,this[d+1]=h&255,d+2},f.prototype.writeInt32LE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,4,2147483647,-2147483648),this[d]=h&255,this[d+1]=h>>>8,this[d+2]=h>>>16,this[d+3]=h>>>24,d+4},f.prototype.writeInt32BE=function(h,d,E){return h=+h,d=d>>>0,E||c(this,h,d,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[d]=h>>>24,this[d+1]=h>>>16,this[d+2]=h>>>8,this[d+3]=h&255,d+4},f.prototype.writeBigInt64LE=we(function(h,d=0){return u(this,h,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=we(function(h,d=0){return w(this,h,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _(y,h,d,E,N,D){if(d+E>y.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function q(y,h,d,E,N){return h=+h,d=d>>>0,N||_(y,h,d,4),e.write(y,h,d,E,23,4),d+4}f.prototype.writeFloatLE=function(h,d,E){return q(this,h,d,!0,E)},f.prototype.writeFloatBE=function(h,d,E){return q(this,h,d,!1,E)};function G(y,h,d,E,N){return h=+h,d=d>>>0,N||_(y,h,d,8),e.write(y,h,d,E,52,8),d+8}f.prototype.writeDoubleLE=function(h,d,E){return G(this,h,d,!0,E)},f.prototype.writeDoubleBE=function(h,d,E){return G(this,h,d,!1,E)},f.prototype.copy=function(h,d,E,N){if(!f.isBuffer(h))throw new TypeError("argument should be a Buffer");if(E||(E=0),!N&&N!==0&&(N=this.length),d>=h.length&&(d=h.length),d||(d=0),N>0&&N<E&&(N=E),N===E||h.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),h.length-d<N-E&&(N=h.length-d+E);const D=N-E;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,E,N):Uint8Array.prototype.set.call(h,this.subarray(E,N),d),D},f.prototype.fill=function(h,d,E,N){if(typeof h=="string"){if(typeof d=="string"?(N=d,d=0,E=this.length):typeof E=="string"&&(N=E,E=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!f.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(h.length===1){const j=h.charCodeAt(0);(N==="utf8"&&j<128||N==="latin1")&&(h=j)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(d<0||this.length<d||this.length<E)throw new RangeError("Out of range index");if(E<=d)return this;d=d>>>0,E=E===void 0?this.length:E>>>0,h||(h=0);let D;if(typeof h=="number")for(D=d;D<E;++D)this[D]=h;else{const j=f.isBuffer(h)?h:f.from(h,N),dt=j.length;if(dt===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(D=0;D<E-d;++D)this[D+d]=j[D%dt]}return this};const tt={};function nt(y,h,d){tt[y]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${y}]`,this.stack,delete this.name}get code(){return y}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${y}]: ${this.message}`}}}nt("ERR_BUFFER_OUT_OF_BOUNDS",function(y){return y?`${y} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),nt("ERR_INVALID_ARG_TYPE",function(y,h){return`The "${y}" argument must be of type number. Received type ${typeof h}`},TypeError),nt("ERR_OUT_OF_RANGE",function(y,h,d){let E=`The value of "${y}" is out of range.`,N=d;return Number.isInteger(d)&&Math.abs(d)>2**32?N=yt(String(d)):typeof d=="bigint"&&(N=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(N=yt(N)),N+="n"),E+=` It must be ${h}. Received ${N}`,E},RangeError);function yt(y){let h="",d=y.length;const E=y[0]==="-"?1:0;for(;d>=E+4;d-=3)h=`_${y.slice(d-3,d)}${h}`;return`${y.slice(0,d)}${h}`}function wt(y,h,d){pe(h,"offset"),(y[h]===void 0||y[h+d]===void 0)&&xt(h,y.length-(d+1))}function vt(y,h,d,E,N,D){if(y>d||y<h){const j=typeof h=="bigint"?"n":"";let dt;throw h===0||h===BigInt(0)?dt=`>= 0${j} and < 2${j} ** ${(D+1)*8}${j}`:dt=`>= -(2${j} ** ${(D+1)*8-1}${j}) and < 2 ** ${(D+1)*8-1}${j}`,new tt.ERR_OUT_OF_RANGE("value",dt,y)}wt(E,N,D)}function pe(y,h){if(typeof y!="number")throw new tt.ERR_INVALID_ARG_TYPE(h,"number",y)}function xt(y,h,d){throw Math.floor(y)!==y?(pe(y,d),new tt.ERR_OUT_OF_RANGE("offset","an integer",y)):h<0?new tt.ERR_BUFFER_OUT_OF_BOUNDS:new tt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,y)}const Mt=/[^+/0-9A-Za-z-_]/g;function Ar(y){if(y=y.split("=")[0],y=y.trim().replace(Mt,""),y.length<2)return"";for(;y.length%4!==0;)y=y+"=";return y}function _t(y,h){h=h||1/0;let d;const E=y.length;let N=null;const D=[];for(let j=0;j<E;++j){if(d=y.charCodeAt(j),d>55295&&d<57344){if(!N){if(d>56319){(h-=3)>-1&&D.push(239,191,189);continue}else if(j+1===E){(h-=3)>-1&&D.push(239,191,189);continue}N=d;continue}if(d<56320){(h-=3)>-1&&D.push(239,191,189),N=d;continue}d=(N-55296<<10|d-56320)+65536}else N&&(h-=3)>-1&&D.push(239,191,189);if(N=null,d<128){if((h-=1)<0)break;D.push(d)}else if(d<2048){if((h-=2)<0)break;D.push(d>>6|192,d&63|128)}else if(d<65536){if((h-=3)<0)break;D.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((h-=4)<0)break;D.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return D}function Tt(y){const h=[];for(let d=0;d<y.length;++d)h.push(y.charCodeAt(d)&255);return h}function Ir(y,h){let d,E,N;const D=[];for(let j=0;j<y.length&&!((h-=2)<0);++j)d=y.charCodeAt(j),E=d>>8,N=d%256,D.push(N),D.push(E);return D}function It(y){return t.toByteArray(Ar(y))}function St(y,h,d,E){let N;for(N=0;N<E&&!(N+d>=h.length||N>=y.length);++N)h[N+d]=y[N];return N}function de(y,h){return y instanceof h||y!=null&&y.constructor!=null&&y.constructor.name!=null&&y.constructor.name===h.name}function At(y){return y!==y}const Ct=(function(){const y="0123456789abcdef",h=new Array(256);for(let d=0;d<16;++d){const E=d*16;for(let N=0;N<16;++N)h[E+N]=y[d]+y[N]}return h})();function we(y){return typeof BigInt>"u"?Lt:y}function Lt(){throw new Error("BigInt not supported")}})(An)),An}var gt=si();const Xe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function br(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Yn(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function je(n,...t){if(!br(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function ws(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yn(n.outputLen),Yn(n.blockLen)}function Pr(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Mo(n,t){je(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function ar(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function In(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function xe(n,t){return n<<32-t|n>>>t}const bs=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",To=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function He(n){if(je(n),bs)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=To[n[e]];return t}const _e={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ci(n){if(n>=_e._0&&n<=_e._9)return n-_e._0;if(n>=_e.A&&n<=_e.F)return n-(_e.A-10);if(n>=_e.a&&n<=_e.f)return n-(_e.a-10)}function Dr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(bs)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const a=Ci(n.charCodeAt(i)),f=Ci(n.charCodeAt(i+1));if(a===void 0||f===void 0){const p=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+p+'" at index '+i)}r[s]=a*16+f}return r}function Co(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function oi(n){return typeof n=="string"&&(n=Co(n)),je(n),n}function Ee(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];je(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class vs{}function xs(n){const t=r=>n().update(oi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function ai(n=32){if(Xe&&typeof Xe.getRandomValues=="function")return Xe.getRandomValues(new Uint8Array(n));if(Xe&&typeof Xe.randomBytes=="function")return Uint8Array.from(Xe.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Lo(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(e>>s&i),f=Number(e&i),p=r?4:0,x=r?0:4;n.setUint32(t+p,a,r),n.setUint32(t+x,f,r)}function Uo(n,t,e){return n&t^~n&e}function Fo(n,t,e){return n&t^n&e^t&e}class Es extends vs{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=In(this.buffer)}update(t){Pr(this),t=oi(t),je(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let a=0;a<i;){const f=Math.min(s-this.pos,i-a);if(f===s){const p=In(t);for(;s<=i-a;a+=s)this.process(p,a);continue}r.set(t.subarray(a,a+f),this.pos),this.pos+=f,a+=f,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pr(this),Mo(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;e[a++]=128,ar(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let M=a;M<s;M++)e[M]=0;Lo(r,s-8,BigInt(this.length*8),i),this.process(r,0);const f=In(t),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=p/4,I=this.get();if(x>I.length)throw new Error("_sha2: outputLen bigger than state");for(let M=0;M<x;M++)f.setUint32(4*M,I[M],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:a,pos:f}=this;return t.destroyed=a,t.finished=i,t.length=s,t.pos=f,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Te=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),oe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Rr=BigInt(2**32-1),Li=BigInt(32);function No(n,t=!1){return t?{h:Number(n&Rr),l:Number(n>>Li&Rr)}:{h:Number(n>>Li&Rr)|0,l:Number(n&Rr)|0}}function Oo(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:a,l:f}=No(n[i],t);[r[i],s[i]]=[a,f]}return[r,s]}const Ui=(n,t,e)=>n>>>e,Fi=(n,t,e)=>n<<32-e|t>>>e,Je=(n,t,e)=>n>>>e|t<<32-e,Qe=(n,t,e)=>n<<32-e|t>>>e,Mr=(n,t,e)=>n<<64-e|t>>>e-32,Tr=(n,t,e)=>n>>>e-32|t<<64-e;function Ae(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const qo=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Po=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Do=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),zo=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Ko=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),$o=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,Ho=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ce=new Uint32Array(64);class Vo extends Es{constructor(t=32){super(64,t,8,!1),this.A=Te[0]|0,this.B=Te[1]|0,this.C=Te[2]|0,this.D=Te[3]|0,this.E=Te[4]|0,this.F=Te[5]|0,this.G=Te[6]|0,this.H=Te[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:a,G:f,H:p}=this;return[t,e,r,s,i,a,f,p]}set(t,e,r,s,i,a,f,p){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=f|0,this.H=p|0}process(t,e){for(let M=0;M<16;M++,e+=4)Ce[M]=t.getUint32(e,!1);for(let M=16;M<64;M++){const k=Ce[M-15],B=Ce[M-2],R=xe(k,7)^xe(k,18)^k>>>3,T=xe(B,17)^xe(B,19)^B>>>10;Ce[M]=T+Ce[M-7]+R+Ce[M-16]|0}let{A:r,B:s,C:i,D:a,E:f,F:p,G:x,H:I}=this;for(let M=0;M<64;M++){const k=xe(f,6)^xe(f,11)^xe(f,25),B=I+k+Uo(f,p,x)+Ho[M]+Ce[M]|0,T=(xe(r,2)^xe(r,13)^xe(r,22))+Fo(r,s,i)|0;I=x,x=p,p=f,f=a+B|0,a=i,i=s,s=r,r=B+T|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,f=f+this.E|0,p=p+this.F|0,x=x+this.G|0,I=I+this.H|0,this.set(r,s,i,a,f,p,x,I)}roundClean(){ar(Ce)}destroy(){this.set(0,0,0,0,0,0,0,0),ar(this.buffer)}}const Ss=Oo(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),jo=Ss[0],Go=Ss[1],Le=new Uint32Array(80),Ue=new Uint32Array(80);class Wo extends Es{constructor(t=64){super(128,t,16,!1),this.Ah=oe[0]|0,this.Al=oe[1]|0,this.Bh=oe[2]|0,this.Bl=oe[3]|0,this.Ch=oe[4]|0,this.Cl=oe[5]|0,this.Dh=oe[6]|0,this.Dl=oe[7]|0,this.Eh=oe[8]|0,this.El=oe[9]|0,this.Fh=oe[10]|0,this.Fl=oe[11]|0,this.Gh=oe[12]|0,this.Gl=oe[13]|0,this.Hh=oe[14]|0,this.Hl=oe[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:a,Dh:f,Dl:p,Eh:x,El:I,Fh:M,Fl:k,Gh:B,Gl:R,Hh:T,Hl:U}=this;return[t,e,r,s,i,a,f,p,x,I,M,k,B,R,T,U]}set(t,e,r,s,i,a,f,p,x,I,M,k,B,R,T,U){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=a|0,this.Dh=f|0,this.Dl=p|0,this.Eh=x|0,this.El=I|0,this.Fh=M|0,this.Fl=k|0,this.Gh=B|0,this.Gl=R|0,this.Hh=T|0,this.Hl=U|0}process(t,e){for(let K=0;K<16;K++,e+=4)Le[K]=t.getUint32(e),Ue[K]=t.getUint32(e+=4);for(let K=16;K<80;K++){const J=Le[K-15]|0,Y=Ue[K-15]|0,it=Je(J,Y,1)^Je(J,Y,8)^Ui(J,Y,7),ft=Qe(J,Y,1)^Qe(J,Y,8)^Fi(J,Y,7),ot=Le[K-2]|0,F=Ue[K-2]|0,O=Je(ot,F,19)^Mr(ot,F,61)^Ui(ot,F,6),$=Qe(ot,F,19)^Tr(ot,F,61)^Fi(ot,F,6),V=Do(ft,$,Ue[K-7],Ue[K-16]),m=zo(V,it,O,Le[K-7],Le[K-16]);Le[K]=m|0,Ue[K]=V|0}let{Ah:r,Al:s,Bh:i,Bl:a,Ch:f,Cl:p,Dh:x,Dl:I,Eh:M,El:k,Fh:B,Fl:R,Gh:T,Gl:U,Hh:P,Hl:W}=this;for(let K=0;K<80;K++){const J=Je(M,k,14)^Je(M,k,18)^Mr(M,k,41),Y=Qe(M,k,14)^Qe(M,k,18)^Tr(M,k,41),it=M&B^~M&T,ft=k&R^~k&U,ot=Ko(W,Y,ft,Go[K],Ue[K]),F=$o(ot,P,J,it,jo[K],Le[K]),O=ot|0,$=Je(r,s,28)^Mr(r,s,34)^Mr(r,s,39),V=Qe(r,s,28)^Tr(r,s,34)^Tr(r,s,39),m=r&i^r&f^i&f,o=s&a^s&p^a&p;P=T|0,W=U|0,T=B|0,U=R|0,B=M|0,R=k|0,{h:M,l:k}=Ae(x|0,I|0,F|0,O|0),x=f|0,I=p|0,f=i|0,p=a|0,i=r|0,a=s|0;const l=qo(O,V,o);r=Po(l,F,$,m),s=l|0}({h:r,l:s}=Ae(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:a}=Ae(this.Bh|0,this.Bl|0,i|0,a|0),{h:f,l:p}=Ae(this.Ch|0,this.Cl|0,f|0,p|0),{h:x,l:I}=Ae(this.Dh|0,this.Dl|0,x|0,I|0),{h:M,l:k}=Ae(this.Eh|0,this.El|0,M|0,k|0),{h:B,l:R}=Ae(this.Fh|0,this.Fl|0,B|0,R|0),{h:T,l:U}=Ae(this.Gh|0,this.Gl|0,T|0,U|0),{h:P,l:W}=Ae(this.Hh|0,this.Hl|0,P|0,W|0),this.set(r,s,i,a,f,p,x,I,M,k,B,R,T,U,P,W)}roundClean(){ar(Le,Ue)}destroy(){ar(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Bs=xs(()=>new Vo),Zo=xs(()=>new Wo);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ci=BigInt(0),Xn=BigInt(1);function Ve(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function be(n,t,e=""){const r=br(n),s=n?.length,i=t!==void 0;if(!r||i&&s!==t){const a=e&&`"${e}" `,f=i?` of length ${t}`:"",p=r?`length=${s}`:`type=${typeof n}`;throw new Error(a+"expected Uint8Array"+f+", got "+p)}return n}function Cr(n){const t=n.toString(16);return t.length&1?"0"+t:t}function _s(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?ci:BigInt("0x"+n)}function Jr(n){return _s(He(n))}function yr(n){return je(n),_s(He(Uint8Array.from(n).reverse()))}function ui(n,t){return Dr(n.toString(16).padStart(t*2,"0"))}function As(n,t){return ui(n,t).reverse()}function Ft(n,t,e){let r;if(typeof t=="string")try{r=Dr(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(br(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Ni(n){return Uint8Array.from(n)}const kn=n=>typeof n=="bigint"&&ci<=n;function Yo(n,t,e){return kn(n)&&kn(t)&&kn(e)&&t<=n&&n<e}function Jn(n,t,e,r){if(!Yo(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Is(n){let t;for(t=0;n>ci;n>>=Xn,t+=1);return t}const vr=n=>(Xn<<BigInt(n))-Xn;function Xo(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=B=>new Uint8Array(B),s=B=>Uint8Array.of(B);let i=r(n),a=r(n),f=0;const p=()=>{i.fill(1),a.fill(0),f=0},x=(...B)=>e(a,i,...B),I=(B=r(0))=>{a=x(s(0),B),i=x(),B.length!==0&&(a=x(s(1),B),i=x())},M=()=>{if(f++>=1e3)throw new Error("drbg: tried 1000 values");let B=0;const R=[];for(;B<t;){i=x();const T=i.slice();R.push(T),B+=i.length}return Ee(...R)};return(B,R)=>{p(),I(B);let T;for(;!(T=R(M()));)I();return p(),T}}function xr(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,a){const f=n[s];if(a&&f===void 0)return;const p=typeof f;if(p!==i||f===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${p}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function zr(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const le=BigInt(0),se=BigInt(1),ze=BigInt(2),ks=BigInt(3),Rs=BigInt(4),Ms=BigInt(5),Jo=BigInt(7),Ts=BigInt(8),Qo=BigInt(9),Cs=BigInt(16);function ee(n,t){const e=n%t;return e>=le?e:t+e}function Ut(n,t,e){let r=n;for(;t-- >le;)r*=r,r%=e;return r}function Oi(n,t){if(n===le)throw new Error("invert: expected non-zero number");if(t<=le)throw new Error("invert: expected positive modulus, got "+t);let e=ee(n,t),r=t,s=le,i=se;for(;e!==le;){const f=r/e,p=r%e,x=s-i*f;r=e,e=p,s=i,i=x}if(r!==se)throw new Error("invert: does not exist");return ee(s,t)}function fi(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function Ls(n,t){const e=(n.ORDER+se)/Rs,r=n.pow(t,e);return fi(n,r,t),r}function ta(n,t){const e=(n.ORDER-Ms)/Ts,r=n.mul(t,ze),s=n.pow(r,e),i=n.mul(t,s),a=n.mul(n.mul(i,ze),s),f=n.mul(i,n.sub(a,n.ONE));return fi(n,f,t),f}function ea(n){const t=Ge(n),e=Us(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),a=(n+Jo)/Cs;return(f,p)=>{let x=f.pow(p,a),I=f.mul(x,r);const M=f.mul(x,s),k=f.mul(x,i),B=f.eql(f.sqr(I),p),R=f.eql(f.sqr(M),p);x=f.cmov(x,I,B),I=f.cmov(k,M,R);const T=f.eql(f.sqr(I),p),U=f.cmov(x,I,T);return fi(f,U,p),U}}function Us(n){if(n<ks)throw new Error("sqrt is not defined for small field");let t=n-se,e=0;for(;t%ze===le;)t/=ze,e++;let r=ze;const s=Ge(n);for(;qi(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Ls;let i=s.pow(r,t);const a=(t+se)/ze;return function(p,x){if(p.is0(x))return x;if(qi(p,x)!==1)throw new Error("Cannot find square root");let I=e,M=p.mul(p.ONE,i),k=p.pow(x,t),B=p.pow(x,a);for(;!p.eql(k,p.ONE);){if(p.is0(k))return p.ZERO;let R=1,T=p.sqr(k);for(;!p.eql(T,p.ONE);)if(R++,T=p.sqr(T),R===I)throw new Error("Cannot find square root");const U=se<<BigInt(I-R-1),P=p.pow(M,U);I=R,M=p.sqr(P),k=p.mul(k,M),B=p.mul(B,P)}return B}}function ra(n){return n%Rs===ks?Ls:n%Ts===Ms?ta:n%Cs===Qo?ea(n):Us(n)}const na=(n,t)=>(ee(n,t)&se)===se,ia=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sa(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=ia.reduce((r,s)=>(r[s]="function",r),t);return xr(n,e),n}function oa(n,t,e){if(e<le)throw new Error("invalid exponent, negatives unsupported");if(e===le)return n.ONE;if(e===se)return t;let r=n.ONE,s=t;for(;e>le;)e&se&&(r=n.mul(r,s)),s=n.sqr(s),e>>=se;return r}function Fs(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((a,f,p)=>n.is0(f)?a:(r[p]=a,n.mul(a,f)),n.ONE),i=n.inv(s);return t.reduceRight((a,f,p)=>n.is0(f)?a:(r[p]=n.mul(a,r[p]),n.mul(a,f)),i),r}function qi(n,t){const e=(n.ORDER-se)/ze,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),a=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!a)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Ns(n,t){t!==void 0&&Yn(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Ge(n,t,e=!1,r={}){if(n<=le)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,a=!1,f;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const k=t;k.BITS&&(s=k.BITS),k.sqrt&&(i=k.sqrt),typeof k.isLE=="boolean"&&(e=k.isLE),typeof k.modFromBytes=="boolean"&&(a=k.modFromBytes),f=k.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:p,nByteLength:x}=Ns(n,s);if(x>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let I;const M=Object.freeze({ORDER:n,isLE:e,BITS:p,BYTES:x,MASK:vr(p),ZERO:le,ONE:se,allowedLengths:f,create:k=>ee(k,n),isValid:k=>{if(typeof k!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof k);return le<=k&&k<n},is0:k=>k===le,isValidNot0:k=>!M.is0(k)&&M.isValid(k),isOdd:k=>(k&se)===se,neg:k=>ee(-k,n),eql:(k,B)=>k===B,sqr:k=>ee(k*k,n),add:(k,B)=>ee(k+B,n),sub:(k,B)=>ee(k-B,n),mul:(k,B)=>ee(k*B,n),pow:(k,B)=>oa(M,k,B),div:(k,B)=>ee(k*Oi(B,n),n),sqrN:k=>k*k,addN:(k,B)=>k+B,subN:(k,B)=>k-B,mulN:(k,B)=>k*B,inv:k=>Oi(k,n),sqrt:i||(k=>(I||(I=ra(n)),I(M,k))),toBytes:k=>e?As(k,x):ui(k,x),fromBytes:(k,B=!0)=>{if(f){if(!f.includes(k.length)||k.length>x)throw new Error("Field.fromBytes: expected "+f+" bytes, got "+k.length);const T=new Uint8Array(x);T.set(k,e?0:T.length-k.length),k=T}if(k.length!==x)throw new Error("Field.fromBytes: expected "+x+" bytes, got "+k.length);let R=e?yr(k):Jr(k);if(a&&(R=ee(R,n)),!B&&!M.isValid(R))throw new Error("invalid field element: outside of range 0..ORDER");return R},invertBatch:k=>Fs(M,k),cmov:(k,B,R)=>R?B:k});return Object.freeze(M)}function Os(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function qs(n){const t=Os(n);return t+Math.ceil(t/2)}function aa(n,t,e=!1){const r=n.length,s=Os(t),i=qs(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const a=e?yr(n):Jr(n),f=ee(a,t-se)+se;return e?As(f,s):ui(f,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cr=BigInt(0),Ke=BigInt(1);function Kr(n,t){const e=t.negate();return n?e:t}function $e(n,t){const e=Fs(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function Ps(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Rn(n,t){Ps(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=vr(n),a=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:a}}function Pi(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:a}=e;let f=Number(n&s),p=n>>a;f>r&&(f-=i,p+=Ke);const x=t*r,I=x+Math.abs(f)-1,M=f===0,k=f<0,B=t%2!==0;return{nextN:p,offset:I,isZero:M,isNeg:k,isNegF:B,offsetF:x}}function ca(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function ua(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Mn=new WeakMap,Ds=new WeakMap;function Tn(n){return Ds.get(n)||1}function Di(n){if(n!==cr)throw new Error("invalid wNAF")}class zs{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>cr;)e&Ke&&(r=r.add(s)),s=s.double(),e>>=Ke;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=Rn(e,this.bits),i=[];let a=t,f=a;for(let p=0;p<r;p++){f=a,i.push(f);for(let x=1;x<s;x++)f=f.add(a),i.push(f);a=f.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const a=Rn(t,this.bits);for(let f=0;f<a.windows;f++){const{nextN:p,offset:x,isZero:I,isNeg:M,isNegF:k,offsetF:B}=Pi(r,f,a);r=p,I?i=i.add(Kr(k,e[B])):s=s.add(Kr(M,e[x]))}return Di(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=Rn(t,this.bits);for(let a=0;a<i.windows&&r!==cr;a++){const{nextN:f,offset:p,isZero:x,isNeg:I}=Pi(r,a,i);if(r=f,!x){const M=e[p];s=s.add(I?M.negate():M)}}return Di(r),s}getPrecomputes(t,e,r){let s=Mn.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),Mn.set(e,s))),s}cached(t,e,r){const s=Tn(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=Tn(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){Ps(e,this.bits),Ds.set(t,e),Mn.delete(t)}hasCache(t){return Tn(t)!==1}}function fa(n,t,e,r){let s=t,i=n.ZERO,a=n.ZERO;for(;e>cr||r>cr;)e&Ke&&(i=i.add(s)),r&Ke&&(a=a.add(s)),s=s.double(),e>>=Ke,r>>=Ke;return{p1:i,p2:a}}function Ks(n,t,e,r){ca(e,n),ua(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const a=n.ZERO,f=Is(BigInt(s));let p=1;f>12?p=f-3:f>4?p=f-2:f>0&&(p=2);const x=vr(p),I=new Array(Number(x)+1).fill(a),M=Math.floor((t.BITS-1)/p)*p;let k=a;for(let B=M;B>=0;B-=p){I.fill(a);for(let T=0;T<i;T++){const U=r[T],P=Number(U>>BigInt(B)&x);I[P]=I[P].add(e[T])}let R=a;for(let T=I.length-1,U=a;T>0;T--)U=U.add(I[T]),R=R.add(U);if(k=k.add(R),B!==0)for(let T=0;T<p;T++)k=k.double()}return k}function zi(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return sa(t),t}else return Ge(n,{isLE:e})}function $s(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const p of["p","n","h"]){const x=t[p];if(!(typeof x=="bigint"&&x>cr))throw new Error(`CURVE.${p} must be positive bigint`)}const s=zi(t.p,e.Fp,r),i=zi(t.n,e.Fn,r),f=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const p of f)if(!s.isValid(t[p]))throw new Error(`CURVE.${p} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Fe=BigInt(0),re=BigInt(1),Cn=BigInt(2),ha=BigInt(8);function la(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),a=n.add(n.mul(t.a,s),i),f=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(a,f)}function da(n,t={}){const e=$s("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:a}=i;xr(t,{},{uvRatio:"function"});const f=Cn<<BigInt(s.BYTES*8)-re,p=U=>r.create(U),x=t.uvRatio||((U,P)=>{try{return{isValid:!0,value:r.sqrt(r.div(U,P))}}catch{return{isValid:!1,value:Fe}}});if(!la(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function I(U,P,W=!1){const K=W?re:Fe;return Jn("coordinate "+U,P,K,f),P}function M(U){if(!(U instanceof R))throw new Error("ExtendedPoint expected")}const k=zr((U,P)=>{const{X:W,Y:K,Z:J}=U,Y=U.is0();P==null&&(P=Y?ha:r.inv(J));const it=p(W*P),ft=p(K*P),ot=r.mul(J,P);if(Y)return{x:Fe,y:re};if(ot!==re)throw new Error("invZ was invalid");return{x:it,y:ft}}),B=zr(U=>{const{a:P,d:W}=i;if(U.is0())throw new Error("bad point: ZERO");const{X:K,Y:J,Z:Y,T:it}=U,ft=p(K*K),ot=p(J*J),F=p(Y*Y),O=p(F*F),$=p(ft*P),V=p(F*p($+ot)),m=p(O+p(W*p(ft*ot)));if(V!==m)throw new Error("bad point: equation left != right (1)");const o=p(K*J),l=p(Y*it);if(o!==l)throw new Error("bad point: equation left != right (2)");return!0});class R{constructor(P,W,K,J){this.X=I("x",P),this.Y=I("y",W),this.Z=I("z",K,!0),this.T=I("t",J),Object.freeze(this)}static CURVE(){return i}static fromAffine(P){if(P instanceof R)throw new Error("extended point not allowed");const{x:W,y:K}=P||{};return I("x",W),I("y",K),new R(W,K,re,p(W*K))}static fromBytes(P,W=!1){const K=r.BYTES,{a:J,d:Y}=i;P=Ni(be(P,K,"point")),Ve(W,"zip215");const it=Ni(P),ft=P[K-1];it[K-1]=ft&-129;const ot=yr(it),F=W?f:r.ORDER;Jn("point.y",ot,Fe,F);const O=p(ot*ot),$=p(O-re),V=p(Y*O-J);let{isValid:m,value:o}=x($,V);if(!m)throw new Error("bad point: invalid y coordinate");const l=(o&re)===re,g=(ft&128)!==0;if(!W&&o===Fe&&g)throw new Error("bad point: x=0 and x_0=1");return g!==l&&(o=p(-o)),R.fromAffine({x:o,y:ot})}static fromHex(P,W=!1){return R.fromBytes(Ft("point",P),W)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,W=!0){return T.createCache(this,P),W||this.multiply(Cn),this}assertValidity(){B(this)}equals(P){M(P);const{X:W,Y:K,Z:J}=this,{X:Y,Y:it,Z:ft}=P,ot=p(W*ft),F=p(Y*J),O=p(K*ft),$=p(it*J);return ot===F&&O===$}is0(){return this.equals(R.ZERO)}negate(){return new R(p(-this.X),this.Y,this.Z,p(-this.T))}double(){const{a:P}=i,{X:W,Y:K,Z:J}=this,Y=p(W*W),it=p(K*K),ft=p(Cn*p(J*J)),ot=p(P*Y),F=W+K,O=p(p(F*F)-Y-it),$=ot+it,V=$-ft,m=ot-it,o=p(O*V),l=p($*m),g=p(O*m),v=p(V*$);return new R(o,l,v,g)}add(P){M(P);const{a:W,d:K}=i,{X:J,Y,Z:it,T:ft}=this,{X:ot,Y:F,Z:O,T:$}=P,V=p(J*ot),m=p(Y*F),o=p(ft*K*$),l=p(it*O),g=p((J+Y)*(ot+F)-V-m),v=l-o,S=l+o,A=p(m-W*V),L=p(g*v),b=p(S*A),c=p(g*A),u=p(v*S);return new R(L,b,u,c)}subtract(P){return this.add(P.negate())}multiply(P){if(!s.isValidNot0(P))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:W,f:K}=T.cached(this,P,J=>$e(R,J));return $e(R,[W,K])[0]}multiplyUnsafe(P,W=R.ZERO){if(!s.isValid(P))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return P===Fe?R.ZERO:this.is0()||P===re?this:T.unsafe(this,P,K=>$e(R,K),W)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}isTorsionFree(){return T.unsafe(this,i.n).is0()}toAffine(P){return k(this,P)}clearCofactor(){return a===re?this:this.multiplyUnsafe(a)}toBytes(){const{x:P,y:W}=this.toAffine(),K=r.toBytes(W);return K[K.length-1]|=P&re?128:0,K}toHex(){return He(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(P){return $e(R,P)}static msm(P,W){return Ks(R,s,P,W)}_setWindowSize(P){this.precompute(P)}toRawBytes(){return this.toBytes()}}R.BASE=new R(i.Gx,i.Gy,re,p(i.Gx*i.Gy)),R.ZERO=new R(Fe,re,re,Fe),R.Fp=r,R.Fn=s;const T=new zs(R,s.BITS);return R.BASE.precompute(8),R}function pa(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');xr(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:a}=n,f=e.randomBytes||ai,p=e.adjustScalarBytes||(F=>F),x=e.domain||((F,O,$)=>{if(Ve($,"phflag"),O.length||$)throw new Error("Contexts/pre-hash are not supported");return F});function I(F){return a.create(yr(F))}function M(F){const O=K.secretKey;F=Ft("private key",F,O);const $=Ft("hashed private key",t(F),2*O),V=p($.slice(0,O)),m=$.slice(O,2*O),o=I(V);return{head:V,prefix:m,scalar:o}}function k(F){const{head:O,prefix:$,scalar:V}=M(F),m=s.multiply(V),o=m.toBytes();return{head:O,prefix:$,scalar:V,point:m,pointBytes:o}}function B(F){return k(F).pointBytes}function R(F=Uint8Array.of(),...O){const $=Ee(...O);return I(t(x($,Ft("context",F),!!r)))}function T(F,O,$={}){F=Ft("message",F),r&&(F=r(F));const{prefix:V,scalar:m,pointBytes:o}=k(O),l=R($.context,V,F),g=s.multiply(l).toBytes(),v=R($.context,g,o,F),S=a.create(l+v*m);if(!a.isValid(S))throw new Error("sign failed: invalid s");const A=Ee(g,a.toBytes(S));return be(A,K.signature,"result")}const U={zip215:!0};function P(F,O,$,V=U){const{context:m,zip215:o}=V,l=K.signature;F=Ft("signature",F,l),O=Ft("message",O),$=Ft("publicKey",$,K.publicKey),o!==void 0&&Ve(o,"zip215"),r&&(O=r(O));const g=l/2,v=F.subarray(0,g),S=yr(F.subarray(g,l));let A,L,b;try{A=n.fromBytes($,o),L=n.fromBytes(v,o),b=s.multiplyUnsafe(S)}catch{return!1}if(!o&&A.isSmallOrder())return!1;const c=R(m,L.toBytes(),A.toBytes(),O);return L.add(A.multiplyUnsafe(c)).subtract(b).clearCofactor().is0()}const W=i.BYTES,K={secretKey:W,publicKey:W,signature:2*W,seed:W};function J(F=f(K.seed)){return be(F,K.seed,"seed")}function Y(F){const O=ot.randomSecretKey(F);return{secretKey:O,publicKey:B(O)}}function it(F){return br(F)&&F.length===a.BYTES}function ft(F,O){try{return!!n.fromBytes(F,O)}catch{return!1}}const ot={getExtendedPublicKey:k,randomSecretKey:J,isValidSecretKey:it,isValidPublicKey:ft,toMontgomery(F){const{y:O}=n.fromBytes(F),$=K.publicKey,V=$===32;if(!V&&$!==57)throw new Error("only defined for 25519 and 448");const m=V?i.div(re+O,re-O):i.div(O-re,O+re);return i.toBytes(m)},toMontgomerySecret(F){const O=K.secretKey;be(F,O);const $=t(F.subarray(0,O));return p($).subarray(0,O)},randomPrivateKey:J,precompute(F=8,O=n.BASE){return O.precompute(F,!1)}};return Object.freeze({keygen:Y,getPublicKey:B,sign:T,verify:P,utils:ot,Point:n,lengths:K})}function ga(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Ge(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function ma(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function ya(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=ga(n),i=da(t,e),a=pa(i,r,s);return ma(n,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wa=BigInt(1),Ki=BigInt(2);BigInt(3);const ba=BigInt(5),va=BigInt(8),hi=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Hs={p:hi,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:va,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function xa(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=hi,f=n*n%i*n%i,p=Ut(f,Ki,i)*f%i,x=Ut(p,wa,i)*n%i,I=Ut(x,ba,i)*x%i,M=Ut(I,t,i)*I%i,k=Ut(M,e,i)*M%i,B=Ut(k,r,i)*k%i,R=Ut(B,s,i)*B%i,T=Ut(R,s,i)*B%i,U=Ut(T,t,i)*I%i;return{pow_p_5_8:Ut(U,Ki,i)*n%i,b2:f}}function Ea(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const $i=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Sa(n,t){const e=hi,r=ee(t*t*t,e),s=ee(r*r*t,e),i=xa(n*s).pow_p_5_8;let a=ee(n*r*i,e);const f=ee(t*a*a,e),p=a,x=ee(a*$i,e),I=f===n,M=f===ee(-n,e),k=f===ee(-n*$i,e);return I&&(a=p),(M||k)&&(a=x),na(a,e)&&(a=ee(-a,e)),{isValid:I||M,value:a}}const Ba=Ge(Hs.p,{isLE:!0}),_a={...Hs,Fp:Ba,hash:Zo,adjustScalarBytes:Ea,uvRatio:Sa},Er=ya(_a);var Or={exports:{}};const Aa={},Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"})),ka=ii(Ia);var Ra=Or.exports,Hi;function Vs(){return Hi||(Hi=1,(function(n){(function(t,e){function r(m,o){if(!m)throw new Error(o||"Assertion failed")}function s(m,o){m.super_=o;var l=function(){};l.prototype=o.prototype,m.prototype=new l,m.prototype.constructor=m}function i(m,o,l){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((o==="le"||o==="be")&&(l=o,o=10),this._init(m||0,o||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=ka.Buffer}catch{}i.isBN=function(o){return o instanceof i?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===i.wordSize&&Array.isArray(o.words)},i.max=function(o,l){return o.cmp(l)>0?o:l},i.min=function(o,l){return o.cmp(l)<0?o:l},i.prototype._init=function(o,l,g){if(typeof o=="number")return this._initNumber(o,l,g);if(typeof o=="object")return this._initArray(o,l,g);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(l===16?this._parseHex(o,v,g):(this._parseBase(o,l,v),g==="le"&&this._initArray(this.toArray(),l,g)))},i.prototype._initNumber=function(o,l,g){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(r(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},i.prototype._initArray=function(o,l,g){if(r(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S,A,L=0;if(g==="be")for(v=o.length-1,S=0;v>=0;v-=3)A=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[S]|=A<<L&67108863,this.words[S+1]=A>>>26-L&67108863,L+=24,L>=26&&(L-=26,S++);else if(g==="le")for(v=0,S=0;v<o.length;v+=3)A=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[S]|=A<<L&67108863,this.words[S+1]=A>>>26-L&67108863,L+=24,L>=26&&(L-=26,S++);return this._strip()};function f(m,o){var l=m.charCodeAt(o);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+m)}function p(m,o,l){var g=f(m,l);return l-1>=o&&(g|=f(m,l-1)<<4),g}i.prototype._parseHex=function(o,l,g){this.length=Math.ceil((o.length-l)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var S=0,A=0,L;if(g==="be")for(v=o.length-1;v>=l;v-=2)L=p(o,l,v)<<S,this.words[A]|=L&67108863,S>=18?(S-=18,A+=1,this.words[A]|=L>>>26):S+=8;else{var b=o.length-l;for(v=b%2===0?l+1:l;v<o.length;v+=2)L=p(o,l,v)<<S,this.words[A]|=L&67108863,S>=18?(S-=18,A+=1,this.words[A]|=L>>>26):S+=8}this._strip()};function x(m,o,l,g){for(var v=0,S=0,A=Math.min(m.length,l),L=o;L<A;L++){var b=m.charCodeAt(L)-48;v*=g,b>=49?S=b-49+10:b>=17?S=b-17+10:S=b,r(b>=0&&S<g,"Invalid character"),v+=S}return v}i.prototype._parseBase=function(o,l,g){this.words=[0],this.length=1;for(var v=0,S=1;S<=67108863;S*=l)v++;v--,S=S/l|0;for(var A=o.length-g,L=A%v,b=Math.min(A,A-L)+g,c=0,u=g;u<b;u+=v)c=x(o,u,u+v,l),this.imuln(S),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(L!==0){var w=1;for(c=x(o,u,o.length,l),u=0;u<L;u++)w*=l;this.imuln(w),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},i.prototype.copy=function(o){o.words=new Array(this.length);for(var l=0;l<this.length;l++)o.words[l]=this.words[l];o.length=this.length,o.negative=this.negative,o.red=this.red};function I(m,o){m.words=o.words,m.length=o.length,m.negative=o.negative,m.red=o.red}if(i.prototype._move=function(o){I(o,this)},i.prototype.clone=function(){var o=new i(null);return this.copy(o),o},i.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=M}catch{i.prototype.inspect=M}else i.prototype.inspect=M;function M(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],B=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],R=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(o,l){o=o||10,l=l|0||1;var g;if(o===16||o==="hex"){g="";for(var v=0,S=0,A=0;A<this.length;A++){var L=this.words[A],b=((L<<v|S)&16777215).toString(16);S=L>>>24-v&16777215,v+=2,v>=26&&(v-=26,A--),S!==0||A!==this.length-1?g=k[6-b.length]+b+g:g=b+g}for(S!==0&&(g=S.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(o===(o|0)&&o>=2&&o<=36){var c=B[o],u=R[o];g="";var w=this.clone();for(w.negative=0;!w.isZero();){var _=w.modrn(u).toString(o);w=w.idivn(u),w.isZero()?g=_+g:g=k[c-_.length]+_+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},i.prototype.toJSON=function(){return this.toString(16,2)},a&&(i.prototype.toBuffer=function(o,l){return this.toArrayLike(a,o,l)}),i.prototype.toArray=function(o,l){return this.toArrayLike(Array,o,l)};var T=function(o,l){return o.allocUnsafe?o.allocUnsafe(l):new o(l)};i.prototype.toArrayLike=function(o,l,g){this._strip();var v=this.byteLength(),S=g||Math.max(1,v);r(v<=S,"byte array longer than desired length"),r(S>0,"Requested array length <= 0");var A=T(o,S),L=l==="le"?"LE":"BE";return this["_toArrayLike"+L](A,v),A},i.prototype._toArrayLikeLE=function(o,l){for(var g=0,v=0,S=0,A=0;S<this.length;S++){var L=this.words[S]<<A|v;o[g++]=L&255,g<o.length&&(o[g++]=L>>8&255),g<o.length&&(o[g++]=L>>16&255),A===6?(g<o.length&&(o[g++]=L>>24&255),v=0,A=0):(v=L>>>24,A+=2)}if(g<o.length)for(o[g++]=v;g<o.length;)o[g++]=0},i.prototype._toArrayLikeBE=function(o,l){for(var g=o.length-1,v=0,S=0,A=0;S<this.length;S++){var L=this.words[S]<<A|v;o[g--]=L&255,g>=0&&(o[g--]=L>>8&255),g>=0&&(o[g--]=L>>16&255),A===6?(g>=0&&(o[g--]=L>>24&255),v=0,A=0):(v=L>>>24,A+=2)}if(g>=0)for(o[g--]=v;g>=0;)o[g--]=0},Math.clz32?i.prototype._countBits=function(o){return 32-Math.clz32(o)}:i.prototype._countBits=function(o){var l=o,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},i.prototype._zeroBits=function(o){if(o===0)return 26;var l=o,g=0;return(l&8191)===0&&(g+=13,l>>>=13),(l&127)===0&&(g+=7,l>>>=7),(l&15)===0&&(g+=4,l>>>=4),(l&3)===0&&(g+=2,l>>>=2),(l&1)===0&&g++,g},i.prototype.bitLength=function(){var o=this.words[this.length-1],l=this._countBits(o);return(this.length-1)*26+l};function U(m){for(var o=new Array(m.bitLength()),l=0;l<o.length;l++){var g=l/26|0,v=l%26;o[l]=m.words[g]>>>v&1}return o}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(o+=g,g!==26)break}return o},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},i.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var l=0;l<o.length;l++)this.words[l]=this.words[l]|o.words[l];return this._strip()},i.prototype.ior=function(o){return r((this.negative|o.negative)===0),this.iuor(o)},i.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},i.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},i.prototype.iuand=function(o){var l;this.length>o.length?l=o:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&o.words[g];return this.length=l.length,this._strip()},i.prototype.iand=function(o){return r((this.negative|o.negative)===0),this.iuand(o)},i.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},i.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},i.prototype.iuxor=function(o){var l,g;this.length>o.length?(l=this,g=o):(l=o,g=this);for(var v=0;v<g.length;v++)this.words[v]=l.words[v]^g.words[v];if(this!==l)for(;v<l.length;v++)this.words[v]=l.words[v];return this.length=l.length,this._strip()},i.prototype.ixor=function(o){return r((this.negative|o.negative)===0),this.iuxor(o)},i.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},i.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},i.prototype.inotn=function(o){r(typeof o=="number"&&o>=0);var l=Math.ceil(o/26)|0,g=o%26;this._expand(l),g>0&&l--;for(var v=0;v<l;v++)this.words[v]=~this.words[v]&67108863;return g>0&&(this.words[v]=~this.words[v]&67108863>>26-g),this._strip()},i.prototype.notn=function(o){return this.clone().inotn(o)},i.prototype.setn=function(o,l){r(typeof o=="number"&&o>=0);var g=o/26|0,v=o%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<v:this.words[g]=this.words[g]&~(1<<v),this._strip()},i.prototype.iadd=function(o){var l;if(this.negative!==0&&o.negative===0)return this.negative=0,l=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,l=this.isub(o),o.negative=1,l._normSign();var g,v;this.length>o.length?(g=this,v=o):(g=o,v=this);for(var S=0,A=0;A<v.length;A++)l=(g.words[A]|0)+(v.words[A]|0)+S,this.words[A]=l&67108863,S=l>>>26;for(;S!==0&&A<g.length;A++)l=(g.words[A]|0)+S,this.words[A]=l&67108863,S=l>>>26;if(this.length=g.length,S!==0)this.words[this.length]=S,this.length++;else if(g!==this)for(;A<g.length;A++)this.words[A]=g.words[A];return this},i.prototype.add=function(o){var l;return o.negative!==0&&this.negative===0?(o.negative=0,l=this.sub(o),o.negative^=1,l):o.negative===0&&this.negative!==0?(this.negative=0,l=o.sub(this),this.negative=1,l):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},i.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var l=this.iadd(o);return o.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var g=this.cmp(o);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,S;g>0?(v=this,S=o):(v=o,S=this);for(var A=0,L=0;L<S.length;L++)l=(v.words[L]|0)-(S.words[L]|0)+A,A=l>>26,this.words[L]=l&67108863;for(;A!==0&&L<v.length;L++)l=(v.words[L]|0)+A,A=l>>26,this.words[L]=l&67108863;if(A===0&&L<v.length&&v!==this)for(;L<v.length;L++)this.words[L]=v.words[L];return this.length=Math.max(this.length,L),v!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(o){return this.clone().isub(o)};function P(m,o,l){l.negative=o.negative^m.negative;var g=m.length+o.length|0;l.length=g,g=g-1|0;var v=m.words[0]|0,S=o.words[0]|0,A=v*S,L=A&67108863,b=A/67108864|0;l.words[0]=L;for(var c=1;c<g;c++){for(var u=b>>>26,w=b&67108863,_=Math.min(c,o.length-1),q=Math.max(0,c-m.length+1);q<=_;q++){var G=c-q|0;v=m.words[G]|0,S=o.words[q]|0,A=v*S+w,u+=A/67108864|0,w=A&67108863}l.words[c]=w|0,b=u|0}return b!==0?l.words[c]=b|0:l.length--,l._strip()}var W=function(o,l,g){var v=o.words,S=l.words,A=g.words,L=0,b,c,u,w=v[0]|0,_=w&8191,q=w>>>13,G=v[1]|0,tt=G&8191,nt=G>>>13,yt=v[2]|0,wt=yt&8191,vt=yt>>>13,pe=v[3]|0,xt=pe&8191,Mt=pe>>>13,Ar=v[4]|0,_t=Ar&8191,Tt=Ar>>>13,Ir=v[5]|0,It=Ir&8191,St=Ir>>>13,de=v[6]|0,At=de&8191,Ct=de>>>13,we=v[7]|0,Lt=we&8191,y=we>>>13,h=v[8]|0,d=h&8191,E=h>>>13,N=v[9]|0,D=N&8191,j=N>>>13,dt=S[0]|0,lt=dt&8191,ht=dt>>>13,Bt=S[1]|0,ct=Bt&8191,Ot=Bt>>>13,xi=S[2]|0,qt=xi&8191,Pt=xi>>>13,Ei=S[3]|0,Dt=Ei&8191,zt=Ei>>>13,Si=S[4]|0,Kt=Si&8191,$t=Si>>>13,Bi=S[5]|0,Ht=Bi&8191,Vt=Bi>>>13,_i=S[6]|0,jt=_i&8191,Gt=_i>>>13,Ai=S[7]|0,Wt=Ai&8191,Zt=Ai>>>13,Ii=S[8]|0,Yt=Ii&8191,Xt=Ii>>>13,ki=S[9]|0,Jt=ki&8191,Qt=ki>>>13;g.negative=o.negative^l.negative,g.length=19,b=Math.imul(_,lt),c=Math.imul(_,ht),c=c+Math.imul(q,lt)|0,u=Math.imul(q,ht);var an=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(an>>>26)|0,an&=67108863,b=Math.imul(tt,lt),c=Math.imul(tt,ht),c=c+Math.imul(nt,lt)|0,u=Math.imul(nt,ht),b=b+Math.imul(_,ct)|0,c=c+Math.imul(_,Ot)|0,c=c+Math.imul(q,ct)|0,u=u+Math.imul(q,Ot)|0;var cn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(cn>>>26)|0,cn&=67108863,b=Math.imul(wt,lt),c=Math.imul(wt,ht),c=c+Math.imul(vt,lt)|0,u=Math.imul(vt,ht),b=b+Math.imul(tt,ct)|0,c=c+Math.imul(tt,Ot)|0,c=c+Math.imul(nt,ct)|0,u=u+Math.imul(nt,Ot)|0,b=b+Math.imul(_,qt)|0,c=c+Math.imul(_,Pt)|0,c=c+Math.imul(q,qt)|0,u=u+Math.imul(q,Pt)|0;var un=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(un>>>26)|0,un&=67108863,b=Math.imul(xt,lt),c=Math.imul(xt,ht),c=c+Math.imul(Mt,lt)|0,u=Math.imul(Mt,ht),b=b+Math.imul(wt,ct)|0,c=c+Math.imul(wt,Ot)|0,c=c+Math.imul(vt,ct)|0,u=u+Math.imul(vt,Ot)|0,b=b+Math.imul(tt,qt)|0,c=c+Math.imul(tt,Pt)|0,c=c+Math.imul(nt,qt)|0,u=u+Math.imul(nt,Pt)|0,b=b+Math.imul(_,Dt)|0,c=c+Math.imul(_,zt)|0,c=c+Math.imul(q,Dt)|0,u=u+Math.imul(q,zt)|0;var fn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(fn>>>26)|0,fn&=67108863,b=Math.imul(_t,lt),c=Math.imul(_t,ht),c=c+Math.imul(Tt,lt)|0,u=Math.imul(Tt,ht),b=b+Math.imul(xt,ct)|0,c=c+Math.imul(xt,Ot)|0,c=c+Math.imul(Mt,ct)|0,u=u+Math.imul(Mt,Ot)|0,b=b+Math.imul(wt,qt)|0,c=c+Math.imul(wt,Pt)|0,c=c+Math.imul(vt,qt)|0,u=u+Math.imul(vt,Pt)|0,b=b+Math.imul(tt,Dt)|0,c=c+Math.imul(tt,zt)|0,c=c+Math.imul(nt,Dt)|0,u=u+Math.imul(nt,zt)|0,b=b+Math.imul(_,Kt)|0,c=c+Math.imul(_,$t)|0,c=c+Math.imul(q,Kt)|0,u=u+Math.imul(q,$t)|0;var hn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(hn>>>26)|0,hn&=67108863,b=Math.imul(It,lt),c=Math.imul(It,ht),c=c+Math.imul(St,lt)|0,u=Math.imul(St,ht),b=b+Math.imul(_t,ct)|0,c=c+Math.imul(_t,Ot)|0,c=c+Math.imul(Tt,ct)|0,u=u+Math.imul(Tt,Ot)|0,b=b+Math.imul(xt,qt)|0,c=c+Math.imul(xt,Pt)|0,c=c+Math.imul(Mt,qt)|0,u=u+Math.imul(Mt,Pt)|0,b=b+Math.imul(wt,Dt)|0,c=c+Math.imul(wt,zt)|0,c=c+Math.imul(vt,Dt)|0,u=u+Math.imul(vt,zt)|0,b=b+Math.imul(tt,Kt)|0,c=c+Math.imul(tt,$t)|0,c=c+Math.imul(nt,Kt)|0,u=u+Math.imul(nt,$t)|0,b=b+Math.imul(_,Ht)|0,c=c+Math.imul(_,Vt)|0,c=c+Math.imul(q,Ht)|0,u=u+Math.imul(q,Vt)|0;var ln=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(ln>>>26)|0,ln&=67108863,b=Math.imul(At,lt),c=Math.imul(At,ht),c=c+Math.imul(Ct,lt)|0,u=Math.imul(Ct,ht),b=b+Math.imul(It,ct)|0,c=c+Math.imul(It,Ot)|0,c=c+Math.imul(St,ct)|0,u=u+Math.imul(St,Ot)|0,b=b+Math.imul(_t,qt)|0,c=c+Math.imul(_t,Pt)|0,c=c+Math.imul(Tt,qt)|0,u=u+Math.imul(Tt,Pt)|0,b=b+Math.imul(xt,Dt)|0,c=c+Math.imul(xt,zt)|0,c=c+Math.imul(Mt,Dt)|0,u=u+Math.imul(Mt,zt)|0,b=b+Math.imul(wt,Kt)|0,c=c+Math.imul(wt,$t)|0,c=c+Math.imul(vt,Kt)|0,u=u+Math.imul(vt,$t)|0,b=b+Math.imul(tt,Ht)|0,c=c+Math.imul(tt,Vt)|0,c=c+Math.imul(nt,Ht)|0,u=u+Math.imul(nt,Vt)|0,b=b+Math.imul(_,jt)|0,c=c+Math.imul(_,Gt)|0,c=c+Math.imul(q,jt)|0,u=u+Math.imul(q,Gt)|0;var dn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(dn>>>26)|0,dn&=67108863,b=Math.imul(Lt,lt),c=Math.imul(Lt,ht),c=c+Math.imul(y,lt)|0,u=Math.imul(y,ht),b=b+Math.imul(At,ct)|0,c=c+Math.imul(At,Ot)|0,c=c+Math.imul(Ct,ct)|0,u=u+Math.imul(Ct,Ot)|0,b=b+Math.imul(It,qt)|0,c=c+Math.imul(It,Pt)|0,c=c+Math.imul(St,qt)|0,u=u+Math.imul(St,Pt)|0,b=b+Math.imul(_t,Dt)|0,c=c+Math.imul(_t,zt)|0,c=c+Math.imul(Tt,Dt)|0,u=u+Math.imul(Tt,zt)|0,b=b+Math.imul(xt,Kt)|0,c=c+Math.imul(xt,$t)|0,c=c+Math.imul(Mt,Kt)|0,u=u+Math.imul(Mt,$t)|0,b=b+Math.imul(wt,Ht)|0,c=c+Math.imul(wt,Vt)|0,c=c+Math.imul(vt,Ht)|0,u=u+Math.imul(vt,Vt)|0,b=b+Math.imul(tt,jt)|0,c=c+Math.imul(tt,Gt)|0,c=c+Math.imul(nt,jt)|0,u=u+Math.imul(nt,Gt)|0,b=b+Math.imul(_,Wt)|0,c=c+Math.imul(_,Zt)|0,c=c+Math.imul(q,Wt)|0,u=u+Math.imul(q,Zt)|0;var pn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(pn>>>26)|0,pn&=67108863,b=Math.imul(d,lt),c=Math.imul(d,ht),c=c+Math.imul(E,lt)|0,u=Math.imul(E,ht),b=b+Math.imul(Lt,ct)|0,c=c+Math.imul(Lt,Ot)|0,c=c+Math.imul(y,ct)|0,u=u+Math.imul(y,Ot)|0,b=b+Math.imul(At,qt)|0,c=c+Math.imul(At,Pt)|0,c=c+Math.imul(Ct,qt)|0,u=u+Math.imul(Ct,Pt)|0,b=b+Math.imul(It,Dt)|0,c=c+Math.imul(It,zt)|0,c=c+Math.imul(St,Dt)|0,u=u+Math.imul(St,zt)|0,b=b+Math.imul(_t,Kt)|0,c=c+Math.imul(_t,$t)|0,c=c+Math.imul(Tt,Kt)|0,u=u+Math.imul(Tt,$t)|0,b=b+Math.imul(xt,Ht)|0,c=c+Math.imul(xt,Vt)|0,c=c+Math.imul(Mt,Ht)|0,u=u+Math.imul(Mt,Vt)|0,b=b+Math.imul(wt,jt)|0,c=c+Math.imul(wt,Gt)|0,c=c+Math.imul(vt,jt)|0,u=u+Math.imul(vt,Gt)|0,b=b+Math.imul(tt,Wt)|0,c=c+Math.imul(tt,Zt)|0,c=c+Math.imul(nt,Wt)|0,u=u+Math.imul(nt,Zt)|0,b=b+Math.imul(_,Yt)|0,c=c+Math.imul(_,Xt)|0,c=c+Math.imul(q,Yt)|0,u=u+Math.imul(q,Xt)|0;var gn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(gn>>>26)|0,gn&=67108863,b=Math.imul(D,lt),c=Math.imul(D,ht),c=c+Math.imul(j,lt)|0,u=Math.imul(j,ht),b=b+Math.imul(d,ct)|0,c=c+Math.imul(d,Ot)|0,c=c+Math.imul(E,ct)|0,u=u+Math.imul(E,Ot)|0,b=b+Math.imul(Lt,qt)|0,c=c+Math.imul(Lt,Pt)|0,c=c+Math.imul(y,qt)|0,u=u+Math.imul(y,Pt)|0,b=b+Math.imul(At,Dt)|0,c=c+Math.imul(At,zt)|0,c=c+Math.imul(Ct,Dt)|0,u=u+Math.imul(Ct,zt)|0,b=b+Math.imul(It,Kt)|0,c=c+Math.imul(It,$t)|0,c=c+Math.imul(St,Kt)|0,u=u+Math.imul(St,$t)|0,b=b+Math.imul(_t,Ht)|0,c=c+Math.imul(_t,Vt)|0,c=c+Math.imul(Tt,Ht)|0,u=u+Math.imul(Tt,Vt)|0,b=b+Math.imul(xt,jt)|0,c=c+Math.imul(xt,Gt)|0,c=c+Math.imul(Mt,jt)|0,u=u+Math.imul(Mt,Gt)|0,b=b+Math.imul(wt,Wt)|0,c=c+Math.imul(wt,Zt)|0,c=c+Math.imul(vt,Wt)|0,u=u+Math.imul(vt,Zt)|0,b=b+Math.imul(tt,Yt)|0,c=c+Math.imul(tt,Xt)|0,c=c+Math.imul(nt,Yt)|0,u=u+Math.imul(nt,Xt)|0,b=b+Math.imul(_,Jt)|0,c=c+Math.imul(_,Qt)|0,c=c+Math.imul(q,Jt)|0,u=u+Math.imul(q,Qt)|0;var mn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(mn>>>26)|0,mn&=67108863,b=Math.imul(D,ct),c=Math.imul(D,Ot),c=c+Math.imul(j,ct)|0,u=Math.imul(j,Ot),b=b+Math.imul(d,qt)|0,c=c+Math.imul(d,Pt)|0,c=c+Math.imul(E,qt)|0,u=u+Math.imul(E,Pt)|0,b=b+Math.imul(Lt,Dt)|0,c=c+Math.imul(Lt,zt)|0,c=c+Math.imul(y,Dt)|0,u=u+Math.imul(y,zt)|0,b=b+Math.imul(At,Kt)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(Ct,Kt)|0,u=u+Math.imul(Ct,$t)|0,b=b+Math.imul(It,Ht)|0,c=c+Math.imul(It,Vt)|0,c=c+Math.imul(St,Ht)|0,u=u+Math.imul(St,Vt)|0,b=b+Math.imul(_t,jt)|0,c=c+Math.imul(_t,Gt)|0,c=c+Math.imul(Tt,jt)|0,u=u+Math.imul(Tt,Gt)|0,b=b+Math.imul(xt,Wt)|0,c=c+Math.imul(xt,Zt)|0,c=c+Math.imul(Mt,Wt)|0,u=u+Math.imul(Mt,Zt)|0,b=b+Math.imul(wt,Yt)|0,c=c+Math.imul(wt,Xt)|0,c=c+Math.imul(vt,Yt)|0,u=u+Math.imul(vt,Xt)|0,b=b+Math.imul(tt,Jt)|0,c=c+Math.imul(tt,Qt)|0,c=c+Math.imul(nt,Jt)|0,u=u+Math.imul(nt,Qt)|0;var yn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(yn>>>26)|0,yn&=67108863,b=Math.imul(D,qt),c=Math.imul(D,Pt),c=c+Math.imul(j,qt)|0,u=Math.imul(j,Pt),b=b+Math.imul(d,Dt)|0,c=c+Math.imul(d,zt)|0,c=c+Math.imul(E,Dt)|0,u=u+Math.imul(E,zt)|0,b=b+Math.imul(Lt,Kt)|0,c=c+Math.imul(Lt,$t)|0,c=c+Math.imul(y,Kt)|0,u=u+Math.imul(y,$t)|0,b=b+Math.imul(At,Ht)|0,c=c+Math.imul(At,Vt)|0,c=c+Math.imul(Ct,Ht)|0,u=u+Math.imul(Ct,Vt)|0,b=b+Math.imul(It,jt)|0,c=c+Math.imul(It,Gt)|0,c=c+Math.imul(St,jt)|0,u=u+Math.imul(St,Gt)|0,b=b+Math.imul(_t,Wt)|0,c=c+Math.imul(_t,Zt)|0,c=c+Math.imul(Tt,Wt)|0,u=u+Math.imul(Tt,Zt)|0,b=b+Math.imul(xt,Yt)|0,c=c+Math.imul(xt,Xt)|0,c=c+Math.imul(Mt,Yt)|0,u=u+Math.imul(Mt,Xt)|0,b=b+Math.imul(wt,Jt)|0,c=c+Math.imul(wt,Qt)|0,c=c+Math.imul(vt,Jt)|0,u=u+Math.imul(vt,Qt)|0;var wn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(wn>>>26)|0,wn&=67108863,b=Math.imul(D,Dt),c=Math.imul(D,zt),c=c+Math.imul(j,Dt)|0,u=Math.imul(j,zt),b=b+Math.imul(d,Kt)|0,c=c+Math.imul(d,$t)|0,c=c+Math.imul(E,Kt)|0,u=u+Math.imul(E,$t)|0,b=b+Math.imul(Lt,Ht)|0,c=c+Math.imul(Lt,Vt)|0,c=c+Math.imul(y,Ht)|0,u=u+Math.imul(y,Vt)|0,b=b+Math.imul(At,jt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(Ct,jt)|0,u=u+Math.imul(Ct,Gt)|0,b=b+Math.imul(It,Wt)|0,c=c+Math.imul(It,Zt)|0,c=c+Math.imul(St,Wt)|0,u=u+Math.imul(St,Zt)|0,b=b+Math.imul(_t,Yt)|0,c=c+Math.imul(_t,Xt)|0,c=c+Math.imul(Tt,Yt)|0,u=u+Math.imul(Tt,Xt)|0,b=b+Math.imul(xt,Jt)|0,c=c+Math.imul(xt,Qt)|0,c=c+Math.imul(Mt,Jt)|0,u=u+Math.imul(Mt,Qt)|0;var bn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(bn>>>26)|0,bn&=67108863,b=Math.imul(D,Kt),c=Math.imul(D,$t),c=c+Math.imul(j,Kt)|0,u=Math.imul(j,$t),b=b+Math.imul(d,Ht)|0,c=c+Math.imul(d,Vt)|0,c=c+Math.imul(E,Ht)|0,u=u+Math.imul(E,Vt)|0,b=b+Math.imul(Lt,jt)|0,c=c+Math.imul(Lt,Gt)|0,c=c+Math.imul(y,jt)|0,u=u+Math.imul(y,Gt)|0,b=b+Math.imul(At,Wt)|0,c=c+Math.imul(At,Zt)|0,c=c+Math.imul(Ct,Wt)|0,u=u+Math.imul(Ct,Zt)|0,b=b+Math.imul(It,Yt)|0,c=c+Math.imul(It,Xt)|0,c=c+Math.imul(St,Yt)|0,u=u+Math.imul(St,Xt)|0,b=b+Math.imul(_t,Jt)|0,c=c+Math.imul(_t,Qt)|0,c=c+Math.imul(Tt,Jt)|0,u=u+Math.imul(Tt,Qt)|0;var vn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(vn>>>26)|0,vn&=67108863,b=Math.imul(D,Ht),c=Math.imul(D,Vt),c=c+Math.imul(j,Ht)|0,u=Math.imul(j,Vt),b=b+Math.imul(d,jt)|0,c=c+Math.imul(d,Gt)|0,c=c+Math.imul(E,jt)|0,u=u+Math.imul(E,Gt)|0,b=b+Math.imul(Lt,Wt)|0,c=c+Math.imul(Lt,Zt)|0,c=c+Math.imul(y,Wt)|0,u=u+Math.imul(y,Zt)|0,b=b+Math.imul(At,Yt)|0,c=c+Math.imul(At,Xt)|0,c=c+Math.imul(Ct,Yt)|0,u=u+Math.imul(Ct,Xt)|0,b=b+Math.imul(It,Jt)|0,c=c+Math.imul(It,Qt)|0,c=c+Math.imul(St,Jt)|0,u=u+Math.imul(St,Qt)|0;var xn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(xn>>>26)|0,xn&=67108863,b=Math.imul(D,jt),c=Math.imul(D,Gt),c=c+Math.imul(j,jt)|0,u=Math.imul(j,Gt),b=b+Math.imul(d,Wt)|0,c=c+Math.imul(d,Zt)|0,c=c+Math.imul(E,Wt)|0,u=u+Math.imul(E,Zt)|0,b=b+Math.imul(Lt,Yt)|0,c=c+Math.imul(Lt,Xt)|0,c=c+Math.imul(y,Yt)|0,u=u+Math.imul(y,Xt)|0,b=b+Math.imul(At,Jt)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(Ct,Jt)|0,u=u+Math.imul(Ct,Qt)|0;var En=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(En>>>26)|0,En&=67108863,b=Math.imul(D,Wt),c=Math.imul(D,Zt),c=c+Math.imul(j,Wt)|0,u=Math.imul(j,Zt),b=b+Math.imul(d,Yt)|0,c=c+Math.imul(d,Xt)|0,c=c+Math.imul(E,Yt)|0,u=u+Math.imul(E,Xt)|0,b=b+Math.imul(Lt,Jt)|0,c=c+Math.imul(Lt,Qt)|0,c=c+Math.imul(y,Jt)|0,u=u+Math.imul(y,Qt)|0;var Sn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,b=Math.imul(D,Yt),c=Math.imul(D,Xt),c=c+Math.imul(j,Yt)|0,u=Math.imul(j,Xt),b=b+Math.imul(d,Jt)|0,c=c+Math.imul(d,Qt)|0,c=c+Math.imul(E,Jt)|0,u=u+Math.imul(E,Qt)|0;var Bn=(L+b|0)+((c&8191)<<13)|0;L=(u+(c>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,b=Math.imul(D,Jt),c=Math.imul(D,Qt),c=c+Math.imul(j,Jt)|0,u=Math.imul(j,Qt);var _n=(L+b|0)+((c&8191)<<13)|0;return L=(u+(c>>>13)|0)+(_n>>>26)|0,_n&=67108863,A[0]=an,A[1]=cn,A[2]=un,A[3]=fn,A[4]=hn,A[5]=ln,A[6]=dn,A[7]=pn,A[8]=gn,A[9]=mn,A[10]=yn,A[11]=wn,A[12]=bn,A[13]=vn,A[14]=xn,A[15]=En,A[16]=Sn,A[17]=Bn,A[18]=_n,L!==0&&(A[19]=L,g.length++),g};Math.imul||(W=P);function K(m,o,l){l.negative=o.negative^m.negative,l.length=m.length+o.length;for(var g=0,v=0,S=0;S<l.length-1;S++){var A=v;v=0;for(var L=g&67108863,b=Math.min(S,o.length-1),c=Math.max(0,S-m.length+1);c<=b;c++){var u=S-c,w=m.words[u]|0,_=o.words[c]|0,q=w*_,G=q&67108863;A=A+(q/67108864|0)|0,G=G+L|0,L=G&67108863,A=A+(G>>>26)|0,v+=A>>>26,A&=67108863}l.words[S]=L,g=A,A=v}return g!==0?l.words[S]=g:l.length--,l._strip()}function J(m,o,l){return K(m,o,l)}i.prototype.mulTo=function(o,l){var g,v=this.length+o.length;return this.length===10&&o.length===10?g=W(this,o,l):v<63?g=P(this,o,l):v<1024?g=K(this,o,l):g=J(this,o,l),g},i.prototype.mul=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),this.mulTo(o,l)},i.prototype.mulf=function(o){var l=new i(null);return l.words=new Array(this.length+o.length),J(this,o,l)},i.prototype.imul=function(o){return this.clone().mulTo(o,this)},i.prototype.imuln=function(o){var l=o<0;l&&(o=-o),r(typeof o=="number"),r(o<67108864);for(var g=0,v=0;v<this.length;v++){var S=(this.words[v]|0)*o,A=(S&67108863)+(g&67108863);g>>=26,g+=S/67108864|0,g+=A>>>26,this.words[v]=A&67108863}return g!==0&&(this.words[v]=g,this.length++),this.length=o===0?1:this.length,l?this.ineg():this},i.prototype.muln=function(o){return this.clone().imuln(o)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(o){var l=U(o);if(l.length===0)return new i(1);for(var g=this,v=0;v<l.length&&l[v]===0;v++,g=g.sqr());if(++v<l.length)for(var S=g.sqr();v<l.length;v++,S=S.sqr())l[v]!==0&&(g=g.mul(S));return g},i.prototype.iushln=function(o){r(typeof o=="number"&&o>=0);var l=o%26,g=(o-l)/26,v=67108863>>>26-l<<26-l,S;if(l!==0){var A=0;for(S=0;S<this.length;S++){var L=this.words[S]&v,b=(this.words[S]|0)-L<<l;this.words[S]=b|A,A=L>>>26-l}A&&(this.words[S]=A,this.length++)}if(g!==0){for(S=this.length-1;S>=0;S--)this.words[S+g]=this.words[S];for(S=0;S<g;S++)this.words[S]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(o){return r(this.negative===0),this.iushln(o)},i.prototype.iushrn=function(o,l,g){r(typeof o=="number"&&o>=0);var v;l?v=(l-l%26)/26:v=0;var S=o%26,A=Math.min((o-S)/26,this.length),L=67108863^67108863>>>S<<S,b=g;if(v-=A,v=Math.max(0,v),b){for(var c=0;c<A;c++)b.words[c]=this.words[c];b.length=A}if(A!==0)if(this.length>A)for(this.length-=A,c=0;c<this.length;c++)this.words[c]=this.words[c+A];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(u!==0||c>=v);c--){var w=this.words[c]|0;this.words[c]=u<<26-S|w>>>S,u=w&L}return b&&u!==0&&(b.words[b.length++]=u),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(o,l,g){return r(this.negative===0),this.iushrn(o,l,g)},i.prototype.shln=function(o){return this.clone().ishln(o)},i.prototype.ushln=function(o){return this.clone().iushln(o)},i.prototype.shrn=function(o){return this.clone().ishrn(o)},i.prototype.ushrn=function(o){return this.clone().iushrn(o)},i.prototype.testn=function(o){r(typeof o=="number"&&o>=0);var l=o%26,g=(o-l)/26,v=1<<l;if(this.length<=g)return!1;var S=this.words[g];return!!(S&v)},i.prototype.imaskn=function(o){r(typeof o=="number"&&o>=0);var l=o%26,g=(o-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var v=67108863^67108863>>>l<<l;this.words[this.length-1]&=v}return this._strip()},i.prototype.maskn=function(o){return this.clone().imaskn(o)},i.prototype.iaddn=function(o){return r(typeof o=="number"),r(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},i.prototype._iaddn=function(o){this.words[0]+=o;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(o){if(r(typeof o=="number"),r(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(o){return this.clone().iaddn(o)},i.prototype.subn=function(o){return this.clone().isubn(o)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(o,l,g){var v=o.length+g,S;this._expand(v);var A,L=0;for(S=0;S<o.length;S++){A=(this.words[S+g]|0)+L;var b=(o.words[S]|0)*l;A-=b&67108863,L=(A>>26)-(b/67108864|0),this.words[S+g]=A&67108863}for(;S<this.length-g;S++)A=(this.words[S+g]|0)+L,L=A>>26,this.words[S+g]=A&67108863;if(L===0)return this._strip();for(r(L===-1),L=0,S=0;S<this.length;S++)A=-(this.words[S]|0)+L,L=A>>26,this.words[S]=A&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(o,l){var g=this.length-o.length,v=this.clone(),S=o,A=S.words[S.length-1]|0,L=this._countBits(A);g=26-L,g!==0&&(S=S.ushln(g),v.iushln(g),A=S.words[S.length-1]|0);var b=v.length-S.length,c;if(l!=="mod"){c=new i(null),c.length=b+1,c.words=new Array(c.length);for(var u=0;u<c.length;u++)c.words[u]=0}var w=v.clone()._ishlnsubmul(S,1,b);w.negative===0&&(v=w,c&&(c.words[b]=1));for(var _=b-1;_>=0;_--){var q=(v.words[S.length+_]|0)*67108864+(v.words[S.length+_-1]|0);for(q=Math.min(q/A|0,67108863),v._ishlnsubmul(S,q,_);v.negative!==0;)q--,v.negative=0,v._ishlnsubmul(S,1,_),v.isZero()||(v.negative^=1);c&&(c.words[_]=q)}return c&&c._strip(),v._strip(),l!=="div"&&g!==0&&v.iushrn(g),{div:c||null,mod:v}},i.prototype.divmod=function(o,l,g){if(r(!o.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var v,S,A;return this.negative!==0&&o.negative===0?(A=this.neg().divmod(o,l),l!=="mod"&&(v=A.div.neg()),l!=="div"&&(S=A.mod.neg(),g&&S.negative!==0&&S.iadd(o)),{div:v,mod:S}):this.negative===0&&o.negative!==0?(A=this.divmod(o.neg(),l),l!=="mod"&&(v=A.div.neg()),{div:v,mod:A.mod}):(this.negative&o.negative)!==0?(A=this.neg().divmod(o.neg(),l),l!=="div"&&(S=A.mod.neg(),g&&S.negative!==0&&S.isub(o)),{div:A.div,mod:S}):o.length>this.length||this.cmp(o)<0?{div:new i(0),mod:this}:o.length===1?l==="div"?{div:this.divn(o.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new i(this.modrn(o.words[0]))}:this._wordDiv(o,l)},i.prototype.div=function(o){return this.divmod(o,"div",!1).div},i.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},i.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},i.prototype.divRound=function(o){var l=this.divmod(o);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(o):l.mod,v=o.ushrn(1),S=o.andln(1),A=g.cmp(v);return A<0||S===1&&A===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(o){var l=o<0;l&&(o=-o),r(o<=67108863);for(var g=(1<<26)%o,v=0,S=this.length-1;S>=0;S--)v=(g*v+(this.words[S]|0))%o;return l?-v:v},i.prototype.modn=function(o){return this.modrn(o)},i.prototype.idivn=function(o){var l=o<0;l&&(o=-o),r(o<=67108863);for(var g=0,v=this.length-1;v>=0;v--){var S=(this.words[v]|0)+g*67108864;this.words[v]=S/o|0,g=S%o}return this._strip(),l?this.ineg():this},i.prototype.divn=function(o){return this.clone().idivn(o)},i.prototype.egcd=function(o){r(o.negative===0),r(!o.isZero());var l=this,g=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var v=new i(1),S=new i(0),A=new i(0),L=new i(1),b=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++b;for(var c=g.clone(),u=l.clone();!l.isZero();){for(var w=0,_=1;(l.words[0]&_)===0&&w<26;++w,_<<=1);if(w>0)for(l.iushrn(w);w-- >0;)(v.isOdd()||S.isOdd())&&(v.iadd(c),S.isub(u)),v.iushrn(1),S.iushrn(1);for(var q=0,G=1;(g.words[0]&G)===0&&q<26;++q,G<<=1);if(q>0)for(g.iushrn(q);q-- >0;)(A.isOdd()||L.isOdd())&&(A.iadd(c),L.isub(u)),A.iushrn(1),L.iushrn(1);l.cmp(g)>=0?(l.isub(g),v.isub(A),S.isub(L)):(g.isub(l),A.isub(v),L.isub(S))}return{a:A,b:L,gcd:g.iushln(b)}},i.prototype._invmp=function(o){r(o.negative===0),r(!o.isZero());var l=this,g=o.clone();l.negative!==0?l=l.umod(o):l=l.clone();for(var v=new i(1),S=new i(0),A=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var L=0,b=1;(l.words[0]&b)===0&&L<26;++L,b<<=1);if(L>0)for(l.iushrn(L);L-- >0;)v.isOdd()&&v.iadd(A),v.iushrn(1);for(var c=0,u=1;(g.words[0]&u)===0&&c<26;++c,u<<=1);if(c>0)for(g.iushrn(c);c-- >0;)S.isOdd()&&S.iadd(A),S.iushrn(1);l.cmp(g)>=0?(l.isub(g),v.isub(S)):(g.isub(l),S.isub(v))}var w;return l.cmpn(1)===0?w=v:w=S,w.cmpn(0)<0&&w.iadd(o),w},i.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var l=this.clone(),g=o.clone();l.negative=0,g.negative=0;for(var v=0;l.isEven()&&g.isEven();v++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var S=l.cmp(g);if(S<0){var A=l;l=g,g=A}else if(S===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(v)},i.prototype.invm=function(o){return this.egcd(o).a.umod(o)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(o){return this.words[0]&o},i.prototype.bincn=function(o){r(typeof o=="number");var l=o%26,g=(o-l)/26,v=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=v,this;for(var S=v,A=g;S!==0&&A<this.length;A++){var L=this.words[A]|0;L+=S,S=L>>>26,L&=67108863,this.words[A]=L}return S!==0&&(this.words[A]=S,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(o){var l=o<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var g;if(this.length>1)g=1;else{l&&(o=-o),r(o<=67108863,"Number is too big");var v=this.words[0]|0;g=v===o?0:v<o?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var l=this.ucmp(o);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var v=this.words[g]|0,S=o.words[g]|0;if(v!==S){v<S?l=-1:v>S&&(l=1);break}}return l},i.prototype.gtn=function(o){return this.cmpn(o)===1},i.prototype.gt=function(o){return this.cmp(o)===1},i.prototype.gten=function(o){return this.cmpn(o)>=0},i.prototype.gte=function(o){return this.cmp(o)>=0},i.prototype.ltn=function(o){return this.cmpn(o)===-1},i.prototype.lt=function(o){return this.cmp(o)===-1},i.prototype.lten=function(o){return this.cmpn(o)<=0},i.prototype.lte=function(o){return this.cmp(o)<=0},i.prototype.eqn=function(o){return this.cmpn(o)===0},i.prototype.eq=function(o){return this.cmp(o)===0},i.red=function(o){return new $(o)},i.prototype.toRed=function(o){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(o){return this.red=o,this},i.prototype.forceRed=function(o){return r(!this.red,"Already a number in reduction context"),this._forceRed(o)},i.prototype.redAdd=function(o){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},i.prototype.redIAdd=function(o){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},i.prototype.redSub=function(o){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},i.prototype.redISub=function(o){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},i.prototype.redShl=function(o){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},i.prototype.redMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},i.prototype.redIMul=function(o){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(o){return r(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Y={k256:null,p224:null,p192:null,p25519:null};function it(m,o){this.name=m,this.p=new i(o,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}it.prototype._tmp=function(){var o=new i(null);return o.words=new Array(Math.ceil(this.n/13)),o},it.prototype.ireduce=function(o){var l=o,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var v=g<this.n?-1:l.ucmp(this.p);return v===0?(l.words[0]=0,l.length=1):v>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},it.prototype.split=function(o,l){o.iushrn(this.n,0,l)},it.prototype.imulK=function(o){return o.imul(this.k)};function ft(){it.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ft,it),ft.prototype.split=function(o,l){for(var g=4194303,v=Math.min(o.length,9),S=0;S<v;S++)l.words[S]=o.words[S];if(l.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var A=o.words[9];for(l.words[l.length++]=A&g,S=10;S<o.length;S++){var L=o.words[S]|0;o.words[S-10]=(L&g)<<4|A>>>22,A=L}A>>>=22,o.words[S-10]=A,A===0&&o.length>10?o.length-=10:o.length-=9},ft.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var l=0,g=0;g<o.length;g++){var v=o.words[g]|0;l+=v*977,o.words[g]=l&67108863,l=v*64+(l/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function ot(){it.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ot,it);function F(){it.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(F,it);function O(){it.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(O,it),O.prototype.imulK=function(o){for(var l=0,g=0;g<o.length;g++){var v=(o.words[g]|0)*19+l,S=v&67108863;v>>>=26,o.words[g]=S,l=v}return l!==0&&(o.words[o.length++]=l),o},i._prime=function(o){if(Y[o])return Y[o];var l;if(o==="k256")l=new ft;else if(o==="p224")l=new ot;else if(o==="p192")l=new F;else if(o==="p25519")l=new O;else throw new Error("Unknown prime "+o);return Y[o]=l,l};function $(m){if(typeof m=="string"){var o=i._prime(m);this.m=o.p,this.prime=o}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}$.prototype._verify1=function(o){r(o.negative===0,"red works only with positives"),r(o.red,"red works only with red numbers")},$.prototype._verify2=function(o,l){r((o.negative|l.negative)===0,"red works only with positives"),r(o.red&&o.red===l.red,"red works only with red numbers")},$.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(I(o,o.umod(this.m)._forceRed(this)),o)},$.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},$.prototype.add=function(o,l){this._verify2(o,l);var g=o.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},$.prototype.iadd=function(o,l){this._verify2(o,l);var g=o.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},$.prototype.sub=function(o,l){this._verify2(o,l);var g=o.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},$.prototype.isub=function(o,l){this._verify2(o,l);var g=o.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},$.prototype.shl=function(o,l){return this._verify1(o),this.imod(o.ushln(l))},$.prototype.imul=function(o,l){return this._verify2(o,l),this.imod(o.imul(l))},$.prototype.mul=function(o,l){return this._verify2(o,l),this.imod(o.mul(l))},$.prototype.isqr=function(o){return this.imul(o,o.clone())},$.prototype.sqr=function(o){return this.mul(o,o)},$.prototype.sqrt=function(o){if(o.isZero())return o.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(o,g)}for(var v=this.m.subn(1),S=0;!v.isZero()&&v.andln(1)===0;)S++,v.iushrn(1);r(!v.isZero());var A=new i(1).toRed(this),L=A.redNeg(),b=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);this.pow(c,b).cmp(L)!==0;)c.redIAdd(L);for(var u=this.pow(c,v),w=this.pow(o,v.addn(1).iushrn(1)),_=this.pow(o,v),q=S;_.cmp(A)!==0;){for(var G=_,tt=0;G.cmp(A)!==0;tt++)G=G.redSqr();r(tt<q);var nt=this.pow(u,new i(1).iushln(q-tt-1));w=w.redMul(nt),u=nt.redSqr(),_=_.redMul(u),q=tt}return w},$.prototype.invm=function(o){var l=o._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},$.prototype.pow=function(o,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return o.clone();var g=4,v=new Array(1<<g);v[0]=new i(1).toRed(this),v[1]=o;for(var S=2;S<v.length;S++)v[S]=this.mul(v[S-1],o);var A=v[0],L=0,b=0,c=l.bitLength()%26;for(c===0&&(c=26),S=l.length-1;S>=0;S--){for(var u=l.words[S],w=c-1;w>=0;w--){var _=u>>w&1;if(A!==v[0]&&(A=this.sqr(A)),_===0&&L===0){b=0;continue}L<<=1,L|=_,b++,!(b!==g&&(S!==0||w!==0))&&(A=this.mul(A,v[L]),b=0,L=0)}c=26}return A},$.prototype.convertTo=function(o){var l=o.umod(this.m);return l===o?l.clone():l},$.prototype.convertFrom=function(o){var l=o.clone();return l.red=null,l},i.mont=function(o){return new V(o)};function V(m){$.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,$),V.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},V.prototype.convertFrom=function(o){var l=this.imod(o.mul(this.rinv));return l.red=null,l},V.prototype.imul=function(o,l){if(o.isZero()||l.isZero())return o.words[0]=0,o.length=1,o;var g=o.imul(l),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=g.isub(v).iushrn(this.shift),A=S;return S.cmp(this.m)>=0?A=S.isub(this.m):S.cmpn(0)<0&&(A=S.iadd(this.m)),A._forceRed(this)},V.prototype.mul=function(o,l){if(o.isZero()||l.isZero())return new i(0)._forceRed(this);var g=o.mul(l),v=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),S=g.isub(v).iushrn(this.shift),A=S;return S.cmp(this.m)>=0?A=S.isub(this.m):S.cmpn(0)<0&&(A=S.iadd(this.m)),A._forceRed(this)},V.prototype.invm=function(o){var l=this.imod(o._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,Ra)})(Or)),Or.exports}var Ma=Vs();const Vi=Xr(Ma);var Lr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var ji;function Ta(){return ji||(ji=1,(function(n,t){var e=si(),r=e.Buffer;function s(a,f){for(var p in a)f[p]=a[p]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(a,f,p){return r(a,f,p)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(a,f,p){if(typeof a=="number")throw new TypeError("Argument must not be a number");return r(a,f,p)},i.alloc=function(a,f,p){if(typeof a!="number")throw new TypeError("Argument must be a number");var x=r(a);return f!==void 0?typeof p=="string"?x.fill(f,p):x.fill(f):x.fill(0),x},i.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r(a)},i.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(a)}})(Lr,Lr.exports)),Lr.exports}var Ln,Gi;function Ca(){if(Gi)return Ln;Gi=1;var n=Ta().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),f=a.charCodeAt(0);if(r[f]!==255)throw new TypeError(a+" is ambiguous");r[f]=i}var p=e.length,x=e.charAt(0),I=Math.log(p)/Math.log(256),M=Math.log(256)/Math.log(p);function k(T){if((Array.isArray(T)||T instanceof Uint8Array)&&(T=n.from(T)),!n.isBuffer(T))throw new TypeError("Expected Buffer");if(T.length===0)return"";for(var U=0,P=0,W=0,K=T.length;W!==K&&T[W]===0;)W++,U++;for(var J=(K-W)*M+1>>>0,Y=new Uint8Array(J);W!==K;){for(var it=T[W],ft=0,ot=J-1;(it!==0||ft<P)&&ot!==-1;ot--,ft++)it+=256*Y[ot]>>>0,Y[ot]=it%p>>>0,it=it/p>>>0;if(it!==0)throw new Error("Non-zero carry");P=ft,W++}for(var F=J-P;F!==J&&Y[F]===0;)F++;for(var O=x.repeat(U);F<J;++F)O+=e.charAt(Y[F]);return O}function B(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return n.alloc(0);for(var U=0,P=0,W=0;T[U]===x;)P++,U++;for(var K=(T.length-U)*I+1>>>0,J=new Uint8Array(K);U<T.length;){var Y=T.charCodeAt(U);if(Y>255)return;var it=r[Y];if(it===255)return;for(var ft=0,ot=K-1;(it!==0||ft<W)&&ot!==-1;ot--,ft++)it+=p*J[ot]>>>0,J[ot]=it%256>>>0,it=it/256>>>0;if(it!==0)throw new Error("Non-zero carry");W=ft,U++}for(var F=K-W;F!==K&&J[F]===0;)F++;var O=n.allocUnsafe(P+(K-F));O.fill(0,0,P);for(var $=P;F!==K;)O[$++]=J[F++];return O}function R(T){var U=B(T);if(U)return U;throw new Error("Non-base"+p+" character")}return{encode:k,decodeUnsafe:B,decode:R}}return Ln=t,Ln}var Un,Wi;function js(){if(Wi)return Un;Wi=1;var n=Ca(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Un=n(t),Un}var La=js();const ie=Xr(La),Zi=Bs;var bt={};function ke(n,t,e){return t<=n&&n<=e}function Qr(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Ua(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var a=n.charCodeAt(r+1);if(56320<=a&&a<=57343){var f=i&1023,p=a&1023;s.push(65536+(f<<10)+p),r+=1}else s.push(65533)}r+=1}return s}function Fa(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var $r=-1;function li(n){this.tokens=[].slice.call(n)}li.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():$r},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var ur=-1;function Fn(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Hr="utf-8";function Vr(n,t){if(!(this instanceof Vr))return new Vr(n,t);if(n=n!==void 0?String(n).toLowerCase():Hr,n!==Hr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Qr(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Vr.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Qr(e),this._streaming||(this._decoder=new Na({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new li(r),i=[],a;!s.endOfStream()&&(a=this._decoder.handler(s,s.read()),a!==ur);)a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));if(!this._streaming){do{if(a=this._decoder.handler(s,s.read()),a===ur)break;a!==null&&(Array.isArray(a)?i.push.apply(i,a):i.push(a))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Fa(i)}};function jr(n,t){if(!(this instanceof jr))return new jr(n,t);if(n=n!==void 0?String(n).toLowerCase():Hr,n!==Hr)throw new Error("Encoding not supported. Only utf-8 is supported");t=Qr(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}jr.prototype={encode:function(t,e){t=t?String(t):"",e=Qr(e),this._streaming||(this._encoder=new Oa(this._options)),this._streaming=!!e.stream;for(var r=[],s=new li(Ua(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==ur);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==ur;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Na(n){var t=n.fatal,e=0,r=0,s=0,i=128,a=191;this.handler=function(f,p){if(p===$r&&s!==0)return s=0,Fn(t);if(p===$r)return ur;if(s===0){if(ke(p,0,127))return p;if(ke(p,194,223))s=1,e=p-192;else if(ke(p,224,239))p===224&&(i=160),p===237&&(a=159),s=2,e=p-224;else if(ke(p,240,244))p===240&&(i=144),p===244&&(a=143),s=3,e=p-240;else return Fn(t);return e=e<<6*s,null}if(!ke(p,i,a))return e=s=r=0,i=128,a=191,f.prepend(p),Fn(t);if(i=128,a=191,r+=1,e+=p-128<<6*(s-r),r!==s)return null;var x=e;return e=s=r=0,x}}function Oa(n){n.fatal,this.handler=function(t,e){if(e===$r)return ur;if(ke(e,0,127))return e;var r,s;ke(e,128,2047)?(r=1,s=192):ke(e,2048,65535)?(r=2,s=224):ke(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var a=e>>6*(r-1);i.push(128|a&63),r-=1}return i}}const qa=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Vr,TextEncoder:jr},Symbol.toStringTag,{value:"Module"})),Pa=ii(qa);var Yi;function Da(){if(Yi)return bt;Yi=1;var n=bt&&bt.__createBinding||(Object.create?(function(F,O,$,V){V===void 0&&(V=$),Object.defineProperty(F,V,{enumerable:!0,get:function(){return O[$]}})}):(function(F,O,$,V){V===void 0&&(V=$),F[V]=O[$]})),t=bt&&bt.__setModuleDefault||(Object.create?(function(F,O){Object.defineProperty(F,"default",{enumerable:!0,value:O})}):function(F,O){F.default=O}),e=bt&&bt.__decorate||function(F,O,$,V){var m=arguments.length,o=m<3?O:V===null?V=Object.getOwnPropertyDescriptor(O,$):V,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(F,O,$,V);else for(var g=F.length-1;g>=0;g--)(l=F[g])&&(o=(m<3?l(o):m>3?l(O,$,o):l(O,$))||o);return m>3&&o&&Object.defineProperty(O,$,o),o},r=bt&&bt.__importStar||function(F){if(F&&F.__esModule)return F;var O={};if(F!=null)for(var $ in F)$!=="default"&&Object.hasOwnProperty.call(F,$)&&n(O,F,$);return t(O,F),O},s=bt&&bt.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(bt,"__esModule",{value:!0}),bt.deserializeUnchecked=bt.deserialize=bt.serialize=bt.BinaryReader=bt.BinaryWriter=bt.BorshError=bt.baseDecode=bt.baseEncode=void 0;const i=s(Vs()),a=s(js()),f=r(Pa),p=typeof TextDecoder!="function"?f.TextDecoder:TextDecoder,x=new p("utf-8",{fatal:!0});function I(F){return typeof F=="string"&&(F=Buffer.from(F,"utf8")),a.default.encode(Buffer.from(F))}bt.baseEncode=I;function M(F){return Buffer.from(a.default.decode(F))}bt.baseDecode=M;const k=1024;class B extends Error{constructor(O){super(O),this.fieldPath=[],this.originalMessage=O}addToFieldPath(O){this.fieldPath.splice(0,0,O),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}bt.BorshError=B;class R{constructor(){this.buf=Buffer.alloc(k),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(k)]))}writeU8(O){this.maybeResize(),this.buf.writeUInt8(O,this.length),this.length+=1}writeU16(O){this.maybeResize(),this.buf.writeUInt16LE(O,this.length),this.length+=2}writeU32(O){this.maybeResize(),this.buf.writeUInt32LE(O,this.length),this.length+=4}writeU64(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",8)))}writeU128(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",16)))}writeU256(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",32)))}writeU512(O){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(O).toArray("le",64)))}writeBuffer(O){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),O,Buffer.alloc(k)]),this.length+=O.length}writeString(O){this.maybeResize();const $=Buffer.from(O,"utf8");this.writeU32($.length),this.writeBuffer($)}writeFixedArray(O){this.writeBuffer(Buffer.from(O))}writeArray(O,$){this.maybeResize(),this.writeU32(O.length);for(const V of O)this.maybeResize(),$(V)}toArray(){return this.buf.subarray(0,this.length)}}bt.BinaryWriter=R;function T(F,O,$){const V=$.value;$.value=function(...m){try{return V.apply(this,m)}catch(o){if(o instanceof RangeError){const l=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(l)>=0)throw new B("Reached the end of buffer when deserializing")}throw o}}}class U{constructor(O){this.buf=O,this.offset=0}readU8(){const O=this.buf.readUInt8(this.offset);return this.offset+=1,O}readU16(){const O=this.buf.readUInt16LE(this.offset);return this.offset+=2,O}readU32(){const O=this.buf.readUInt32LE(this.offset);return this.offset+=4,O}readU64(){const O=this.readBuffer(8);return new i.default(O,"le")}readU128(){const O=this.readBuffer(16);return new i.default(O,"le")}readU256(){const O=this.readBuffer(32);return new i.default(O,"le")}readU512(){const O=this.readBuffer(64);return new i.default(O,"le")}readBuffer(O){if(this.offset+O>this.buf.length)throw new B(`Expected buffer length ${O} isn't within bounds`);const $=this.buf.slice(this.offset,this.offset+O);return this.offset+=O,$}readString(){const O=this.readU32(),$=this.readBuffer(O);try{return x.decode($)}catch(V){throw new B(`Error decoding UTF-8 string: ${V}`)}}readFixedArray(O){return new Uint8Array(this.readBuffer(O))}readArray(O){const $=this.readU32(),V=Array();for(let m=0;m<$;++m)V.push(O());return V}}e([T],U.prototype,"readU8",null),e([T],U.prototype,"readU16",null),e([T],U.prototype,"readU32",null),e([T],U.prototype,"readU64",null),e([T],U.prototype,"readU128",null),e([T],U.prototype,"readU256",null),e([T],U.prototype,"readU512",null),e([T],U.prototype,"readString",null),e([T],U.prototype,"readFixedArray",null),e([T],U.prototype,"readArray",null),bt.BinaryReader=U;function P(F){return F.charAt(0).toUpperCase()+F.slice(1)}function W(F,O,$,V,m){try{if(typeof V=="string")m[`write${P(V)}`]($);else if(V instanceof Array)if(typeof V[0]=="number"){if($.length!==V[0])throw new B(`Expecting byte array of length ${V[0]}, but got ${$.length} bytes`);m.writeFixedArray($)}else if(V.length===2&&typeof V[1]=="number"){if($.length!==V[1])throw new B(`Expecting byte array of length ${V[1]}, but got ${$.length} bytes`);for(let o=0;o<V[1];o++)W(F,null,$[o],V[0],m)}else m.writeArray($,o=>{W(F,O,o,V[0],m)});else if(V.kind!==void 0)switch(V.kind){case"option":{$==null?m.writeU8(0):(m.writeU8(1),W(F,O,$,V.type,m));break}case"map":{m.writeU32($.size),$.forEach((o,l)=>{W(F,O,l,V.key,m),W(F,O,o,V.value,m)});break}default:throw new B(`FieldType ${V} unrecognized`)}else K(F,$,m)}catch(o){throw o instanceof B&&o.addToFieldPath(O),o}}function K(F,O,$){if(typeof O.borshSerialize=="function"){O.borshSerialize($);return}const V=F.get(O.constructor);if(!V)throw new B(`Class ${O.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([m,o])=>{W(F,m,O[m],o,$)});else if(V.kind==="enum"){const m=O[V.field];for(let o=0;o<V.values.length;++o){const[l,g]=V.values[o];if(l===m){$.writeU8(o),W(F,l,O[l],g,$);break}}}else throw new B(`Unexpected schema kind: ${V.kind} for ${O.constructor.name}`)}function J(F,O,$=R){const V=new $;return K(F,O,V),V.toArray()}bt.serialize=J;function Y(F,O,$,V){try{if(typeof $=="string")return V[`read${P($)}`]();if($ instanceof Array){if(typeof $[0]=="number")return V.readFixedArray($[0]);if(typeof $[1]=="number"){const m=[];for(let o=0;o<$[1];o++)m.push(Y(F,null,$[0],V));return m}else return V.readArray(()=>Y(F,O,$[0],V))}if($.kind==="option")return V.readU8()?Y(F,O,$.type,V):void 0;if($.kind==="map"){let m=new Map;const o=V.readU32();for(let l=0;l<o;l++){const g=Y(F,O,$.key,V),v=Y(F,O,$.value,V);m.set(g,v)}return m}return it(F,$,V)}catch(m){throw m instanceof B&&m.addToFieldPath(O),m}}function it(F,O,$){if(typeof O.borshDeserialize=="function")return O.borshDeserialize($);const V=F.get(O);if(!V)throw new B(`Class ${O.name} is missing in schema`);if(V.kind==="struct"){const m={};for(const[o,l]of F.get(O).fields)m[o]=Y(F,o,l,$);return new O(m)}if(V.kind==="enum"){const m=$.readU8();if(m>=V.values.length)throw new B(`Enum index: ${m} is out of range`);const[o,l]=V.values[m],g=Y(F,o,l,$);return new O({[o]:g})}throw new B(`Unexpected schema kind: ${V.kind} for ${O.constructor.name}`)}function ft(F,O,$,V=U){const m=new V($),o=it(F,O,m);if(m.offset<$.length)throw new B(`Unexpected ${$.length-m.offset} bytes after deserialized data`);return o}bt.deserialize=ft;function ot(F,O,$,V=U){const m=new V($);return it(F,O,m)}return bt.deserializeUnchecked=ot,bt}var Nn=Da(),H={},Xi;function za(){if(Xi)return H;Xi=1,Object.defineProperty(H,"__esModule",{value:!0}),H.s16=H.s8=H.nu64be=H.u48be=H.u40be=H.u32be=H.u24be=H.u16be=H.nu64=H.u48=H.u40=H.u32=H.u24=H.u16=H.u8=H.offset=H.greedy=H.Constant=H.UTF8=H.CString=H.Blob=H.Boolean=H.BitField=H.BitStructure=H.VariantLayout=H.Union=H.UnionLayoutDiscriminator=H.UnionDiscriminator=H.Structure=H.Sequence=H.DoubleBE=H.Double=H.FloatBE=H.Float=H.NearInt64BE=H.NearInt64=H.NearUInt64BE=H.NearUInt64=H.IntBE=H.Int=H.UIntBE=H.UInt=H.OffsetLayout=H.GreedyCount=H.ExternalLayout=H.bindConstructorLayout=H.nameWithProperty=H.Layout=H.uint8ArrayToBuffer=H.checkUint8Array=void 0,H.constant=H.utf8=H.cstr=H.blob=H.unionLayoutDiscriminator=H.union=H.seq=H.bits=H.struct=H.f64be=H.f64=H.f32be=H.f32=H.ns64be=H.s48be=H.s40be=H.s32be=H.s24be=H.s16be=H.ns64=H.s48=H.s40=H.s32=H.s24=void 0;const n=si();function t(c){if(!(c instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}H.checkUint8Array=t;function e(c){return t(c),n.Buffer.from(c.buffer,c.byteOffset,c.length)}H.uint8ArrayToBuffer=e;let r=class{constructor(u,w){if(!Number.isInteger(u))throw new TypeError("span must be an integer");this.span=u,this.property=w}makeDestinationObject(){return{}}getSpan(u,w){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(u){const w=Object.create(this.constructor.prototype);return Object.assign(w,this),w.property=u,w}fromArray(u){}};H.Layout=r;function s(c,u){return u.property?c+"["+u.property+"]":c}H.nameWithProperty=s;function i(c,u){if(typeof c!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(c,"layout_"))throw new Error("Class is already bound to a layout");if(!(u&&u instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(u,"boundConstructor_"))throw new Error("layout is already bound to a constructor");c.layout_=u,u.boundConstructor_=c,u.makeDestinationObject=(()=>new c),Object.defineProperty(c.prototype,"encode",{value(w,_){return u.encode(this,w,_)},writable:!0}),Object.defineProperty(c,"decode",{value(w,_){return u.decode(w,_)},writable:!0})}H.bindConstructorLayout=i;class a extends r{isCount(){throw new Error("ExternalLayout is abstract")}}H.ExternalLayout=a;class f extends a{constructor(u=1,w){if(!Number.isInteger(u)||0>=u)throw new TypeError("elementSpan must be a (positive) integer");super(-1,w),this.elementSpan=u}isCount(){return!0}decode(u,w=0){t(u);const _=u.length-w;return Math.floor(_/this.elementSpan)}encode(u,w,_){return 0}}H.GreedyCount=f;class p extends a{constructor(u,w=0,_){if(!(u instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(w))throw new TypeError("offset must be integer or undefined");super(u.span,_||u.property),this.layout=u,this.offset=w}isCount(){return this.layout instanceof x||this.layout instanceof I}decode(u,w=0){return this.layout.decode(u,w+this.offset)}encode(u,w,_=0){return this.layout.encode(u,w,_+this.offset)}}H.OffsetLayout=p;class x extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readUIntLE(w,this.span)}encode(u,w,_=0){return e(w).writeUIntLE(u,_,this.span),this.span}}H.UInt=x;class I extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readUIntBE(w,this.span)}encode(u,w,_=0){return e(w).writeUIntBE(u,_,this.span),this.span}}H.UIntBE=I;class M extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readIntLE(w,this.span)}encode(u,w,_=0){return e(w).writeIntLE(u,_,this.span),this.span}}H.Int=M;class k extends r{constructor(u,w){if(super(u,w),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(u,w=0){return e(u).readIntBE(w,this.span)}encode(u,w,_=0){return e(w).writeIntBE(u,_,this.span),this.span}}H.IntBE=k;const B=Math.pow(2,32);function R(c){const u=Math.floor(c/B),w=c-u*B;return{hi32:u,lo32:w}}function T(c,u){return c*B+u}class U extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),q=_.readUInt32LE(w),G=_.readUInt32LE(w+4);return T(G,q)}encode(u,w,_=0){const q=R(u),G=e(w);return G.writeUInt32LE(q.lo32,_),G.writeUInt32LE(q.hi32,_+4),8}}H.NearUInt64=U;class P extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),q=_.readUInt32BE(w),G=_.readUInt32BE(w+4);return T(q,G)}encode(u,w,_=0){const q=R(u),G=e(w);return G.writeUInt32BE(q.hi32,_),G.writeUInt32BE(q.lo32,_+4),8}}H.NearUInt64BE=P;class W extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),q=_.readUInt32LE(w),G=_.readInt32LE(w+4);return T(G,q)}encode(u,w,_=0){const q=R(u),G=e(w);return G.writeUInt32LE(q.lo32,_),G.writeInt32LE(q.hi32,_+4),8}}H.NearInt64=W;class K extends r{constructor(u){super(8,u)}decode(u,w=0){const _=e(u),q=_.readInt32BE(w),G=_.readUInt32BE(w+4);return T(q,G)}encode(u,w,_=0){const q=R(u),G=e(w);return G.writeInt32BE(q.hi32,_),G.writeUInt32BE(q.lo32,_+4),8}}H.NearInt64BE=K;class J extends r{constructor(u){super(4,u)}decode(u,w=0){return e(u).readFloatLE(w)}encode(u,w,_=0){return e(w).writeFloatLE(u,_),4}}H.Float=J;class Y extends r{constructor(u){super(4,u)}decode(u,w=0){return e(u).readFloatBE(w)}encode(u,w,_=0){return e(w).writeFloatBE(u,_),4}}H.FloatBE=Y;class it extends r{constructor(u){super(8,u)}decode(u,w=0){return e(u).readDoubleLE(w)}encode(u,w,_=0){return e(w).writeDoubleLE(u,_),8}}H.Double=it;class ft extends r{constructor(u){super(8,u)}decode(u,w=0){return e(u).readDoubleBE(w)}encode(u,w,_=0){return e(w).writeDoubleBE(u,_),8}}H.DoubleBE=ft;class ot extends r{constructor(u,w,_){if(!(u instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(w instanceof a&&w.isCount()||Number.isInteger(w)&&0<=w))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let q=-1;!(w instanceof a)&&0<u.span&&(q=w*u.span),super(q,_),this.elementLayout=u,this.count=w}getSpan(u,w=0){if(0<=this.span)return this.span;let _=0,q=this.count;if(q instanceof a&&(q=q.decode(u,w)),0<this.elementLayout.span)_=q*this.elementLayout.span;else{let G=0;for(;G<q;)_+=this.elementLayout.getSpan(u,w+_),++G}return _}decode(u,w=0){const _=[];let q=0,G=this.count;for(G instanceof a&&(G=G.decode(u,w));q<G;)_.push(this.elementLayout.decode(u,w)),w+=this.elementLayout.getSpan(u,w),q+=1;return _}encode(u,w,_=0){const q=this.elementLayout,G=u.reduce((tt,nt)=>tt+q.encode(nt,w,_+tt),0);return this.count instanceof a&&this.count.encode(u.length,w,_),G}}H.Sequence=ot;class F extends r{constructor(u,w,_){if(!(Array.isArray(u)&&u.reduce((G,tt)=>G&&tt instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof w=="boolean"&&_===void 0&&(_=w,w=void 0);for(const G of u)if(0>G.span&&G.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let q=-1;try{q=u.reduce((G,tt)=>G+tt.getSpan(),0)}catch{}super(q,w),this.fields=u,this.decodePrefixes=!!_}getSpan(u,w=0){if(0<=this.span)return this.span;let _=0;try{_=this.fields.reduce((q,G)=>{const tt=G.getSpan(u,w);return w+=tt,q+tt},0)}catch{throw new RangeError("indeterminate span")}return _}decode(u,w=0){t(u);const _=this.makeDestinationObject();for(const q of this.fields)if(q.property!==void 0&&(_[q.property]=q.decode(u,w)),w+=q.getSpan(u,w),this.decodePrefixes&&u.length===w)break;return _}encode(u,w,_=0){const q=_;let G=0,tt=0;for(const nt of this.fields){let yt=nt.span;if(tt=0<yt?yt:0,nt.property!==void 0){const wt=u[nt.property];wt!==void 0&&(tt=nt.encode(wt,w,_),0>yt&&(yt=nt.getSpan(w,_)))}G=_,_+=yt}return G+tt-q}fromArray(u){const w=this.makeDestinationObject();for(const _ of this.fields)_.property!==void 0&&0<u.length&&(w[_.property]=u.shift());return w}layoutFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===u)return w}offsetOf(u){if(typeof u!="string")throw new TypeError("property must be string");let w=0;for(const _ of this.fields){if(_.property===u)return w;0>_.span?w=-1:0<=w&&(w+=_.span)}}}H.Structure=F;class O{constructor(u){this.property=u}decode(u,w){throw new Error("UnionDiscriminator is abstract")}encode(u,w,_){throw new Error("UnionDiscriminator is abstract")}}H.UnionDiscriminator=O;class $ extends O{constructor(u,w){if(!(u instanceof a&&u.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(w||u.property||"variant"),this.layout=u}decode(u,w){return this.layout.decode(u,w)}encode(u,w,_){return this.layout.encode(u,w,_)}}H.UnionLayoutDiscriminator=$;class V extends r{constructor(u,w,_){let q;if(u instanceof x||u instanceof I)q=new $(new p(u));else if(u instanceof a&&u.isCount())q=new $(u);else if(u instanceof O)q=u;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(w===void 0&&(w=null),!(w===null||w instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(w!==null){if(0>w.span)throw new Error("defaultLayout must have constant span");w.property===void 0&&(w=w.replicate("content"))}let G=-1;w&&(G=w.span,0<=G&&(u instanceof x||u instanceof I)&&(G+=q.layout.span)),super(G,_),this.discriminator=q,this.usesPrefixDiscriminator=u instanceof x||u instanceof I,this.defaultLayout=w,this.registry={};let tt=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(nt){return tt(nt)},this.configGetSourceVariant=function(nt){tt=nt.bind(this)}}getSpan(u,w=0){if(0<=this.span)return this.span;const _=this.getVariant(u,w);if(!_)throw new Error("unable to determine span for unrecognized variant");return _.getSpan(u,w)}defaultGetSourceVariant(u){if(Object.prototype.hasOwnProperty.call(u,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(u,this.defaultLayout.property))return;const w=this.registry[u[this.discriminator.property]];if(w&&(!w.layout||w.property&&Object.prototype.hasOwnProperty.call(u,w.property)))return w}else for(const w in this.registry){const _=this.registry[w];if(_.property&&Object.prototype.hasOwnProperty.call(u,_.property))return _}throw new Error("unable to infer src variant")}decode(u,w=0){let _;const q=this.discriminator,G=q.decode(u,w),tt=this.registry[G];if(tt===void 0){const nt=this.defaultLayout;let yt=0;this.usesPrefixDiscriminator&&(yt=q.layout.span),_=this.makeDestinationObject(),_[q.property]=G,_[nt.property]=nt.decode(u,w+yt)}else _=tt.decode(u,w);return _}encode(u,w,_=0){const q=this.getSourceVariant(u);if(q===void 0){const G=this.discriminator,tt=this.defaultLayout;let nt=0;return this.usesPrefixDiscriminator&&(nt=G.layout.span),G.encode(u[G.property],w,_),nt+tt.encode(u[tt.property],w,_+nt)}return q.encode(u,w,_)}addVariant(u,w,_){const q=new m(this,u,w,_);return this.registry[u]=q,q}getVariant(u,w=0){let _;return u instanceof Uint8Array?_=this.discriminator.decode(u,w):_=u,this.registry[_]}}H.Union=V;class m extends r{constructor(u,w,_,q){if(!(u instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(w)||0>w)throw new TypeError("variant must be a (non-negative) integer");if(typeof _=="string"&&q===void 0&&(q=_,_=null),_){if(!(_ instanceof r))throw new TypeError("layout must be a Layout");if(u.defaultLayout!==null&&0<=_.span&&_.span>u.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof q!="string")throw new TypeError("variant must have a String property")}let G=u.span;0>u.span&&(G=_?_.span:0,0<=G&&u.usesPrefixDiscriminator&&(G+=u.discriminator.layout.span)),super(G,q),this.union=u,this.variant=w,this.layout=_||null}getSpan(u,w=0){if(0<=this.span)return this.span;let _=0;this.union.usesPrefixDiscriminator&&(_=this.union.discriminator.layout.span);let q=0;return this.layout&&(q=this.layout.getSpan(u,w+_)),_+q}decode(u,w=0){const _=this.makeDestinationObject();if(this!==this.union.getVariant(u,w))throw new Error("variant mismatch");let q=0;return this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout?_[this.property]=this.layout.decode(u,w+q):this.property?_[this.property]=!0:this.union.usesPrefixDiscriminator&&(_[this.union.discriminator.property]=this.variant),_}encode(u,w,_=0){let q=0;if(this.union.usesPrefixDiscriminator&&(q=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(u,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,w,_);let G=q;if(this.layout&&(this.layout.encode(u[this.property],w,_+q),G+=this.layout.getSpan(w,_+q),0<=this.union.span&&G>this.union.span))throw new Error("encoded variant overruns containing union");return G}fromArray(u){if(this.layout)return this.layout.fromArray(u)}}H.VariantLayout=m;function o(c){return 0>c&&(c+=4294967296),c}class l extends r{constructor(u,w,_){if(!(u instanceof x||u instanceof I))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof w=="string"&&_===void 0&&(_=w,w=!1),4<u.span)throw new RangeError("word cannot exceed 32 bits");super(u.span,_),this.word=u,this.msb=!!w,this.fields=[];let q=0;this._packedSetValue=function(G){return q=o(G),this},this._packedGetValue=function(){return q}}decode(u,w=0){const _=this.makeDestinationObject(),q=this.word.decode(u,w);this._packedSetValue(q);for(const G of this.fields)G.property!==void 0&&(_[G.property]=G.decode(u));return _}encode(u,w,_=0){const q=this.word.decode(w,_);this._packedSetValue(q);for(const G of this.fields)if(G.property!==void 0){const tt=u[G.property];tt!==void 0&&G.encode(tt)}return this.word.encode(this._packedGetValue(),w,_)}addField(u,w){const _=new g(this,u,w);return this.fields.push(_),_}addBoolean(u){const w=new v(this,u);return this.fields.push(w),w}fieldFor(u){if(typeof u!="string")throw new TypeError("property must be string");for(const w of this.fields)if(w.property===u)return w}}H.BitStructure=l;class g{constructor(u,w,_){if(!(u instanceof l))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(w)||0>=w)throw new TypeError("bits must be positive integer");const q=8*u.span,G=u.fields.reduce((tt,nt)=>tt+nt.bits,0);if(w+G>q)throw new Error("bits too long for span remainder ("+(q-G)+" of "+q+" remain)");this.container=u,this.bits=w,this.valueMask=(1<<w)-1,w===32&&(this.valueMask=4294967295),this.start=G,this.container.msb&&(this.start=q-G-w),this.wordMask=o(this.valueMask<<this.start),this.property=_}decode(u,w){const _=this.container._packedGetValue();return o(_&this.wordMask)>>>this.start}encode(u){if(typeof u!="number"||!Number.isInteger(u)||u!==o(u&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const w=this.container._packedGetValue(),_=o(u<<this.start);this.container._packedSetValue(o(w&~this.wordMask)|_)}}H.BitField=g;class v extends g{constructor(u,w){super(u,1,w)}decode(u,w){return!!super.decode(u,w)}encode(u){typeof u=="boolean"&&(u=+u),super.encode(u)}}H.Boolean=v;class S extends r{constructor(u,w){if(!(u instanceof a&&u.isCount()||Number.isInteger(u)&&0<=u))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let _=-1;u instanceof a||(_=u),super(_,w),this.length=u}getSpan(u,w){let _=this.span;return 0>_&&(_=this.length.decode(u,w)),_}decode(u,w=0){let _=this.span;return 0>_&&(_=this.length.decode(u,w)),e(u).slice(w,w+_)}encode(u,w,_){let q=this.length;if(this.length instanceof a&&(q=u.length),!(u instanceof Uint8Array&&q===u.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+q+") Uint8Array as src");if(_+q>w.length)throw new RangeError("encoding overruns Uint8Array");const G=e(u);return e(w).write(G.toString("hex"),_,q,"hex"),this.length instanceof a&&this.length.encode(q,w,_),q}}H.Blob=S;class A extends r{constructor(u){super(-1,u)}getSpan(u,w=0){t(u);let _=w;for(;_<u.length&&u[_]!==0;)_+=1;return 1+_-w}decode(u,w=0){const _=this.getSpan(u,w);return e(u).slice(w,w+_-1).toString("utf-8")}encode(u,w,_=0){typeof u!="string"&&(u=String(u));const q=n.Buffer.from(u,"utf8"),G=q.length;if(_+G>w.length)throw new RangeError("encoding overruns Buffer");const tt=e(w);return q.copy(tt,_),tt[_+G]=0,G+1}}H.CString=A;class L extends r{constructor(u,w){if(typeof u=="string"&&w===void 0&&(w=u,u=void 0),u===void 0)u=-1;else if(!Number.isInteger(u))throw new TypeError("maxSpan must be an integer");super(-1,w),this.maxSpan=u}getSpan(u,w=0){return t(u),u.length-w}decode(u,w=0){const _=this.getSpan(u,w);if(0<=this.maxSpan&&this.maxSpan<_)throw new RangeError("text length exceeds maxSpan");return e(u).slice(w,w+_).toString("utf-8")}encode(u,w,_=0){typeof u!="string"&&(u=String(u));const q=n.Buffer.from(u,"utf8"),G=q.length;if(0<=this.maxSpan&&this.maxSpan<G)throw new RangeError("text length exceeds maxSpan");if(_+G>w.length)throw new RangeError("encoding overruns Buffer");return q.copy(e(w),_),G}}H.UTF8=L;class b extends r{constructor(u,w){super(0,w),this.value=u}decode(u,w){return this.value}encode(u,w,_){return 0}}return H.Constant=b,H.greedy=((c,u)=>new f(c,u)),H.offset=((c,u,w)=>new p(c,u,w)),H.u8=(c=>new x(1,c)),H.u16=(c=>new x(2,c)),H.u24=(c=>new x(3,c)),H.u32=(c=>new x(4,c)),H.u40=(c=>new x(5,c)),H.u48=(c=>new x(6,c)),H.nu64=(c=>new U(c)),H.u16be=(c=>new I(2,c)),H.u24be=(c=>new I(3,c)),H.u32be=(c=>new I(4,c)),H.u40be=(c=>new I(5,c)),H.u48be=(c=>new I(6,c)),H.nu64be=(c=>new P(c)),H.s8=(c=>new M(1,c)),H.s16=(c=>new M(2,c)),H.s24=(c=>new M(3,c)),H.s32=(c=>new M(4,c)),H.s40=(c=>new M(5,c)),H.s48=(c=>new M(6,c)),H.ns64=(c=>new W(c)),H.s16be=(c=>new k(2,c)),H.s24be=(c=>new k(3,c)),H.s32be=(c=>new k(4,c)),H.s40be=(c=>new k(5,c)),H.s48be=(c=>new k(6,c)),H.ns64be=(c=>new K(c)),H.f32=(c=>new J(c)),H.f32be=(c=>new Y(c)),H.f64=(c=>new it(c)),H.f64be=(c=>new ft(c)),H.struct=((c,u,w)=>new F(c,u,w)),H.bits=((c,u,w)=>new l(c,u,w)),H.seq=((c,u,w)=>new ot(c,u,w)),H.union=((c,u,w)=>new V(c,u,w)),H.unionLayoutDiscriminator=((c,u)=>new $(c,u)),H.blob=((c,u)=>new S(c,u)),H.cstr=(c=>new A(c)),H.utf8=((c,u)=>new L(c,u)),H.constant=((c,u)=>new b(c,u)),H}var C=za(),Ka=8078e3,$a=8078001,Ha=8078004,Va=8078005,ja=8078006,Ga=8078011;function Gs(n){return Array.isArray(n)?"%5B"+n.map(Gs).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Wa([n,t]){return`${n}=${Gs(t)}`}function Za(n){const t=Object.entries(n).map(Wa).join("&");return btoa(t)}function Ya(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${Za(t)}'`),`${e}\``}}var ir=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...a}=t;i&&(r={cause:i}),Object.keys(a).length>0&&(e=a)}const s=Ya(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function Xa(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function Ja(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(Xa(t,n));return n.write(t,e,0),e}})}function Qa(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function tr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function tc(n,t){if(tr(n)!==tr(t))throw new ir(Ha);if(tr(n)&&tr(t)&&n.fixedSize!==t.fixedSize)throw new ir(Va,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!tr(n)&&!tr(t)&&n.maxSize!==t.maxSize)throw new ir(ja,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function ec(n,t,e=0){if(t.length-e<=0)throw new ir(Ka,{codecDescription:n})}function rc(n,t,e,r=0){const s=e.length-r;if(s<t)throw new ir($a,{bytesLength:s,codecDescription:n,expected:t})}function nc(n,t,e,r){if(r<t||r>e)throw new ir(Ga,{codecDescription:n,max:e,min:t,value:r})}function Ws(n){return n?.endian!==1}function ic(n){return Ja({fixedSize:n.size,write(t,e,r){n.range&&nc(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,Ws(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function sc(n){return Qa({fixedSize:n.size,read(t,e=0){ec(n.name,t,e),rc(n.name,n.size,t,e);const r=new DataView(oc(t,e,n.size));return[n.get(r,Ws(n.config)),e+n.size]}})}function oc(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var ac=(n={})=>ic({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),cc=(n={})=>sc({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),uc=(n={})=>tc(ac(n),cc(n));class fc extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...a}=t,{path:f}=t,p=f.length===0?s:`At path: ${f.join(".")} -- ${s}`;super(i??p),i!=null&&(this.cause=p),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function hc(n){return Sr(n)&&typeof n[Symbol.iterator]=="function"}function Sr(n){return typeof n=="object"&&n!=null}function Gr(n){return Sr(n)&&!Array.isArray(n)}function ve(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function lc(n){const{done:t,value:e}=n.next();return t?void 0:e}function dc(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:a}=e,{refinement:f,message:p=`Expected a value of type \`${a}\`${f?` with refinement \`${f}\``:""}, but received: \`${ve(r)}\``}=n;return{value:r,type:a,refinement:f,key:s[s.length-1],path:s,branch:i,...n,message:p}}function*Ji(n,t,e,r){hc(n)||(n=[n]);for(const s of n){const i=dc(s,t,e,r);i&&(yield i)}}function*di(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:a=!1}=e,f={path:r,branch:s,mask:a};i&&(n=t.coercer(n,f));let p="valid";for(const x of t.validator(n,f))x.explanation=e.message,p="not_valid",yield[x,void 0];for(let[x,I,M]of t.entries(n,f)){const k=di(I,M,{path:x===void 0?r:[...r,x],branch:x===void 0?s:[...s,I],coerce:i,mask:a,message:e.message});for(const B of k)B[0]?(p=B[0].refinement!=null?"not_refined":"not_valid",yield[B[0],void 0]):i&&(I=B[1],x===void 0?n=I:n instanceof Map?n.set(x,I):n instanceof Set?n.add(I):Sr(n)&&(I!==void 0||x in n)&&(n[x]=I))}if(p!=="not_valid")for(const x of t.refiner(n,f))x.explanation=e.message,p="not_refined",yield[x,void 0];p==="valid"&&(yield[void 0,n])}let Be=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:a=p=>p,entries:f=function*(){}}=t;this.type=e,this.schema=r,this.entries=f,this.coercer=a,s?this.validator=(p,x)=>{const I=s(p,x);return Ji(I,x,this,p)}:this.validator=()=>[],i?this.refiner=(p,x)=>{const I=i(p,x);return Ji(I,x,this,p)}:this.refiner=()=>[]}assert(t,e){return pc(t,this,e)}create(t,e){return Q(t,this,e)}is(t){return Zs(t,this)}mask(t,e){return gc(t,this,e)}validate(t,e={}){return Br(t,this,e)}};function pc(n,t,e){const r=Br(n,t,{message:e});if(r[0])throw r[0]}function Q(n,t,e){const r=Br(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function gc(n,t,e){const r=Br(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Zs(n,t){return!Br(n,t)[0]}function Br(n,t,e={}){const r=di(n,t,e),s=lc(r);return s[0]?[new fc(s[0],function*(){for(const a of r)a[0]&&(yield a[0])}),void 0]:[void 0,s[1]]}function We(n,t){return new Be({type:n,schema:null,validator:t})}function mc(){return We("any",()=>!0)}function et(n){return new Be({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ve(t)}`}})}function Se(){return We("boolean",n=>typeof n=="boolean")}function pi(n){return We("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${ve(t)}`)}function kt(n){const t=ve(n),e=typeof n;return new Be({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${ve(r)}`}})}function yc(){return We("never",()=>!1)}function rt(n){return new Be({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function z(){return We("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${ve(n)}`)}function at(n){return new Be({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ys(n,t){return new Be({type:"record",schema:null,*entries(e){if(Sr(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Gr(e)||`Expected an object, but received: ${ve(e)}`},coercer(e){return Gr(e)?{...e}:e}})}function X(){return We("string",n=>typeof n=="string"||`Expected a string, but received: ${ve(n)}`)}function gi(n){const t=yc();return new Be({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${ve(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Z(n){const t=Object.keys(n);return new Be({type:"type",schema:n,*entries(e){if(Sr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Gr(e)||`Expected an object, but received: ${ve(e)}`},coercer(e){return Gr(e)?{...e}:e}})}function he(n){const t=n.map(e=>e.type).join(" | ");return new Be({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,a]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return a}return e},validator(e,r){const s=[];for(const i of n){const[...a]=di(e,i,r),[f]=a;if(f[0])for(const[p]of a)p&&s.push(p);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ve(e)}`,...s]}})}function lr(){return We("unknown",()=>!0)}function _r(n,t,e){return new Be({...n,coercer:(r,s)=>Zs(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Ur,wc=new Uint8Array(16);function Xs(){if(!Ur&&(Ur=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ur))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ur(wc)}const bc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function tn(n){return typeof n=="string"&&bc.test(n)}var ne=[];for(var On=0;On<256;++On)ne.push((On+256).toString(16).substr(1));function en(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ne[n[t+0]]+ne[n[t+1]]+ne[n[t+2]]+ne[n[t+3]]+"-"+ne[n[t+4]]+ne[n[t+5]]+"-"+ne[n[t+6]]+ne[n[t+7]]+"-"+ne[n[t+8]]+ne[n[t+9]]+"-"+ne[n[t+10]]+ne[n[t+11]]+ne[n[t+12]]+ne[n[t+13]]+ne[n[t+14]]+ne[n[t+15]]).toLowerCase();if(!tn(e))throw TypeError("Stringified UUID is invalid");return e}var Qi,qn,Pn=0,Dn=0;function vc(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||Qi,a=n.clockseq!==void 0?n.clockseq:qn;if(i==null||a==null){var f=n.random||(n.rng||Xs)();i==null&&(i=Qi=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),a==null&&(a=qn=(f[6]<<8|f[7])&16383)}var p=n.msecs!==void 0?n.msecs:Date.now(),x=n.nsecs!==void 0?n.nsecs:Dn+1,I=p-Pn+(x-Dn)/1e4;if(I<0&&n.clockseq===void 0&&(a=a+1&16383),(I<0||p>Pn)&&n.nsecs===void 0&&(x=0),x>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Pn=p,Dn=x,qn=a,p+=122192928e5;var M=((p&268435455)*1e4+x)%4294967296;s[r++]=M>>>24&255,s[r++]=M>>>16&255,s[r++]=M>>>8&255,s[r++]=M&255;var k=p/4294967296*1e4&268435455;s[r++]=k>>>8&255,s[r++]=k&255,s[r++]=k>>>24&15|16,s[r++]=k>>>16&255,s[r++]=a>>>8|128,s[r++]=a&255;for(var B=0;B<6;++B)s[r+B]=i[B];return t||en(s)}function Js(n){if(!tn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function xc(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Ec="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Sc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Qs(n,t,e){function r(s,i,a,f){if(typeof s=="string"&&(s=xc(s)),typeof i=="string"&&(i=Js(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+s.length);if(p.set(i),p.set(s,i.length),p=e(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,a){f=f||0;for(var x=0;x<16;++x)a[f+x]=p[x];return a}return en(p)}try{r.name=n}catch{}return r.DNS=Ec,r.URL=Sc,r}function Bc(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return _c(Ac(Ic(n),n.length*8))}function _c(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,a=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(a)}return t}function to(n){return(n+64>>>9<<4)+14+1}function Ac(n,t){n[t>>5]|=128<<t%32,n[to(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,a=0;a<n.length;a+=16){var f=e,p=r,x=s,I=i;e=ae(e,r,s,i,n[a],7,-680876936),i=ae(i,e,r,s,n[a+1],12,-389564586),s=ae(s,i,e,r,n[a+2],17,606105819),r=ae(r,s,i,e,n[a+3],22,-1044525330),e=ae(e,r,s,i,n[a+4],7,-176418897),i=ae(i,e,r,s,n[a+5],12,1200080426),s=ae(s,i,e,r,n[a+6],17,-1473231341),r=ae(r,s,i,e,n[a+7],22,-45705983),e=ae(e,r,s,i,n[a+8],7,1770035416),i=ae(i,e,r,s,n[a+9],12,-1958414417),s=ae(s,i,e,r,n[a+10],17,-42063),r=ae(r,s,i,e,n[a+11],22,-1990404162),e=ae(e,r,s,i,n[a+12],7,1804603682),i=ae(i,e,r,s,n[a+13],12,-40341101),s=ae(s,i,e,r,n[a+14],17,-1502002290),r=ae(r,s,i,e,n[a+15],22,1236535329),e=ce(e,r,s,i,n[a+1],5,-165796510),i=ce(i,e,r,s,n[a+6],9,-1069501632),s=ce(s,i,e,r,n[a+11],14,643717713),r=ce(r,s,i,e,n[a],20,-373897302),e=ce(e,r,s,i,n[a+5],5,-701558691),i=ce(i,e,r,s,n[a+10],9,38016083),s=ce(s,i,e,r,n[a+15],14,-660478335),r=ce(r,s,i,e,n[a+4],20,-405537848),e=ce(e,r,s,i,n[a+9],5,568446438),i=ce(i,e,r,s,n[a+14],9,-1019803690),s=ce(s,i,e,r,n[a+3],14,-187363961),r=ce(r,s,i,e,n[a+8],20,1163531501),e=ce(e,r,s,i,n[a+13],5,-1444681467),i=ce(i,e,r,s,n[a+2],9,-51403784),s=ce(s,i,e,r,n[a+7],14,1735328473),r=ce(r,s,i,e,n[a+12],20,-1926607734),e=ue(e,r,s,i,n[a+5],4,-378558),i=ue(i,e,r,s,n[a+8],11,-2022574463),s=ue(s,i,e,r,n[a+11],16,1839030562),r=ue(r,s,i,e,n[a+14],23,-35309556),e=ue(e,r,s,i,n[a+1],4,-1530992060),i=ue(i,e,r,s,n[a+4],11,1272893353),s=ue(s,i,e,r,n[a+7],16,-155497632),r=ue(r,s,i,e,n[a+10],23,-1094730640),e=ue(e,r,s,i,n[a+13],4,681279174),i=ue(i,e,r,s,n[a],11,-358537222),s=ue(s,i,e,r,n[a+3],16,-722521979),r=ue(r,s,i,e,n[a+6],23,76029189),e=ue(e,r,s,i,n[a+9],4,-640364487),i=ue(i,e,r,s,n[a+12],11,-421815835),s=ue(s,i,e,r,n[a+15],16,530742520),r=ue(r,s,i,e,n[a+2],23,-995338651),e=fe(e,r,s,i,n[a],6,-198630844),i=fe(i,e,r,s,n[a+7],10,1126891415),s=fe(s,i,e,r,n[a+14],15,-1416354905),r=fe(r,s,i,e,n[a+5],21,-57434055),e=fe(e,r,s,i,n[a+12],6,1700485571),i=fe(i,e,r,s,n[a+3],10,-1894986606),s=fe(s,i,e,r,n[a+10],15,-1051523),r=fe(r,s,i,e,n[a+1],21,-2054922799),e=fe(e,r,s,i,n[a+8],6,1873313359),i=fe(i,e,r,s,n[a+15],10,-30611744),s=fe(s,i,e,r,n[a+6],15,-1560198380),r=fe(r,s,i,e,n[a+13],21,1309151649),e=fe(e,r,s,i,n[a+4],6,-145523070),i=fe(i,e,r,s,n[a+11],10,-1120210379),s=fe(s,i,e,r,n[a+2],15,718787259),r=fe(r,s,i,e,n[a+9],21,-343485551),e=qe(e,f),r=qe(r,p),s=qe(s,x),i=qe(i,I)}return[e,r,s,i]}function Ic(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(to(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function qe(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function kc(n,t){return n<<t|n>>>32-t}function rn(n,t,e,r,s,i){return qe(kc(qe(qe(t,n),qe(r,i)),s),e)}function ae(n,t,e,r,s,i,a){return rn(t&e|~t&r,n,t,s,i,a)}function ce(n,t,e,r,s,i,a){return rn(t&r|e&~r,n,t,s,i,a)}function ue(n,t,e,r,s,i,a){return rn(t^e^r,n,t,s,i,a)}function fe(n,t,e,r,s,i,a){return rn(e^(t|~r),n,t,s,i,a)}var Rc=Qs("v3",48,Bc);function Mc(n,t,e){n=n||{};var r=n.random||(n.rng||Xs)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return en(r)}function Tc(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function zn(n,t){return n<<t|n>>>32-t}function Cc(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,a=Math.ceil(i/16),f=new Array(a),p=0;p<a;++p){for(var x=new Uint32Array(16),I=0;I<16;++I)x[I]=n[p*64+I*4]<<24|n[p*64+I*4+1]<<16|n[p*64+I*4+2]<<8|n[p*64+I*4+3];f[p]=x}f[a-1][14]=(n.length-1)*8/Math.pow(2,32),f[a-1][14]=Math.floor(f[a-1][14]),f[a-1][15]=(n.length-1)*8&4294967295;for(var M=0;M<a;++M){for(var k=new Uint32Array(80),B=0;B<16;++B)k[B]=f[M][B];for(var R=16;R<80;++R)k[R]=zn(k[R-3]^k[R-8]^k[R-14]^k[R-16],1);for(var T=e[0],U=e[1],P=e[2],W=e[3],K=e[4],J=0;J<80;++J){var Y=Math.floor(J/20),it=zn(T,5)+Tc(Y,U,P,W)+K+t[Y]+k[J]>>>0;K=W,W=P,P=zn(U,30)>>>0,U=T,T=it}e[0]=e[0]+T>>>0,e[1]=e[1]+U>>>0,e[2]=e[2]+P>>>0,e[3]=e[3]+W>>>0,e[4]=e[4]+K>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Lc=Qs("v5",80,Cc);const Uc="00000000-0000-0000-0000-000000000000";function Fc(n){if(!tn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Nc=Object.freeze(Object.defineProperty({__proto__:null,NIL:Uc,parse:Js,stringify:en,v1:vc,v3:Rc,v4:Mc,v5:Lc,validate:tn,version:Fc},Symbol.toStringTag,{value:"Module"})),eo=ii(Nc);var Kn,ts;function Oc(){if(ts)return Kn;ts=1;const n=eo.v4;return Kn=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const a=typeof i.version=="number"?i.version:2;if(a!==1&&a!==2)throw new TypeError(a+" must be 1 or 2");const f={method:e};if(a===2&&(f.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");f.params=r}if(typeof s>"u"){const p=typeof i.generator=="function"?i.generator:function(){return n()};f.id=p(f,i)}else a===2&&s===null?i.notificationIdNull&&(f.id=null):f.id=s;return f},Kn}var $n,es;function qc(){if(es)return $n;es=1;const n=eo.v4,t=Oc(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return $n=e,e.prototype.request=function(r,s,i,a){const f=this;let p=null;const x=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&x)throw new TypeError("JSON-RPC 1.0 does not support batching");if(x||!x&&r&&typeof r=="object"&&typeof s=="function")a=s,p=r;else{typeof i=="function"&&(a=i,i=void 0);const k=typeof a=="function";try{p=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(B){if(k)return a(B);throw B}if(!k)return p}let M;try{M=JSON.stringify(p,this.options.replacer)}catch(k){return a(k)}return this.callServer(M,function(k,B){f._parseResponse(k,B,a)}),p},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s)return i();let a;try{a=JSON.parse(s,this.options.reviver)}catch(f){return i(f)}if(i.length===3)if(Array.isArray(a)){const f=function(x){return typeof x.error<"u"},p=function(x){return!f(x)};return i(null,a.filter(f),a.filter(p))}else return i(null,a.error,a.result);i(null,a)},$n}var Pc=qc();const Dc=Xr(Pc);var Hn={exports:{}},rs;function zc(){return rs||(rs=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(p,x,I){this.fn=p,this.context=x,this.once=I||!1}function i(p,x,I,M,k){if(typeof I!="function")throw new TypeError("The listener must be a function");var B=new s(I,M||p,k),R=e?e+x:x;return p._events[R]?p._events[R].fn?p._events[R]=[p._events[R],B]:p._events[R].push(B):(p._events[R]=B,p._eventsCount++),p}function a(p,x){--p._eventsCount===0?p._events=new r:delete p._events[x]}function f(){this._events=new r,this._eventsCount=0}f.prototype.eventNames=function(){var x=[],I,M;if(this._eventsCount===0)return x;for(M in I=this._events)t.call(I,M)&&x.push(e?M.slice(1):M);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(I)):x},f.prototype.listeners=function(x){var I=e?e+x:x,M=this._events[I];if(!M)return[];if(M.fn)return[M.fn];for(var k=0,B=M.length,R=new Array(B);k<B;k++)R[k]=M[k].fn;return R},f.prototype.listenerCount=function(x){var I=e?e+x:x,M=this._events[I];return M?M.fn?1:M.length:0},f.prototype.emit=function(x,I,M,k,B,R){var T=e?e+x:x;if(!this._events[T])return!1;var U=this._events[T],P=arguments.length,W,K;if(U.fn){switch(U.once&&this.removeListener(x,U.fn,void 0,!0),P){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,I),!0;case 3:return U.fn.call(U.context,I,M),!0;case 4:return U.fn.call(U.context,I,M,k),!0;case 5:return U.fn.call(U.context,I,M,k,B),!0;case 6:return U.fn.call(U.context,I,M,k,B,R),!0}for(K=1,W=new Array(P-1);K<P;K++)W[K-1]=arguments[K];U.fn.apply(U.context,W)}else{var J=U.length,Y;for(K=0;K<J;K++)switch(U[K].once&&this.removeListener(x,U[K].fn,void 0,!0),P){case 1:U[K].fn.call(U[K].context);break;case 2:U[K].fn.call(U[K].context,I);break;case 3:U[K].fn.call(U[K].context,I,M);break;case 4:U[K].fn.call(U[K].context,I,M,k);break;default:if(!W)for(Y=1,W=new Array(P-1);Y<P;Y++)W[Y-1]=arguments[Y];U[K].fn.apply(U[K].context,W)}}return!0},f.prototype.on=function(x,I,M){return i(this,x,I,M,!1)},f.prototype.once=function(x,I,M){return i(this,x,I,M,!0)},f.prototype.removeListener=function(x,I,M,k){var B=e?e+x:x;if(!this._events[B])return this;if(!I)return a(this,B),this;var R=this._events[B];if(R.fn)R.fn===I&&(!k||R.once)&&(!M||R.context===M)&&a(this,B);else{for(var T=0,U=[],P=R.length;T<P;T++)(R[T].fn!==I||k&&!R[T].once||M&&R[T].context!==M)&&U.push(R[T]);U.length?this._events[B]=U.length===1?U[0]:U:a(this,B)}return this},f.prototype.removeAllListeners=function(x){var I;return x?(I=e?e+x:x,this._events[I]&&a(this,I)):(this._events=new r,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=e,f.EventEmitter=f,n.exports=f})(Hn)),Hn.exports}var Kc=zc();const ro=Xr(Kc);var $c=class extends ro{socket;constructor(n,t,e){super(),this.socket=new window.WebSocket(n,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function Hc(n,t){return new $c(n,t)}var Vc=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},jc=class extends ro{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...a}={},f,p){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=f||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),p?this.dataPack=p:this.dataPack=new Vc,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const a=this.generate_request_id(n,t),f={jsonrpc:"2.0",method:n,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(f),r,p=>{if(p)return i(p);this.queue[a]={promise:[s,i]},e&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=gt.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval)))})}};class no extends vs{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,ws(t);const r=oi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),ar(i)}update(t){return Pr(this),this.iHash.update(t),this}digestInto(t){Pr(this),je(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:a,outputLen:f}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=a,t.outputLen=f,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const io=(n,t,e)=>new no(n,t).update(e).digest();io.create=(n,t)=>new no(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ns=(n,t)=>(n+(n>=0?t:-t)/so)/t;function Gc(n,t,e){const[[r,s],[i,a]]=t,f=ns(a*n,e),p=ns(-s*n,e);let x=n-f*r-p*i,I=-f*s-p*a;const M=x<Me,k=I<Me;M&&(x=-x),k&&(I=-I);const B=vr(Math.ceil(Is(e)/2))+sr;if(x<Me||x>=B||I<Me||I>=B)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:M,k1:x,k2neg:k,k2:I}}function Qn(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Vn(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return Ve(e.lowS,"lowS"),Ve(e.prehash,"prehash"),e.format!==void 0&&Qn(e.format),e}class Wc extends Error{constructor(t=""){super(t)}}const Ie={Err:Wc,_tlv:{encode:(n,t)=>{const{Err:e}=Ie;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=Cr(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Cr(s.length/2|128):"";return Cr(n)+i+s+t},decode(n,t){const{Err:e}=Ie;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let a=0;if(!i)a=s;else{const p=s&127;if(!p)throw new e("tlv.decode(long): indefinite length not supported");if(p>4)throw new e("tlv.decode(long): byte length is too big");const x=t.subarray(r,r+p);if(x.length!==p)throw new e("tlv.decode: length bytes not complete");if(x[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const I of x)a=a<<8|I;if(r+=p,a<128)throw new e("tlv.decode(long): not minimal encoding")}const f=t.subarray(r,r+a);if(f.length!==a)throw new e("tlv.decode: wrong value length");return{v:f,l:t.subarray(r+a)}}},_int:{encode(n){const{Err:t}=Ie;if(n<Me)throw new t("integer: negative integers are not allowed");let e=Cr(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Ie;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Jr(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Ie,s=Ft("signature",n),{v:i,l:a}=r.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:f,l:p}=r.decode(2,i),{v:x,l:I}=r.decode(2,p);if(I.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(f),s:e.decode(x)}},hexFromSig(n){const{_tlv:t,_int:e}=Ie,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},Me=BigInt(0),sr=BigInt(1),so=BigInt(2),Fr=BigInt(3),Zc=BigInt(4);function rr(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=Ft("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Yc(n,t={}){const e=$s("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:a,n:f}=i;xr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:p}=t;if(p&&(!r.is0(i.a)||typeof p.beta!="bigint"||!Array.isArray(p.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const x=ao(r,s);function I(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function M(V,m,o){const{x:l,y:g}=m.toAffine(),v=r.toBytes(l);if(Ve(o,"isCompressed"),o){I();const S=!r.isOdd(g);return Ee(oo(S),v)}else return Ee(Uint8Array.of(4),v,r.toBytes(g))}function k(V){be(V,void 0,"Point");const{publicKey:m,publicKeyUncompressed:o}=x,l=V.length,g=V[0],v=V.subarray(1);if(l===m&&(g===2||g===3)){const S=r.fromBytes(v);if(!r.isValid(S))throw new Error("bad point: is not on curve, wrong x");const A=T(S);let L;try{L=r.sqrt(A)}catch(u){const w=u instanceof Error?": "+u.message:"";throw new Error("bad point: is not on curve, sqrt error"+w)}I();const b=r.isOdd(L);return(g&1)===1!==b&&(L=r.neg(L)),{x:S,y:L}}else if(l===o&&g===4){const S=r.BYTES,A=r.fromBytes(v.subarray(0,S)),L=r.fromBytes(v.subarray(S,S*2));if(!U(A,L))throw new Error("bad point: is not on curve");return{x:A,y:L}}else throw new Error(`bad point: got length ${l}, expected compressed=${m} or uncompressed=${o}`)}const B=t.toBytes||M,R=t.fromBytes||k;function T(V){const m=r.sqr(V),o=r.mul(m,V);return r.add(r.add(o,r.mul(V,i.a)),i.b)}function U(V,m){const o=r.sqr(m),l=T(V);return r.eql(o,l)}if(!U(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const P=r.mul(r.pow(i.a,Fr),Zc),W=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(P,W)))throw new Error("bad curve params: a or b");function K(V,m,o=!1){if(!r.isValid(m)||o&&r.is0(m))throw new Error(`bad point coordinate ${V}`);return m}function J(V){if(!(V instanceof F))throw new Error("ProjectivePoint expected")}function Y(V){if(!p||!p.basises)throw new Error("no endo");return Gc(V,p.basises,s.ORDER)}const it=zr((V,m)=>{const{X:o,Y:l,Z:g}=V;if(r.eql(g,r.ONE))return{x:o,y:l};const v=V.is0();m==null&&(m=v?r.ONE:r.inv(g));const S=r.mul(o,m),A=r.mul(l,m),L=r.mul(g,m);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(L,r.ONE))throw new Error("invZ was invalid");return{x:S,y:A}}),ft=zr(V=>{if(V.is0()){if(t.allowInfinityPoint&&!r.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:m,y:o}=V.toAffine();if(!r.isValid(m)||!r.isValid(o))throw new Error("bad point: x or y not field elements");if(!U(m,o))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ot(V,m,o,l,g){return o=new F(r.mul(o.X,V),o.Y,o.Z),m=Kr(l,m),o=Kr(g,o),m.add(o)}class F{constructor(m,o,l){this.X=K("x",m),this.Y=K("y",o,!0),this.Z=K("z",l),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){const{x:o,y:l}=m||{};if(!m||!r.isValid(o)||!r.isValid(l))throw new Error("invalid affine point");if(m instanceof F)throw new Error("projective point not allowed");return r.is0(o)&&r.is0(l)?F.ZERO:new F(o,l,r.ONE)}static fromBytes(m){const o=F.fromAffine(R(be(m,void 0,"point")));return o.assertValidity(),o}static fromHex(m){return F.fromBytes(Ft("pointHex",m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,o=!0){return $.createCache(this,m),o||this.multiply(Fr),this}assertValidity(){ft(this)}hasEvenY(){const{y:m}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(m)}equals(m){J(m);const{X:o,Y:l,Z:g}=this,{X:v,Y:S,Z:A}=m,L=r.eql(r.mul(o,A),r.mul(v,g)),b=r.eql(r.mul(l,A),r.mul(S,g));return L&&b}negate(){return new F(this.X,r.neg(this.Y),this.Z)}double(){const{a:m,b:o}=i,l=r.mul(o,Fr),{X:g,Y:v,Z:S}=this;let A=r.ZERO,L=r.ZERO,b=r.ZERO,c=r.mul(g,g),u=r.mul(v,v),w=r.mul(S,S),_=r.mul(g,v);return _=r.add(_,_),b=r.mul(g,S),b=r.add(b,b),A=r.mul(m,b),L=r.mul(l,w),L=r.add(A,L),A=r.sub(u,L),L=r.add(u,L),L=r.mul(A,L),A=r.mul(_,A),b=r.mul(l,b),w=r.mul(m,w),_=r.sub(c,w),_=r.mul(m,_),_=r.add(_,b),b=r.add(c,c),c=r.add(b,c),c=r.add(c,w),c=r.mul(c,_),L=r.add(L,c),w=r.mul(v,S),w=r.add(w,w),c=r.mul(w,_),A=r.sub(A,c),b=r.mul(w,u),b=r.add(b,b),b=r.add(b,b),new F(A,L,b)}add(m){J(m);const{X:o,Y:l,Z:g}=this,{X:v,Y:S,Z:A}=m;let L=r.ZERO,b=r.ZERO,c=r.ZERO;const u=i.a,w=r.mul(i.b,Fr);let _=r.mul(o,v),q=r.mul(l,S),G=r.mul(g,A),tt=r.add(o,l),nt=r.add(v,S);tt=r.mul(tt,nt),nt=r.add(_,q),tt=r.sub(tt,nt),nt=r.add(o,g);let yt=r.add(v,A);return nt=r.mul(nt,yt),yt=r.add(_,G),nt=r.sub(nt,yt),yt=r.add(l,g),L=r.add(S,A),yt=r.mul(yt,L),L=r.add(q,G),yt=r.sub(yt,L),c=r.mul(u,nt),L=r.mul(w,G),c=r.add(L,c),L=r.sub(q,c),c=r.add(q,c),b=r.mul(L,c),q=r.add(_,_),q=r.add(q,_),G=r.mul(u,G),nt=r.mul(w,nt),q=r.add(q,G),G=r.sub(_,G),G=r.mul(u,G),nt=r.add(nt,G),_=r.mul(q,nt),b=r.add(b,_),_=r.mul(yt,nt),L=r.mul(tt,L),L=r.sub(L,_),_=r.mul(tt,q),c=r.mul(yt,c),c=r.add(c,_),new F(L,b,c)}subtract(m){return this.add(m.negate())}is0(){return this.equals(F.ZERO)}multiply(m){const{endo:o}=t;if(!s.isValidNot0(m))throw new Error("invalid scalar: out of range");let l,g;const v=S=>$.cached(this,S,A=>$e(F,A));if(o){const{k1neg:S,k1:A,k2neg:L,k2:b}=Y(m),{p:c,f:u}=v(A),{p:w,f:_}=v(b);g=u.add(_),l=ot(o.beta,c,w,S,L)}else{const{p:S,f:A}=v(m);l=S,g=A}return $e(F,[l,g])[0]}multiplyUnsafe(m){const{endo:o}=t,l=this;if(!s.isValid(m))throw new Error("invalid scalar: out of range");if(m===Me||l.is0())return F.ZERO;if(m===sr)return l;if($.hasCache(this))return this.multiply(m);if(o){const{k1neg:g,k1:v,k2neg:S,k2:A}=Y(m),{p1:L,p2:b}=fa(F,l,v,A);return ot(o.beta,L,b,g,S)}else return $.unsafe(l,m)}multiplyAndAddUnsafe(m,o,l){const g=this.multiplyUnsafe(o).add(m.multiplyUnsafe(l));return g.is0()?void 0:g}toAffine(m){return it(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return a===sr?!0:m?m(F,this):$.unsafe(this,f).is0()}clearCofactor(){const{clearCofactor:m}=t;return a===sr?this:m?m(F,this):this.multiplyUnsafe(a)}isSmallOrder(){return this.multiplyUnsafe(a).is0()}toBytes(m=!0){return Ve(m,"isCompressed"),this.assertValidity(),B(F,this,m)}toHex(m=!0){return He(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(m=!0){return this.toBytes(m)}_setWindowSize(m){this.precompute(m)}static normalizeZ(m){return $e(F,m)}static msm(m,o){return Ks(F,s,m,o)}static fromPrivateKey(m){return F.BASE.multiply(rr(s,m))}}F.BASE=new F(i.Gx,i.Gy,r.ONE),F.ZERO=new F(r.ZERO,r.ONE,r.ZERO),F.Fp=r,F.Fn=s;const O=s.BITS,$=new zs(F,t.endo?Math.ceil(O/2):O);return F.BASE.precompute(8),F}function oo(n){return Uint8Array.of(n?2:3)}function ao(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Xc(n,t={}){const{Fn:e}=n,r=t.randomBytes||ai,s=Object.assign(ao(n.Fp,e),{seed:qs(e.ORDER)});function i(B){try{return!!rr(e,B)}catch{return!1}}function a(B,R){const{publicKey:T,publicKeyUncompressed:U}=s;try{const P=B.length;return R===!0&&P!==T||R===!1&&P!==U?!1:!!n.fromBytes(B)}catch{return!1}}function f(B=r(s.seed)){return aa(be(B,s.seed,"seed"),e.ORDER)}function p(B,R=!0){return n.BASE.multiply(rr(e,B)).toBytes(R)}function x(B){const R=f(B);return{secretKey:R,publicKey:p(R)}}function I(B){if(typeof B=="bigint")return!1;if(B instanceof n)return!0;const{secretKey:R,publicKey:T,publicKeyUncompressed:U}=s;if(e.allowedLengths||R===T)return;const P=Ft("key",B).length;return P===T||P===U}function M(B,R,T=!0){if(I(B)===!0)throw new Error("first arg must be private key");if(I(R)===!1)throw new Error("second arg must be public key");const U=rr(e,B);return n.fromHex(R).multiply(U).toBytes(T)}return Object.freeze({getPublicKey:p,getSharedSecret:M,keygen:x,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:a,randomSecretKey:f,isValidPrivateKey:i,randomPrivateKey:f,normPrivateKeyToScalar:B=>rr(e,B),precompute(B=8,R=n.BASE){return R.precompute(B,!1)}},lengths:s})}function Jc(n,t,e={}){ws(t),xr(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||ai,s=e.hmac||((o,...l)=>io(t,o,Ee(...l))),{Fp:i,Fn:a}=n,{ORDER:f,BITS:p}=a,{keygen:x,getPublicKey:I,getSharedSecret:M,utils:k,lengths:B}=Xc(n,e),R={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},T="compact";function U(o){const l=f>>sr;return o>l}function P(o,l){if(!a.isValidNot0(l))throw new Error(`invalid signature ${o}: out of range 1..Point.Fn.ORDER`);return l}function W(o,l){Qn(l);const g=B.signature,v=l==="compact"?g:l==="recovered"?g+1:void 0;return be(o,v,`${l} signature`)}class K{constructor(l,g,v){this.r=P("r",l),this.s=P("s",g),v!=null&&(this.recovery=v),Object.freeze(this)}static fromBytes(l,g=T){W(l,g);let v;if(g==="der"){const{r:b,s:c}=Ie.toSig(be(l));return new K(b,c)}g==="recovered"&&(v=l[0],g="compact",l=l.subarray(1));const S=a.BYTES,A=l.subarray(0,S),L=l.subarray(S,S*2);return new K(a.fromBytes(A),a.fromBytes(L),v)}static fromHex(l,g){return this.fromBytes(Dr(l),g)}addRecoveryBit(l){return new K(this.r,this.s,l)}recoverPublicKey(l){const g=i.ORDER,{r:v,s:S,recovery:A}=this;if(A==null||![0,1,2,3].includes(A))throw new Error("recovery id invalid");if(f*so<g&&A>1)throw new Error("recovery id is ambiguous for h>1 curve");const b=A===2||A===3?v+f:v;if(!i.isValid(b))throw new Error("recovery id 2 or 3 invalid");const c=i.toBytes(b),u=n.fromBytes(Ee(oo((A&1)===0),c)),w=a.inv(b),_=Y(Ft("msgHash",l)),q=a.create(-_*w),G=a.create(S*w),tt=n.BASE.multiplyUnsafe(q).add(u.multiplyUnsafe(G));if(tt.is0())throw new Error("point at infinify");return tt.assertValidity(),tt}hasHighS(){return U(this.s)}toBytes(l=T){if(Qn(l),l==="der")return Dr(Ie.hexFromSig(this));const g=a.toBytes(this.r),v=a.toBytes(this.s);if(l==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ee(Uint8Array.of(this.recovery),g,v)}return Ee(g,v)}toHex(l){return He(this.toBytes(l))}assertValidity(){}static fromCompact(l){return K.fromBytes(Ft("sig",l),"compact")}static fromDER(l){return K.fromBytes(Ft("sig",l),"der")}normalizeS(){return this.hasHighS()?new K(this.r,a.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return He(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return He(this.toBytes("compact"))}}const J=e.bits2int||function(l){if(l.length>8192)throw new Error("input is too large");const g=Jr(l),v=l.length*8-p;return v>0?g>>BigInt(v):g},Y=e.bits2int_modN||function(l){return a.create(J(l))},it=vr(p);function ft(o){return Jn("num < 2^"+p,o,Me,it),a.toBytes(o)}function ot(o,l){return be(o,void 0,"message"),l?be(t(o),void 0,"prehashed message"):o}function F(o,l,g){if(["recovered","canonical"].some(q=>q in g))throw new Error("sign() legacy options not supported");const{lowS:v,prehash:S,extraEntropy:A}=Vn(g,R);o=ot(o,S);const L=Y(o),b=rr(a,l),c=[ft(b),ft(L)];if(A!=null&&A!==!1){const q=A===!0?r(B.secretKey):A;c.push(Ft("extraEntropy",q))}const u=Ee(...c),w=L;function _(q){const G=J(q);if(!a.isValidNot0(G))return;const tt=a.inv(G),nt=n.BASE.multiply(G).toAffine(),yt=a.create(nt.x);if(yt===Me)return;const wt=a.create(tt*a.create(w+yt*b));if(wt===Me)return;let vt=(nt.x===yt?0:2)|Number(nt.y&sr),pe=wt;return v&&U(wt)&&(pe=a.neg(wt),vt^=1),new K(yt,pe,vt)}return{seed:u,k2sig:_}}function O(o,l,g={}){o=Ft("message",o);const{seed:v,k2sig:S}=F(o,l,g);return Xo(t.outputLen,a.BYTES,s)(v,S)}function $(o){let l;const g=typeof o=="string"||br(o),v=!g&&o!==null&&typeof o=="object"&&typeof o.r=="bigint"&&typeof o.s=="bigint";if(!g&&!v)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(v)l=new K(o.r,o.s);else if(g){try{l=K.fromBytes(Ft("sig",o),"der")}catch(S){if(!(S instanceof Ie.Err))throw S}if(!l)try{l=K.fromBytes(Ft("sig",o),"compact")}catch{return!1}}return l||!1}function V(o,l,g,v={}){const{lowS:S,prehash:A,format:L}=Vn(v,R);if(g=Ft("publicKey",g),l=ot(Ft("message",l),A),"strict"in v)throw new Error("options.strict was renamed to lowS");const b=L===void 0?$(o):K.fromBytes(Ft("sig",o),L);if(b===!1)return!1;try{const c=n.fromBytes(g);if(S&&b.hasHighS())return!1;const{r:u,s:w}=b,_=Y(l),q=a.inv(w),G=a.create(_*q),tt=a.create(u*q),nt=n.BASE.multiplyUnsafe(G).add(c.multiplyUnsafe(tt));return nt.is0()?!1:a.create(nt.x)===u}catch{return!1}}function m(o,l,g={}){const{prehash:v}=Vn(g,R);return l=ot(l,v),K.fromBytes(o,"recovered").recoverPublicKey(l).toBytes()}return Object.freeze({keygen:x,getPublicKey:I,getSharedSecret:M,utils:k,lengths:B,Point:n,sign:O,verify:V,recoverPublicKey:m,Signature:K,hash:t})}function Qc(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(a=>Math.ceil(a/2)))):void 0;const s=Ge(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function tu(n){const{CURVE:t,curveOpts:e}=Qc(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function eu(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,Ns(e.Fn.ORDER,e.Fn.BITS))})}function ru(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=tu(n),i=Yc(t,e),a=Jc(i,r,s);return eu(n,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nu(n,t){const e=r=>ru({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mi={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},iu={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},is=BigInt(2);function su(n){const t=mi.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),f=BigInt(44),p=BigInt(88),x=n*n*n%t,I=x*x*n%t,M=Ut(I,e,t)*I%t,k=Ut(M,e,t)*I%t,B=Ut(k,is,t)*x%t,R=Ut(B,s,t)*B%t,T=Ut(R,i,t)*R%t,U=Ut(T,f,t)*T%t,P=Ut(U,p,t)*U%t,W=Ut(P,f,t)*T%t,K=Ut(W,e,t)*I%t,J=Ut(K,a,t)*R%t,Y=Ut(J,r,t)*x%t,it=Ut(Y,is,t);if(!ti.eql(ti.sqr(it),n))throw new Error("Cannot find square root");return it}const ti=Ge(mi.p,{sqrt:su}),ou=nu({...mi,Fp:ti,lowS:!0,endo:iu},Bs);Er.utils.randomPrivateKey;Er.getPublicKey;function ss(n){try{return Er.ExtendedPoint.fromHex(n),!0}catch{return!1}}const au=(n,t)=>Er.sign(n,t.slice(0,32)),cu=Er.verify,fr=n=>gt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?gt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):gt.Buffer.from(n);class uu{constructor(t){Object.assign(this,t)}encode(){return gt.Buffer.from(Nn.serialize(qr,this))}static decode(t){return Nn.deserialize(qr,this,t)}static decodeUnchecked(t){return Nn.deserializeUnchecked(qr,this,t)}}const qr=new Map;var co;const fu=32,Pe=32;function hu(n){return n._bn!==void 0}let os=1;class ut extends uu{constructor(t){if(super({}),this._bn=void 0,hu(t))this._bn=t._bn;else{if(typeof t=="string"){const e=ie.decode(t);if(e.length!=Pe)throw new Error("Invalid public key input");this._bn=new Vi(e)}else this._bn=new Vi(t);if(this._bn.byteLength()>Pe)throw new Error("Invalid public key input")}}static unique(){const t=new ut(os);return os+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return ie.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(gt.Buffer);if(t.length===Pe)return t;const e=gt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=gt.Buffer.concat([t.toBuffer(),gt.Buffer.from(e),r.toBuffer()]),i=Zi(s);return new ut(i)}static createProgramAddressSync(t,e){let r=gt.Buffer.alloc(0);t.forEach(function(i){if(i.length>fu)throw new TypeError("Max seed length exceeded");r=gt.Buffer.concat([r,fr(i)])}),r=gt.Buffer.concat([r,e.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=Zi(r);if(ss(s))throw new Error("Invalid seeds, address must fall off the curve");return new ut(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(gt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return ss(e.toBytes())}}co=ut;ut.default=new co("11111111111111111111111111111111");qr.set(ut,{kind:"struct",fields:[["_bn","u256"]]});new ut("BPFLoader1111111111111111111111111111111111");const or=1232,uo=127,fo=64;class ho extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ho.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class lo extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(lo.prototype,"name",{value:"TransactionExpiredTimeoutError"});class mr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(mr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Wr{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,a)=>{r.set(i.toBase58(),a)});const s=i=>{const a=r.get(i.toBase58());if(a===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return a};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(a=>s(a.pubkey)),data:i.data}))}}const mt=(n="publicKey")=>C.blob(32,n),nr=(n="string")=>{const t=C.struct([C.u32("length"),C.u32("lengthPadding"),C.blob(C.offset(C.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,a)=>e(i,a).chars.toString(),s.encode=(i,a,f)=>{const p={chars:gt.Buffer.from(i,"utf8")};return r(p,a,f)},s.alloc=i=>C.u32().span+C.u32().span+gt.Buffer.from(i,"utf8").length,s},lu=(n="authorized")=>C.struct([mt("staker"),mt("withdrawer")],n),du=(n="lockup")=>C.struct([C.ns64("unixTimestamp"),C.ns64("epoch"),mt("custodian")],n),pu=(n="voteInit")=>C.struct([mt("nodePubkey"),mt("authorizedVoter"),mt("authorizedWithdrawer"),C.u8("commission")],n),gu=(n="voteAuthorizeWithSeedArgs")=>C.struct([C.u32("voteAuthorizationType"),mt("currentAuthorityDerivedKeyOwnerPubkey"),nr("currentAuthorityDerivedKeySeed"),mt("newAuthorized")],n);function ge(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function me(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function te(n,t){if(!n)throw new Error(t||"Assertion failed")}class nn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=a=>{const f=a.toBase58();let p=r.get(f);return p===void 0&&(p={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(f,p)),p},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const a of t){s(a.programId).isInvoked=!0;for(const f of a.keys){const p=s(f.pubkey);p.isSigner||=f.isSigner,p.isWritable||=f.isWritable}}return new nn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];te(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,p])=>p.isSigner&&p.isWritable),r=t.filter(([,p])=>p.isSigner&&!p.isWritable),s=t.filter(([,p])=>!p.isSigner&&p.isWritable),i=t.filter(([,p])=>!p.isSigner&&!p.isWritable),a={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{te(e.length>0,"Expected at least one writable signer key");const[p]=e[0];te(p===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const f=[...e.map(([p])=>new ut(p)),...r.map(([p])=>new ut(p)),...s.map(([p])=>new ut(p)),...i.map(([p])=>new ut(p))];return[a,f]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&a.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,a=>!a.isSigner&&!a.isInvoked&&!a.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,a]of this.keyMetaMap.entries())if(e(a)){const f=new ut(i),p=t.findIndex(x=>x.equals(f));p>=0&&(te(p<256,"Max lookup table index exceeded"),r.push(p),s.push(f),this.keyMetaMap.delete(i))}return[r,s]}}const po="Reached end of buffer unexpectedly";function Re(n){if(n.length===0)throw new Error(po);return n.shift()}function ye(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(po);return n.splice(...t)}class De{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:ie.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Wr(this.staticAccountKeys)}static compile(t){const e=nn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),a=new Wr(s).compileInstructions(t.instructions).map(f=>({programIdIndex:f.programIdIndex,accounts:f.accountKeyIndexes,data:ie.encode(f.data)}));return new De({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:a})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];me(e,t);const r=this.instructions.map(M=>{const{accounts:k,programIdIndex:B}=M,R=Array.from(ie.decode(M.data));let T=[];me(T,k.length);let U=[];return me(U,R.length),{programIdIndex:B,keyIndicesCount:gt.Buffer.from(T),keyIndices:k,dataLength:gt.Buffer.from(U),data:R}});let s=[];me(s,r.length);let i=gt.Buffer.alloc(or);gt.Buffer.from(s).copy(i);let a=s.length;r.forEach(M=>{const B=C.struct([C.u8("programIdIndex"),C.blob(M.keyIndicesCount.length,"keyIndicesCount"),C.seq(C.u8("keyIndex"),M.keyIndices.length,"keyIndices"),C.blob(M.dataLength.length,"dataLength"),C.seq(C.u8("userdatum"),M.data.length,"data")]).encode(M,i,a);a+=B}),i=i.slice(0,a);const f=C.struct([C.blob(1,"numRequiredSignatures"),C.blob(1,"numReadonlySignedAccounts"),C.blob(1,"numReadonlyUnsignedAccounts"),C.blob(e.length,"keyCount"),C.seq(mt("key"),t,"keys"),mt("recentBlockhash")]),p={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(e),keys:this.accountKeys.map(M=>fr(M.toBytes())),recentBlockhash:ie.decode(this.recentBlockhash)};let x=gt.Buffer.alloc(2048);const I=f.encode(p,x);return i.copy(x,I),x.slice(0,I+i.length)}static from(t){let e=[...t];const r=Re(e);if(r!==(r&uo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Re(e),i=Re(e),a=ge(e);let f=[];for(let k=0;k<a;k++){const B=ye(e,0,Pe);f.push(new ut(gt.Buffer.from(B)))}const p=ye(e,0,Pe),x=ge(e);let I=[];for(let k=0;k<x;k++){const B=Re(e),R=ge(e),T=ye(e,0,R),U=ge(e),P=ye(e,0,U),W=ie.encode(gt.Buffer.from(P));I.push({programIdIndex:B,accounts:T,data:W})}const M={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:ie.encode(gt.Buffer.from(p)),accountKeys:f,instructions:I};return new De(M)}}class Zr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Wr(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((a,f)=>a+f.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,a=r-e-this.header.numReadonlyUnsignedAccounts;return s<a}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=nn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const I of i){const M=e.extractTableLookup(I);if(M!==void 0){const[k,{writable:B,readonly:R}]=M;r.push(k),s.writable.push(...B),s.readonly.push(...R)}}const[a,f]=e.getMessageComponents(),x=new Wr(f,s).compileInstructions(t.instructions);return new Zr({header:a,staticAccountKeys:f,recentBlockhash:t.recentBlockhash,compiledInstructions:x,addressTableLookups:r})}serialize(){const t=Array();me(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();me(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();me(i,this.addressTableLookups.length);const a=C.struct([C.u8("prefix"),C.struct([C.u8("numRequiredSignatures"),C.u8("numReadonlySignedAccounts"),C.u8("numReadonlyUnsignedAccounts")],"header"),C.blob(t.length,"staticAccountKeysLength"),C.seq(mt(),this.staticAccountKeys.length,"staticAccountKeys"),mt("recentBlockhash"),C.blob(r.length,"instructionsLength"),C.blob(e.length,"serializedInstructions"),C.blob(i.length,"addressTableLookupsLength"),C.blob(s.length,"serializedAddressTableLookups")]),f=new Uint8Array(or),x=a.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(I=>I.toBytes()),recentBlockhash:ie.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},f);return f.slice(0,x)}serializeInstructions(){let t=0;const e=new Uint8Array(or);for(const r of this.compiledInstructions){const s=Array();me(s,r.accountKeyIndexes.length);const i=Array();me(i,r.data.length);const a=C.struct([C.u8("programIdIndex"),C.blob(s.length,"encodedAccountKeyIndexesLength"),C.seq(C.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),C.blob(i.length,"encodedDataLength"),C.blob(r.data.length,"data")]);t+=a.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(or);for(const r of this.addressTableLookups){const s=Array();me(s,r.writableIndexes.length);const i=Array();me(i,r.readonlyIndexes.length);const a=C.struct([mt("accountKey"),C.blob(s.length,"encodedWritableIndexesLength"),C.seq(C.u8(),r.writableIndexes.length,"writableIndexes"),C.blob(i.length,"encodedReadonlyIndexesLength"),C.seq(C.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=a.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=Re(e),s=r&uo;te(r!==s,"Expected versioned message but received legacy message");const i=s;te(i===0,`Expected versioned message with version 0 but found version ${i}`);const a={numRequiredSignatures:Re(e),numReadonlySignedAccounts:Re(e),numReadonlyUnsignedAccounts:Re(e)},f=[],p=ge(e);for(let R=0;R<p;R++)f.push(new ut(ye(e,0,Pe)));const x=ie.encode(ye(e,0,Pe)),I=ge(e),M=[];for(let R=0;R<I;R++){const T=Re(e),U=ge(e),P=ye(e,0,U),W=ge(e),K=new Uint8Array(ye(e,0,W));M.push({programIdIndex:T,accountKeyIndexes:P,data:K})}const k=ge(e),B=[];for(let R=0;R<k;R++){const T=new ut(ye(e,0,Pe)),U=ge(e),P=ye(e,0,U),W=ge(e),K=ye(e,0,W);B.push({accountKey:T,writableIndexes:P,readonlyIndexes:K})}return new Zr({header:a,staticAccountKeys:f,recentBlockhash:x,compiledInstructions:M,addressTableLookups:B})}}let Ne=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const mu=gt.Buffer.alloc(fo).fill(0);class as{constructor(t){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Oe{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new as(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<e.length;T++)if(e[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);const s=[],i=[];e.forEach(T=>{T.keys.forEach(P=>{i.push({...P})});const U=T.programId.toString();s.includes(U)||s.push(U)}),s.forEach(T=>{i.push({pubkey:new ut(T),isSigner:!1,isWritable:!1})});const a=[];i.forEach(T=>{const U=T.pubkey.toString(),P=a.findIndex(W=>W.pubkey.toString()===U);P>-1?(a[P].isWritable=a[P].isWritable||T.isWritable,a[P].isSigner=a[P].isSigner||T.isSigner):a.push(T)}),a.sort(function(T,U){if(T.isSigner!==U.isSigner)return T.isSigner?-1:1;if(T.isWritable!==U.isWritable)return T.isWritable?-1:1;const P={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return T.pubkey.toBase58().localeCompare(U.pubkey.toBase58(),"en",P)});const f=a.findIndex(T=>T.pubkey.equals(r));if(f>-1){const[T]=a.splice(f,1);T.isSigner=!0,T.isWritable=!0,a.unshift(T)}else a.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const T of this.signatures){const U=a.findIndex(P=>P.pubkey.equals(T.publicKey));if(U>-1)a[U].isSigner||(a[U].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let p=0,x=0,I=0;const M=[],k=[];a.forEach(({pubkey:T,isSigner:U,isWritable:P})=>{U?(M.push(T.toString()),p+=1,P||(x+=1)):(k.push(T.toString()),P||(I+=1))});const B=M.concat(k),R=e.map(T=>{const{data:U,programId:P}=T;return{programIdIndex:B.indexOf(P.toString()),accounts:T.keys.map(W=>B.indexOf(W.pubkey.toString())),data:ie.encode(U)}});return R.forEach(T=>{te(T.programIdIndex>=0),T.accounts.forEach(U=>te(U>=0))}),new De({header:{numRequiredSignatures:p,numReadonlySignedAccounts:x,numReadonlyUnsignedAccounts:I},accountKeys:B,recentBlockhash:t,instructions:R})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const a=i.publicKey.toString();e.has(a)||(e.add(a),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=au(r,s.secretKey);this._addSignature(s.publicKey,fr(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){te(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=gt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):cu(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let a="Signature verification failed.";throw i.invalid&&(a+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(f=>f.toBase58()).join("`, `")}\`].`),i.missing&&(a+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(f=>f.toBase58()).join("`, `")}\`].`),new Error(a)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];me(r,e.length);const s=r.length+e.length*64+t.length,i=gt.Buffer.alloc(s);return te(e.length<256),gt.Buffer.from(r).copy(i,0),e.forEach(({signature:a},f)=>{a!==null&&(te(a.length===64,"signature has invalid length"),gt.Buffer.from(a).copy(i,r.length+f*64))}),t.copy(i,r.length+e.length*64),te(i.length<=or,`Transaction too large: ${i.length} > ${or}`),i}get keys(){return te(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return te(this.instructions.length===1),this.instructions[0].programId}get data(){return te(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ge(e);let s=[];for(let i=0;i<r;i++){const a=ye(e,0,fo);s.push(ie.encode(gt.Buffer.from(a)))}return Oe.populate(De.from(e),s)}static populate(t,e=[]){const r=new Oe;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const a={signature:s==ie.encode(mu)?null:ie.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(a)}),t.instructions.forEach(s=>{const i=s.accounts.map(a=>{const f=t.accountKeys[a];return{pubkey:f,isSigner:r.signatures.some(p=>p.publicKey.toString()===f.toString())||t.isAccountSigner(a),isWritable:t.isAccountWritable(a)}});r.instructions.push(new as({keys:i,programId:t.accountKeys[s.programIdIndex],data:ie.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const yu=160,wu=64,bu=yu/wu,vu=1e3/bu;new ut("SysvarC1ock11111111111111111111111111111111");new ut("SysvarEpochSchedu1e111111111111111111111111");new ut("Sysvar1nstructions1111111111111111111111111");new ut("SysvarRecentB1ockHashes11111111111111111111");new ut("SysvarRent111111111111111111111111111111111");new ut("SysvarRewards111111111111111111111111111111");new ut("SysvarS1otHashes111111111111111111111111111");new ut("SysvarS1otHistory11111111111111111111111111");new ut("SysvarStakeHistory1111111111111111111111111");class cs extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",a="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let f;switch(t){case"send":f=`Transaction ${e} resulted in an error. 
${r}. `+i+a;break;case"simulate":f=`Simulation failed. 
Message: ${r}. 
`+i+a;break;default:f=`Unknown action '${(p=>p)(t)}'`}super(f),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class st extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function er(n){return new Promise(t=>setTimeout(t,n))}const xu=C.nu64("lamportsPerSignature"),go=C.struct([C.u32("version"),C.u32("state"),mt("authorizedPubkey"),mt("nonce"),C.struct([xu],"feeCalculator")]);go.span;class yi{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=go.decode(fr(t),0);return new yi({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function hr(n){const t=C.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=uc();return s.decode=(a,f)=>{const p=e(a,f);return i.decode(p)},s.encode=(a,f,p)=>{const x=i.encode(a);return r(x,f,p)},s}Object.freeze({Create:{index:0,layout:C.struct([C.u32("instruction"),C.ns64("lamports"),C.ns64("space"),mt("programId")])},Assign:{index:1,layout:C.struct([C.u32("instruction"),mt("programId")])},Transfer:{index:2,layout:C.struct([C.u32("instruction"),hr("lamports")])},CreateWithSeed:{index:3,layout:C.struct([C.u32("instruction"),mt("base"),nr("seed"),C.ns64("lamports"),C.ns64("space"),mt("programId")])},AdvanceNonceAccount:{index:4,layout:C.struct([C.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:C.struct([C.u32("instruction"),mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:C.struct([C.u32("instruction"),mt("authorized")])},Allocate:{index:8,layout:C.struct([C.u32("instruction"),C.ns64("space")])},AllocateWithSeed:{index:9,layout:C.struct([C.u32("instruction"),mt("base"),nr("seed"),C.ns64("space"),mt("programId")])},AssignWithSeed:{index:10,layout:C.struct([C.u32("instruction"),mt("base"),nr("seed"),mt("programId")])},TransferWithSeed:{index:11,layout:C.struct([C.u32("instruction"),hr("lamports"),nr("seed"),mt("programId")])},UpgradeNonceAccount:{index:12,layout:C.struct([C.u32("instruction")])}});new ut("11111111111111111111111111111111");new ut("BPFLoader2111111111111111111111111111111111");function Eu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jn,us;function Su(){if(us)return jn;us=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,a,f,p,x,I,M;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(M=n.call(r),M==="[object Array]"){for(f="[",a=r.length-1,i=0;i<a;i++)f+=e(r[i],!0)+",";return a>-1&&(f+=e(r[i],!0)),f+"]"}else if(M==="[object Object]"){for(p=t(r).sort(),a=p.length,f="",i=0;i<a;)x=p[i],I=e(r[x],!1),I!==void 0&&(f&&(f+=","),f+=JSON.stringify(x)+":"+I),i++;return"{"+f+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return jn=function(r){var s=e(r,!1);if(s!==void 0)return""+s},jn}var Bu=Su(),fs=Eu(Bu);const gr=32;function Gn(n){let t=0;for(;n>1;)n/=2,t++;return t}function _u(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Au{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Gn(_u(t+gr+1))-Gn(gr)-1,r=this.getSlotsInEpoch(e),s=t-(r-gr);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*gr:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Gn(gr)):this.slotsPerEpoch}}var Iu=globalThis.fetch;class ku extends jc{constructor(t,e,r){const s=i=>{const a=Hc(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in a?this.underlyingSocket=a.socket:this.underlyingSocket=a,a};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Ru(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const hs=56;class ls{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ru(Mu,t),r=t.length-hs;te(r>=0,"lookup table is invalid"),te(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=C.struct([C.seq(mt(),s,"addresses")]).decode(t.slice(hs));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(a=>new ut(a))}}}const Mu={index:1,layout:C.struct([C.u32("typeIndex"),hr("deactivationSlot"),C.nu64("lastExtendedSlot"),C.u8("lastExtendedStartIndex"),C.u8(),C.seq(mt(),C.offset(C.u8(),-1),"authority")])},Tu=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Cu(n){const t=n.match(Tu);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,a=n.startsWith("https:")?"wss:":"ws:",f=s==null?null:parseInt(s.slice(1),10),p=f==null?"":`:${f+1}`;return`${a}//${r}${p}${i}`}const Rt=_r(pi(ut),X(),n=>new ut(n)),mo=gi([X(),kt("base64")]),wi=_r(pi(gt.Buffer),mo,n=>gt.Buffer.from(n[0],"base64")),Lu=30*1e3;function Uu(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Et(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function ds(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function yo(n){return he([Z({jsonrpc:kt("2.0"),id:X(),result:n}),Z({jsonrpc:kt("2.0"),id:X(),error:Z({code:lr(),message:X(),data:at(mc())})})])}const Fu=yo(lr());function pt(n){return _r(yo(n),Fu,t=>"error"in t?t:{...t,result:Q(t.result,n)})}function Nt(n){return pt(Z({context:Z({slot:z()}),value:n}))}function sn(n){return Z({context:Z({slot:z()}),value:n})}function Wn(n,t){return n===0?new Zr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:ie.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new De(t)}const Nu=Z({foundation:z(),foundationTerm:z(),initial:z(),taper:z(),terminal:z()}),Ou=pt(et(rt(Z({epoch:z(),effectiveSlot:z(),amount:z(),postBalance:z(),commission:at(rt(z()))})))),qu=et(Z({slot:z(),prioritizationFee:z()})),Pu=Z({total:z(),validator:z(),foundation:z(),epoch:z()}),Du=Z({epoch:z(),slotIndex:z(),slotsInEpoch:z(),absoluteSlot:z(),blockHeight:at(z()),transactionCount:at(z())}),zu=Z({slotsPerEpoch:z(),leaderScheduleSlotOffset:z(),warmup:Se(),firstNormalEpoch:z(),firstNormalSlot:z()}),Ku=Ys(X(),et(z())),Ze=rt(he([Z({}),X()])),$u=Z({err:Ze}),Hu=kt("receivedSignature"),Vu=Z({"solana-core":X(),"feature-set":at(z())}),ju=Z({program:X(),programId:Rt,parsed:lr()}),Gu=Z({programId:Rt,accounts:et(Rt),data:X()}),ps=Nt(Z({err:rt(he([Z({}),X()])),logs:rt(et(X())),accounts:at(rt(et(rt(Z({executable:Se(),owner:X(),lamports:z(),data:et(X()),rentEpoch:at(z())}))))),unitsConsumed:at(z()),returnData:at(rt(Z({programId:X(),data:gi([X(),kt("base64")])}))),innerInstructions:at(rt(et(Z({index:z(),instructions:et(he([ju,Gu]))}))))})),Wu=Nt(Z({byIdentity:Ys(X(),et(z())),range:Z({firstSlot:z(),lastSlot:z()})}));function Zu(n,t,e,r,s,i){const a=e||Iu;let f;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let p;return r&&(p=async(I,M)=>{const k=await new Promise((B,R)=>{try{r(I,M,(T,U)=>B([T,U]))}catch(T){R(T)}});return await a(...k)}),new Dc(async(I,M)=>{const k={method:"POST",body:I,agent:f,headers:Object.assign({"Content-Type":"application/json"},t||{},Yf)};try{let B=5,R,T=500;for(;p?R=await p(n,k):R=await a(n,k),!(R.status!==429||s===!0||(B-=1,B===0));)console.error(`Server responded with ${R.status} ${R.statusText}.  Retrying after ${T}ms delay...`),await er(T),T*=2;const U=await R.text();R.ok?M(null,U):M(new Error(`${R.status} ${R.statusText}: ${U}`))}catch(B){B instanceof Error&&M(B)}},{})}function Yu(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,a)=>{if(i){s(i);return}r(a)})})}function Xu(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,a)=>{if(i){r(i);return}e(a)})})}const Ju=pt(Nu),Qu=pt(Pu),tf=pt(qu),ef=pt(Du),rf=pt(zu),nf=pt(Ku),sf=pt(z()),of=Nt(Z({total:z(),circulating:z(),nonCirculating:z(),nonCirculatingAccounts:et(Rt)})),ei=Z({amount:X(),uiAmount:rt(z()),decimals:z(),uiAmountString:at(X())}),af=Nt(et(Z({address:Rt,amount:X(),uiAmount:rt(z()),decimals:z(),uiAmountString:at(X())}))),cf=Nt(et(Z({pubkey:Rt,account:Z({executable:Se(),owner:Rt,lamports:z(),data:wi,rentEpoch:z()})}))),ri=Z({program:X(),parsed:lr(),space:z()}),uf=Nt(et(Z({pubkey:Rt,account:Z({executable:Se(),owner:Rt,lamports:z(),data:ri,rentEpoch:z()})}))),ff=Nt(et(Z({lamports:z(),address:Rt}))),wr=Z({executable:Se(),owner:Rt,lamports:z(),data:wi,rentEpoch:z()}),hf=Z({pubkey:Rt,account:wr}),lf=_r(he([pi(gt.Buffer),ri]),he([mo,ri]),n=>Array.isArray(n)?Q(n,wi):n),ni=Z({executable:Se(),owner:Rt,lamports:z(),data:lf,rentEpoch:z()}),df=Z({pubkey:Rt,account:ni}),pf=Z({state:he([kt("active"),kt("inactive"),kt("activating"),kt("deactivating")]),active:z(),inactive:z()}),gf=pt(et(Z({signature:X(),slot:z(),err:Ze,memo:rt(X()),blockTime:at(rt(z()))}))),mf=pt(et(Z({signature:X(),slot:z(),err:Ze,memo:rt(X()),blockTime:at(rt(z()))}))),yf=Z({subscription:z(),result:sn(wr)}),wf=Z({pubkey:Rt,account:wr}),bf=Z({subscription:z(),result:sn(wf)}),vf=Z({parent:z(),slot:z(),root:z()}),xf=Z({subscription:z(),result:vf}),Ef=he([Z({type:he([kt("firstShredReceived"),kt("completed"),kt("optimisticConfirmation"),kt("root")]),slot:z(),timestamp:z()}),Z({type:kt("createdBank"),parent:z(),slot:z(),timestamp:z()}),Z({type:kt("frozen"),slot:z(),timestamp:z(),stats:Z({numTransactionEntries:z(),numSuccessfulTransactions:z(),numFailedTransactions:z(),maxTransactionsPerEntry:z()})}),Z({type:kt("dead"),slot:z(),timestamp:z(),err:X()})]),Sf=Z({subscription:z(),result:Ef}),Bf=Z({subscription:z(),result:sn(he([$u,Hu]))}),_f=Z({subscription:z(),result:z()}),Af=Z({pubkey:X(),gossip:rt(X()),tpu:rt(X()),rpc:rt(X()),version:rt(X())}),gs=Z({votePubkey:X(),nodePubkey:X(),activatedStake:z(),epochVoteAccount:Se(),epochCredits:et(gi([z(),z(),z()])),commission:z(),lastVote:z(),rootSlot:rt(z())}),If=pt(Z({current:et(gs),delinquent:et(gs)})),kf=he([kt("processed"),kt("confirmed"),kt("finalized")]),Rf=Z({slot:z(),confirmations:rt(z()),err:Ze,confirmationStatus:at(kf)}),Mf=Nt(et(rt(Rf))),Tf=pt(z()),wo=Z({accountKey:Rt,writableIndexes:et(z()),readonlyIndexes:et(z())}),bi=Z({signatures:et(X()),message:Z({accountKeys:et(X()),header:Z({numRequiredSignatures:z(),numReadonlySignedAccounts:z(),numReadonlyUnsignedAccounts:z()}),instructions:et(Z({accounts:et(z()),data:X(),programIdIndex:z()})),recentBlockhash:X(),addressTableLookups:at(et(wo))})}),bo=Z({pubkey:Rt,signer:Se(),writable:Se(),source:at(he([kt("transaction"),kt("lookupTable")]))}),vo=Z({accountKeys:et(bo),signatures:et(X())}),xo=Z({parsed:lr(),program:X(),programId:Rt}),Eo=Z({accounts:et(Rt),data:X(),programId:Rt}),Cf=he([Eo,xo]),Lf=he([Z({parsed:lr(),program:X(),programId:X()}),Z({accounts:et(X()),data:X(),programId:X()})]),So=_r(Cf,Lf,n=>"accounts"in n?Q(n,Eo):Q(n,xo)),Bo=Z({signatures:et(X()),message:Z({accountKeys:et(bo),instructions:et(So),recentBlockhash:X(),addressTableLookups:at(rt(et(wo)))})}),Yr=Z({accountIndex:z(),mint:X(),owner:at(X()),programId:at(X()),uiTokenAmount:ei}),_o=Z({writable:et(Rt),readonly:et(Rt)}),on=Z({err:Ze,fee:z(),innerInstructions:at(rt(et(Z({index:z(),instructions:et(Z({accounts:et(z()),data:X(),programIdIndex:z()}))})))),preBalances:et(z()),postBalances:et(z()),logMessages:at(rt(et(X()))),preTokenBalances:at(rt(et(Yr))),postTokenBalances:at(rt(et(Yr))),loadedAddresses:at(_o),computeUnitsConsumed:at(z()),costUnits:at(z())}),vi=Z({err:Ze,fee:z(),innerInstructions:at(rt(et(Z({index:z(),instructions:et(So)})))),preBalances:et(z()),postBalances:et(z()),logMessages:at(rt(et(X()))),preTokenBalances:at(rt(et(Yr))),postTokenBalances:at(rt(et(Yr))),loadedAddresses:at(_o),computeUnitsConsumed:at(z()),costUnits:at(z())}),dr=he([kt(0),kt("legacy")]),Ye=Z({pubkey:X(),lamports:z(),postBalance:rt(z()),rewardType:rt(X()),commission:at(rt(z()))}),Uf=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),transactions:et(Z({transaction:bi,meta:rt(on),version:at(dr)})),rewards:at(et(Ye)),blockTime:rt(z()),blockHeight:rt(z())}))),Ff=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),rewards:at(et(Ye)),blockTime:rt(z()),blockHeight:rt(z())}))),Nf=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),transactions:et(Z({transaction:vo,meta:rt(on),version:at(dr)})),rewards:at(et(Ye)),blockTime:rt(z()),blockHeight:rt(z())}))),Of=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),transactions:et(Z({transaction:Bo,meta:rt(vi),version:at(dr)})),rewards:at(et(Ye)),blockTime:rt(z()),blockHeight:rt(z())}))),qf=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),transactions:et(Z({transaction:vo,meta:rt(vi),version:at(dr)})),rewards:at(et(Ye)),blockTime:rt(z()),blockHeight:rt(z())}))),Pf=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),rewards:at(et(Ye)),blockTime:rt(z()),blockHeight:rt(z())}))),Df=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),transactions:et(Z({transaction:bi,meta:rt(on)})),rewards:at(et(Ye)),blockTime:rt(z())}))),ms=pt(rt(Z({blockhash:X(),previousBlockhash:X(),parentSlot:z(),signatures:et(X()),blockTime:rt(z())}))),Zn=pt(rt(Z({slot:z(),meta:rt(on),blockTime:at(rt(z())),transaction:bi,version:at(dr)}))),Nr=pt(rt(Z({slot:z(),transaction:Bo,meta:rt(vi),blockTime:at(rt(z())),version:at(dr)}))),zf=Nt(Z({blockhash:X(),lastValidBlockHeight:z()})),Kf=Nt(Se()),$f=Z({slot:z(),numTransactions:z(),numSlots:z(),samplePeriodSecs:z()}),Hf=pt(et($f)),Vf=Nt(rt(Z({feeCalculator:Z({lamportsPerSignature:z()})}))),jf=pt(X()),Gf=pt(X()),Wf=Z({err:Ze,logs:et(X()),signature:X()}),Zf=Z({result:sn(Wf),subscription:z()}),Yf={"solana-client":"js/1.0.0-maintenance"};class eh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const x={};return async I=>{const{commitment:M,config:k}=Et(I),B=this._buildArgs([],M,void 0,k),R=fs(B);return x[R]=x[R]??(async()=>{try{const T=await this._rpcRequest("getBlockHeight",B),U=Q(T,pt(z()));if("error"in U)throw new st(U.error,"failed to get block height information");return U.result}finally{delete x[R]}})(),await x[R]}})();let r,s,i,a,f,p;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,a=e.fetchMiddleware,f=e.disableRetryOnRateLimit,p=e.httpAgent),this._rpcEndpoint=Uu(t),this._rpcWsEndpoint=r||Cu(t),this._rpcClient=Zu(t,s,i,a,f,p),this._rpcRequest=Yu(this._rpcClient),this._rpcBatchRequest=Xu(this._rpcClient),this._rpcWebSocket=new ku(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgs([t.toBase58()],r,void 0,s),a=await this._rpcRequest("getBalance",i),f=Q(a,Nt(z()));if("error"in f)throw new st(f.error,`failed to get balance for ${t.toBase58()}`);return f.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Q(e,pt(rt(z())));if("error"in r)throw new st(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Q(t,pt(z()));if("error"in e)throw new st(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Q(t,sf);if("error"in e)throw new st(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=Q(r,of);if("error"in s)throw new st(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=Q(s,Nt(ei));if("error"in i)throw new st(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=Q(s,Nt(ei));if("error"in i)throw new st(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Et(r);let a=[t.toBase58()];"mint"in e?a.push({mint:e.mint.toBase58()}):a.push({programId:e.programId.toBase58()});const f=this._buildArgs(a,s,"base64",i),p=await this._rpcRequest("getTokenAccountsByOwner",f),x=Q(p,cf);if("error"in x)throw new st(x.error,`failed to get token accounts owned by account ${t.toBase58()}`);return x.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),a=await this._rpcRequest("getTokenAccountsByOwner",i),f=Q(a,uf);if("error"in f)throw new st(f.error,`failed to get token accounts owned by account ${t.toBase58()}`);return f.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=Q(s,ff);if("error"in i)throw new st(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=Q(s,af);if("error"in i)throw new st(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgs([t.toBase58()],r,"base64",s),a=await this._rpcRequest("getAccountInfo",i),f=Q(a,Nt(rt(wr)));if("error"in f)throw new st(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getAccountInfo",i),f=Q(a,Nt(rt(ni)));if("error"in f)throw new st(f.error,`failed to get info about account ${t.toBase58()}`);return f.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Et(e),i=t.map(x=>x.toBase58()),a=this._buildArgs([i],r,"jsonParsed",s),f=await this._rpcRequest("getMultipleAccounts",a),p=Q(f,Nt(et(rt(ni))));if("error"in p)throw new st(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Et(e),i=t.map(x=>x.toBase58()),a=this._buildArgs([i],r,"base64",s),f=await this._rpcRequest("getMultipleAccounts",a),p=Q(f,Nt(et(rt(wr))));if("error"in p)throw new st(p.error,`failed to get info for accounts ${i}`);return p.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Et(e),a=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),f=await this._rpcRequest("getStakeActivation",a),p=Q(f,pt(pf));if("error"in p)throw new st(p.error,`failed to get Stake Activation ${t.toBase58()}`);return p.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Et(e),{encoding:i,...a}=s||{},f=this._buildArgs([t.toBase58()],r,i||"base64",{...a,...a.filters?{filters:ds(a.filters)}:null}),p=await this._rpcRequest("getProgramAccounts",f),x=et(hf),I=a.withContext===!0?Q(p,Nt(x)):Q(p,pt(x));if("error"in I)throw new st(I.error,`failed to get accounts owned by program ${t.toBase58()}`);return I.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),a=await this._rpcRequest("getProgramAccounts",i),f=Q(a,pt(et(df)));if("error"in f)throw new st(f.error,`failed to get accounts owned by program ${t.toBase58()}`);return f.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=ie.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return te(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const a=new Promise((p,x)=>{try{r=this.onSignature(e,(M,k)=>{r=void 0;const B={context:k,value:M};p({__type:Ne.PROCESSED,response:B})},t);const I=new Promise(M=>{r==null?M():s=this._onSubscriptionStateChange(r,k=>{k==="subscribed"&&M()})});(async()=>{if(await I,i)return;const M=await this.getSignatureStatus(e);if(i||M==null)return;const{context:k,value:B}=M;if(B!=null)if(B?.err)x(B.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(B.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(B.confirmationStatus==="processed"||B.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,p({__type:Ne.PROCESSED,response:{context:k,value:B}})}})()}catch(I){x(I)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:a}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const a=new Promise(M=>{const k=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let B=await k();if(!i){for(;B<=r;)if(await er(1e3),i||(B=await k(),i))return;M({__type:Ne.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:f,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),x=this.getCancellationPromise(e);let I;try{const M=await Promise.race([x,p,a]);if(M.__type===Ne.PROCESSED)I=M.response;else throw new ho(s)}finally{i=!0,f()}return I}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:a}}){let f=!1;const p=new Promise(B=>{let R=i,T=null;const U=async()=>{try{const{context:P,value:W}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return T=P.slot,W?.nonce}catch{return R}};(async()=>{if(R=await U(),!f)for(;;){if(i!==R){B({__type:Ne.NONCE_INVALID,slotInWhichNonceDidAdvance:T});return}if(await er(2e3),f||(R=await U(),f))return}})()}),{abortConfirmation:x,confirmationPromise:I}=this.getTransactionConfirmationPromise({commitment:t,signature:a}),M=this.getCancellationPromise(e);let k;try{const B=await Promise.race([M,I,p]);if(B.__type===Ne.PROCESSED)k=B.response;else{let R;for(;;){const T=await this.getSignatureStatus(a);if(T==null)break;if(T.context.slot<(B.slotInWhichNonceDidAdvance??r)){await er(400);continue}R=T;break}if(R?.value){const T=t||"finalized",{confirmationStatus:U}=R.value;switch(T){case"processed":case"recent":if(U!=="processed"&&U!=="confirmed"&&U!=="finalized")throw new mr(a);break;case"confirmed":case"single":case"singleGossip":if(U!=="confirmed"&&U!=="finalized")throw new mr(a);break;case"finalized":case"max":case"root":if(U!=="finalized")throw new mr(a);break;default:}k={context:R.context,value:{err:R.value.err}}}else throw new mr(a)}}finally{f=!0,x()}return k}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(p=>{let x=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{x=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>p({__type:Ne.TIMED_OUT,timeoutMs:x}),x)}),{abortConfirmation:i,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let f;try{const p=await Promise.race([a,s]);if(p.__type===Ne.PROCESSED)f=p.response;else throw new lo(e,p.timeoutMs/1e3)}finally{clearTimeout(r),i()}return f}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Q(t,pt(et(Af)));if("error"in e)throw new st(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=Q(r,If);if("error"in s)throw new st(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Et(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),a=Q(i,pt(z()));if("error"in a)throw new st(a.error,"failed to get slot");return a.result}async getSlotLeader(t){const{commitment:e,config:r}=Et(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),a=Q(i,pt(X()));if("error"in a)throw new st(a.error,"failed to get slot leader");return a.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=Q(s,pt(et(Rt)));if("error"in i)throw new st(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);te(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=Q(s,Mf);if("error"in i)throw new st(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Et(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),a=Q(i,pt(z()));if("error"in a)throw new st(a.error,"failed to get transaction count");return a.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=Q(r,Ju);if("error"in s)throw new st(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Et(r),a=this._buildArgs([t.map(x=>x.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),f=await this._rpcRequest("getInflationReward",a),p=Q(f,Ou);if("error"in p)throw new st(p.error,"failed to get inflation reward");return p.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Q(t,Qu);if("error"in e)throw new st(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Et(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),a=Q(i,ef);if("error"in a)throw new st(a.error,"failed to get epoch info");return a.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Q(t,rf);if("error"in e)throw new st(e.error,"failed to get epoch schedule");const r=e.result;return new Au(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Q(t,nf);if("error"in e)throw new st(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Q(s,Tf);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Q(e,Hf);if("error"in r)throw new st(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Q(s,Vf);if("error"in i)throw new st(i.error,"failed to get fee calculator");const{context:a,value:f}=i.result;return{context:a,value:f!==null?f.feeCalculator:null}}async getFeeForMessage(t,e){const r=fr(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),a=Q(i,Nt(rt(z())));if("error"in a)throw new st(a.error,"failed to get fee for message");if(a.result===null)throw new Error("invalid blockhash");return a.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(a=>a.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=Q(s,tf);if("error"in i)throw new st(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Et(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),a=Q(i,zf);if("error"in a)throw new st(a.error,"failed to get latest blockhash");return a.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgs([t],r,void 0,s),a=await this._rpcRequest("isBlockhashValid",i),f=Q(a,Kf);if("error"in f)throw new st(f.error,"failed to determine if the blockhash `"+t+"`is valid");return f.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Q(t,pt(Vu));if("error"in e)throw new st(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Q(t,pt(X()));if("error"in e)throw new st(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const f=Q(a,Nf);if("error"in f)throw f.error;return f.result}case"none":{const f=Q(a,Ff);if("error"in f)throw f.error;return f.result}default:{const f=Q(a,Uf);if("error"in f)throw f.error;const{result:p}=f;return p?{...p,transactions:p.transactions.map(({transaction:x,meta:I,version:M})=>({meta:I,transaction:{...x,message:Wn(M,x.message)},version:M}))}:null}}}catch(f){throw new st(f,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const f=Q(a,qf);if("error"in f)throw f.error;return f.result}case"none":{const f=Q(a,Pf);if("error"in f)throw f.error;return f.result}default:{const f=Q(a,Of);if("error"in f)throw f.error;return f.result}}}catch(f){throw new st(f,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:f,...p}=t;r=f,e=p}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),a=Q(i,Wu);if("error"in a)throw new st(a.error,"failed to get block production information");return a.result}async getTransaction(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),a=await this._rpcRequest("getTransaction",i),f=Q(a,Zn);if("error"in f)throw new st(f.error,"failed to get transaction");const p=f.result;return p&&{...p,transaction:{...p.transaction,message:Wn(p.version,p.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Et(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),a=await this._rpcRequest("getTransaction",i),f=Q(a,Nr);if("error"in f)throw new st(f.error,"failed to get transaction");return f.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Et(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(p=>{const x=Q(p,Nr);if("error"in x)throw new st(x.error,"failed to get transactions");return x.result})}async getTransactions(t,e){const{commitment:r,config:s}=Et(e),i=t.map(p=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([p],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(p=>{const x=Q(p,Zn);if("error"in x)throw new st(x.error,"failed to get transactions");const I=x.result;return I&&{...I,transaction:{...I.transaction,message:Wn(I.version,I.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=Q(s,Df);if("error"in i)throw new st(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");const f={...a,transactions:a.transactions.map(({transaction:p,meta:x})=>{const I=new De(p.message);return{meta:x,transaction:{...p,message:I}}})};return{...f,transactions:f.transactions.map(({transaction:p,meta:x})=>({meta:x,transaction:Oe.populate(p.message,p.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),a=Q(i,pt(et(z())));if("error"in a)throw new st(a.error,"failed to get blocks");return a.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Q(s,ms);if("error"in i)throw new st(i.error,"failed to get block");const a=i.result;if(!a)throw new Error("Block "+t+" not found");return a}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=Q(s,ms);if("error"in i)throw new st(i.error,"failed to get confirmed block");const a=i.result;if(!a)throw new Error("Confirmed block "+t+" not found");return a}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=Q(s,Zn);if("error"in i)throw new st(i.error,"failed to get transaction");const a=i.result;if(!a)return a;const f=new De(a.transaction.message),p=a.transaction.signatures;return{...a,transaction:Oe.populate(f,p)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=Q(s,Nr);if("error"in i)throw new st(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(a=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([a],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(a=>{const f=Q(a,Nr);if("error"in f)throw new st(f.error,"failed to get confirmed transactions");return f.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const p=await this.getConfirmedBlockSignatures(e,"finalized");p.signatures.length>0&&(s.until=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}let a=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>a));)try{const p=await this.getConfirmedBlockSignatures(r);p.signatures.length>0&&(s.before=p.signatures[p.signatures.length-1].toString())}catch(p){if(p instanceof Error&&p.message.includes("skipped"))continue;throw p}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(p=>p.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),a=Q(i,gf);if("error"in a)throw new st(a.error,"failed to get confirmed signatures for address");return a.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),a=Q(i,mf);if("error"in a)throw new st(a.error,"failed to get signatures for address");return a.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new ls({key:t,state:ls.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=yi.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=Q(r,jf);if("error"in s)throw new st(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await er(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Lu;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await er(vu/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Et(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),a=Q(i,Nt(z()));if("error"in a)throw new st(a.error,"failed to get stake minimum delegation");return a.result}async simulateTransaction(t,e,r){if("message"in t){const T=t.serialize(),U=gt.Buffer.from(T).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const P=e||{};P.encoding="base64","commitment"in P||(P.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(P.innerInstructions=e.innerInstructions);const W=[U,P],K=await this._rpcRequest("simulateTransaction",W),J=Q(K,ps);if("error"in J)throw new Error("failed to simulate transaction: "+J.error.message);return J.result}let s;if(t instanceof Oe){let R=t;s=new Oe,s.feePayer=R.feePayer,s.instructions=t.instructions,s.nonceInfo=R.nonceInfo,s.signatures=R.signatures}else s=Oe.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let R=this._disableBlockhashCaching;for(;;){const T=await this._blockhashWithExpiryBlockHeight(R);if(s.lastValidBlockHeight=T.lastValidBlockHeight,s.recentBlockhash=T.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const U=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(U)&&!this._blockhashInfo.transactionSignatures.includes(U)){this._blockhashInfo.simulatedSignatures.push(U);break}else R=!0}}const a=s._compile(),f=a.serialize(),x=s._serialize(f).toString("base64"),I={encoding:"base64",commitment:this.commitment};if(r){const R=(Array.isArray(r)?r:a.nonProgramIds()).map(T=>T.toBase58());I.accounts={encoding:"base64",addresses:R}}i&&(I.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(I.innerInstructions=e.innerInstructions);const M=[x,I],k=await this._rpcRequest("simulateTransaction",M),B=Q(k,ps);if("error"in B){let R;if("data"in B.error&&(R=B.error.data.logs,R&&Array.isArray(R))){const T=`
    `,U=T+R.join(T);console.error(B.error.message,U)}throw new cs({action:"simulate",signature:"",transactionMessage:B.error.message,logs:R})}return B.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const a=t.serialize();return await this.sendRawTransaction(a,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let a=this._disableBlockhashCaching;for(;;){const f=await this._blockhashWithExpiryBlockHeight(a);if(t.lastValidBlockHeight=f.lastValidBlockHeight,t.recentBlockhash=f.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const p=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(p))a=!0;else{this._blockhashInfo.transactionSignatures.push(p);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=fr(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const a=[t,r],f=await this._rpcRequest("sendTransaction",a),p=Q(f,Gf);if("error"in p){let x;throw"data"in p.error&&(x=p.error.data.logs),new cs({action:s?"send":"simulate",signature:"",transactionMessage:p.error.message,logs:x})}return p.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:a}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const f=await this._rpcWebSocket.call(a,i);this._setSubscription(r,{...s,serverSubscriptionId:f,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[f]=s.callbacks,await this._updateSubscriptions()}catch(f){if(console.error(`Received ${f instanceof Error?"":"JSON-RPC "}error calling \`${a}\``,{args:i,error:f}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:a}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(a,[i])}catch(f){if(f instanceof Error&&console.error(`${a} error:`,f.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Q(t,yf);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=fs([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const a=this._subscriptionsByHash[s];te(a!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),a.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Et(r),a=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},a)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Q(t,bf);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:a}=Et(r),f=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",a||(s?{filters:ds(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},f)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Q(t,Zf);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Q(t,xf);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Q(t,Sf);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let a={};r&&(a.encoding=r),i&&(a.commitment=i),s&&(a=Object.assign(a,s)),t.push(a)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Q(t,Bf);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(a,f)=>{if(a.type==="status"){e(a.result,f);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},a=this._buildArgs([t],s,void 0,i),f=this._makeSubscription({callback:(p,x)=>{e(p,x);try{this.removeSignatureListener(f)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},a);return f}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Q(t,_f);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:C.struct([C.u32("instruction"),hr("recentSlot"),C.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:C.struct([C.u32("instruction")])},ExtendLookupTable:{index:2,layout:C.struct([C.u32("instruction"),hr(),C.seq(mt(),C.offset(C.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:C.struct([C.u32("instruction")])},CloseLookupTable:{index:4,layout:C.struct([C.u32("instruction")])}});new ut("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:C.struct([C.u8("instruction"),C.u32("units"),C.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:C.struct([C.u8("instruction"),C.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:C.struct([C.u8("instruction"),C.u32("units")])},SetComputeUnitPrice:{index:3,layout:C.struct([C.u8("instruction"),hr("microLamports")])}});new ut("ComputeBudget111111111111111111111111111111");C.struct([C.u8("numSignatures"),C.u8("padding"),C.u16("signatureOffset"),C.u16("signatureInstructionIndex"),C.u16("publicKeyOffset"),C.u16("publicKeyInstructionIndex"),C.u16("messageDataOffset"),C.u16("messageDataSize"),C.u16("messageInstructionIndex")]);new ut("Ed25519SigVerify111111111111111111111111111");ou.utils.isValidPrivateKey;C.struct([C.u8("numSignatures"),C.u16("signatureOffset"),C.u8("signatureInstructionIndex"),C.u16("ethAddressOffset"),C.u8("ethAddressInstructionIndex"),C.u16("messageDataOffset"),C.u16("messageDataSize"),C.u8("messageInstructionIndex"),C.blob(20,"ethAddress"),C.blob(64,"signature"),C.u8("recoveryId")]);new ut("KeccakSecp256k11111111111111111111111111111");var Ao;new ut("StakeConfig11111111111111111111111111111111");class Io{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Ao=Io;Io.default=new Ao(0,0,ut.default);Object.freeze({Initialize:{index:0,layout:C.struct([C.u32("instruction"),lu(),du()])},Authorize:{index:1,layout:C.struct([C.u32("instruction"),mt("newAuthorized"),C.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:C.struct([C.u32("instruction")])},Split:{index:3,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},Withdraw:{index:4,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},Deactivate:{index:5,layout:C.struct([C.u32("instruction")])},Merge:{index:7,layout:C.struct([C.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:C.struct([C.u32("instruction"),mt("newAuthorized"),C.u32("stakeAuthorizationType"),nr("authoritySeed"),mt("authorityOwner")])}});new ut("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:C.struct([C.u32("instruction"),pu()])},Authorize:{index:1,layout:C.struct([C.u32("instruction"),mt("newAuthorized"),C.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:C.struct([C.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:C.struct([C.u32("instruction"),gu()])}});new ut("Vote111111111111111111111111111111111111111");new ut("Va1idator1nfo111111111111111111111111111111");Z({name:X(),website:at(X()),details:at(X()),iconUrl:at(X()),keybaseUsername:at(X())});new ut("Vote111111111111111111111111111111111111111");C.struct([mt("nodePubkey"),mt("authorizedWithdrawer"),C.u8("commission"),C.nu64(),C.seq(C.struct([C.nu64("slot"),C.u32("confirmationCount")]),C.offset(C.u32(),-8),"votes"),C.u8("rootSlotValid"),C.nu64("rootSlot"),C.nu64(),C.seq(C.struct([C.nu64("epoch"),mt("authorizedVoter")]),C.offset(C.u32(),-8),"authorizedVoters"),C.struct([C.seq(C.struct([mt("authorizedPubkey"),C.nu64("epochOfLastAuthorizedSwitch"),C.nu64("targetEpoch")]),32,"buf"),C.nu64("idx"),C.u8("isEmpty")],"priorVoters"),C.nu64(),C.seq(C.struct([C.nu64("epoch"),C.nu64("credits"),C.nu64("prevCredits")]),C.offset(C.u32(),-8),"epochCredits"),C.struct([C.nu64("slot"),C.nu64("timestamp")],"lastTimestamp")]);const ys={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function rh(n,t){const e="https";if(!n)return ys[e].devnet;const r=ys[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}export{eh as C,ut as P,rh as c};
